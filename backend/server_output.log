INFO:     Will watch for changes in these directories: ['/home/true/Projects/money_flow_app/backend']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [341456] using StatReload
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:20:05 - INFO - uvicorn.error - Started server process [341467]
2025-07-08 10:20:05 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:20:05 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:20:13 - INFO - uvicorn.access - 127.0.0.1:48082 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:20:14 - INFO - uvicorn.access - 127.0.0.1:48082 - "POST /api/budgets/ HTTP/1.1" 500
2025-07-08 10:20:16 - INFO - uvicorn.access - 127.0.0.1:48082 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:20:16 - INFO - uvicorn.access - 127.0.0.1:48082 - "POST /api/budgets/ HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/core/logging_config.py'. Reloading...
2025-07-08 10:22:18 - INFO - uvicorn.error - Shutting down
2025-07-08 10:22:18 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:22:18 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:22:18 - INFO - uvicorn.error - Finished server process [341467]
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/core/logging_config.py'. Reloading...
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:22:20 - INFO - uvicorn.error - Started server process [347018] None
2025-07-08 10:22:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:20 - INFO - uvicorn.error - Application startup complete. None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:22:22 - INFO - uvicorn.error - Started server process [347251] None
2025-07-08 10:22:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:22:27 - INFO - uvicorn.access - 127.0.0.1:35318 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:22:27 - INFO - uvicorn.access - 127.0.0.1:35318 - "POST /api/budgets/ HTTP/1.1" 500
2025-07-08 10:22:51 - INFO - uvicorn.access - 127.0.0.1:35328 - "OPTIONS /api/dds-articles/?workspace_id=68 HTTP/1.1" 200
2025-07-08 10:22:51 - INFO - uvicorn.access - 127.0.0.1:35328 - "OPTIONS /api/dds-articles/?workspace_id=68 HTTP/1.1" 200
2025-07-08 10:22:51 - INFO - uvicorn.access - 127.0.0.1:56802 - "GET /api/dds-articles/?workspace_id=68 HTTP/1.1" 200
2025-07-08 10:22:51 - INFO - uvicorn.access - 127.0.0.1:56818 - "GET /api/dds-articles/?workspace_id=68 HTTP/1.1" 200
2025-07-08 10:23:05 - INFO - uvicorn.access - 127.0.0.1:56828 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:23:05 - INFO - uvicorn.access - 127.0.0.1:56828 - "POST /api/budgets/ HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/services/budget_service.py'. Reloading...
2025-07-08 10:24:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:24:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Finished server process [347251] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:24:02 - INFO - uvicorn.error - Started server process [359905] None
2025-07-08 10:24:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:24:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:24:10 - INFO - uvicorn.access - 127.0.0.1:51276 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:24:10 - INFO - uvicorn.access - 127.0.0.1:51276 - "POST /api/budgets/ HTTP/1.1" 500
2025-07-08 10:24:16 - INFO - uvicorn.access - 127.0.0.1:51288 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:24:16 - INFO - uvicorn.access - 127.0.0.1:51288 - "POST /api/budgets/ HTTP/1.1" 500
2025-07-08 10:24:30 - INFO - uvicorn.access - 127.0.0.1:46040 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:24:30 - INFO - uvicorn.access - 127.0.0.1:46040 - "POST /api/budgets/ HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 10:29:59 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:29:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Finished server process [359905] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:30:02 - INFO - uvicorn.error - Started server process [403802] None
2025-07-08 10:30:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:02 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 10:30:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:30:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Finished server process [403802] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:30:29 - INFO - uvicorn.error - Started server process [409015] None
2025-07-08 10:30:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:30:46 - INFO - uvicorn.access - 127.0.0.1:47222 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:30:46 - INFO - uvicorn.access - 127.0.0.1:47222 - "POST /api/budgets/ HTTP/1.1" 401
2025-07-08 10:30:51 - INFO - uvicorn.access - 127.0.0.1:47222 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:30:51 - INFO - uvicorn.access - 127.0.0.1:47222 - "POST /api/budgets/ HTTP/1.1" 401
2025-07-08 10:31:07 - INFO - uvicorn.access - 127.0.0.1:47228 - "OPTIONS /api/users/ HTTP/1.1" 200
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
--- DEBUG (Onboarding): Starting onboarding for user test32225 ---
--- DEBUG (Onboarding): Attempting to create default accounts for workspace 69. ---
--- DEBUG (Onboarding): Created account 'Кошелек' for workspace 69. ---
--- DEBUG (Onboarding): Created account 'Карта Tinkoff' for workspace 69. ---
--- DEBUG (Onboarding): Finished creating default accounts for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Операционная деятельность' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления от клиентов' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Авансы от покупателей' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи поставщикам' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Оплата труда' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Налоги и взносы' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Аренда' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Прочие операционные расходы' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Инвестиционная деятельность' for workspace 69. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 69. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа основных средств' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа нематериальных активов' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Полученные дивиденды' for workspace 69. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 69. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка основных средств' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка нематериальных активов' for workspace 69. ---
--- DEBUG (Onboarding): Created DDS article 'Финансовая деятельность' for workspace 69. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 69. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Получение кредитов и займов' for workspace 69. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 69. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Выплаты по кредитам и займам' for workspace 69. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Контрагент: ИП Иванов)' for workspace 69. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Сотрудник: Петров А.А.)' for workspace 69. ---
--- DEBUG (Onboarding): Created default transaction 'Покупка канцтоваров (Контрагент: ООО ОфисМаг)' for workspace 69. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата аренды офиса (Контрагент: Арендодатель ООО)' for workspace 69. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступления от клиентов'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата клиента'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Выручка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Доход'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Прибыль'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Возврат от поставщика'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс полученный'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Предоплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступление от банка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Кредит'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Займ'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Дивиденды'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Платеж поставщику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Материалы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Зарплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс сотруднику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Налоги'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Взносы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аренда'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Коммунальные платежи'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Канцтовары'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Обслуживание'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Реклама'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Погашение кредита'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Проценты по займу'. ---
--- DEBUG (Onboarding): Onboarding completed for user test32225. ---
2025-07-08 10:31:08 - INFO - uvicorn.access - 127.0.0.1:47228 - "POST /api/users/ HTTP/1.1" 201
2025-07-08 10:31:08 - INFO - uvicorn.access - 127.0.0.1:47228 - "POST /api/auth/token HTTP/1.1" 200
2025-07-08 10:31:08 - INFO - uvicorn.access - 127.0.0.1:47228 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47124 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47124 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47140 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47140 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47144 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47144 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47144 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47144 - "OPTIONS /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47158 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47166 - "OPTIONS /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47158 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47166 - "GET /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 69 from 2025-07-01 to 2025-09-30
DEBUG(Dashboard CRUD): Getting summary data for workspace 69 from 2025-07-01 to 2025-09-30
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47144 - "GET /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47174 - "GET /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 10:31:09 - INFO - uvicorn.access - 127.0.0.1:47174 - "GET /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 10:31:11 - INFO - uvicorn.access - 127.0.0.1:47174 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:11 - INFO - uvicorn.access - 127.0.0.1:47144 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:11 - INFO - uvicorn.access - 127.0.0.1:47174 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:11 - INFO - uvicorn.access - 127.0.0.1:47144 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:12 - INFO - uvicorn.access - 127.0.0.1:47174 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:12 - INFO - uvicorn.access - 127.0.0.1:47144 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:12 - INFO - uvicorn.access - 127.0.0.1:47174 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:12 - INFO - uvicorn.access - 127.0.0.1:47144 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:22 - INFO - uvicorn.access - 127.0.0.1:33218 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 10:31:22 - INFO - uvicorn.access - 127.0.0.1:33218 - "POST /api/budgets/ HTTP/1.1" 201
2025-07-08 10:31:22 - INFO - uvicorn.access - 127.0.0.1:33218 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:23 - INFO - uvicorn.access - 127.0.0.1:33220 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:27 - INFO - uvicorn.access - 127.0.0.1:33220 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:31:27 - INFO - uvicorn.access - 127.0.0.1:33220 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:31:28 - INFO - uvicorn.access - 127.0.0.1:36504 - "GET /api/budgets/21/status HTTP/1.1" 500
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0188a9c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:28 - INFO - uvicorn.access - 127.0.0.1:36510 - "GET /api/budgets/21/status HTTP/1.1" 500
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174ec00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:36520 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33668 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33672 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33668 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33672 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33668 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33668 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33688 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33688 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33704 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33704 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33714 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33730 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33714 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33712 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:33 - INFO - uvicorn.access - 127.0.0.1:33730 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:31:34 - INFO - uvicorn.access - 127.0.0.1:33730 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:31:34 - INFO - uvicorn.access - 127.0.0.1:33714 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:31:34 - INFO - uvicorn.access - 127.0.0.1:33714 - "GET /api/budgets/21/status HTTP/1.1" 500
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174b600>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:34 - INFO - uvicorn.access - 127.0.0.1:33712 - "GET /api/budgets/21/status HTTP/1.1" 500
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f01751200>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
WARNING:  StatReload detected changes in 'app/crud/crud_transaction.py'. Reloading...
2025-07-08 10:33:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:33:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Finished server process [409015] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:33:18 - INFO - uvicorn.error - Started server process [446602] None
2025-07-08 10:33:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:33:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48474 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48484 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48474 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48484 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48474 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48484 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48484 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48492 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48492 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48498 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48498 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48526 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:25 - INFO - uvicorn.access - 127.0.0.1:48528 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48526 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48512 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48498 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48498 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48512 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48512 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:33:26 - INFO - uvicorn.access - 127.0.0.1:48498 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:33:33 - INFO - uvicorn.access - 127.0.0.1:48536 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:33 - INFO - uvicorn.access - 127.0.0.1:48548 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:33 - INFO - uvicorn.access - 127.0.0.1:48536 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:33 - INFO - uvicorn.access - 127.0.0.1:48548 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:55 - INFO - uvicorn.access - 127.0.0.1:48560 - "OPTIONS /api/transactions/ HTTP/1.1" 200
2025-07-08 10:33:56 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:56 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 69: Для расхода должен быть указан счет-источник. (<class 'ValueError'>, ValueError('Для расхода должен быть указан счет-источник.'), <traceback object at 0x772a76130f80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-08 10:33:56 - INFO - uvicorn.access - 127.0.0.1:48560 - "POST /api/transactions/ HTTP/1.1" 500
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:48560 - "OPTIONS /api/transactions/ HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:59 - INFO - app.routers.transactions - Транзакция с ID 156 успешно создана для workspace 69. None
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:48560 - "POST /api/transactions/ HTTP/1.1" 201
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:48560 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:46906 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:46912 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:46926 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:46906 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:33:59 - INFO - uvicorn.access - 127.0.0.1:46912 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:01 - INFO - uvicorn.access - 127.0.0.1:46912 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:01 - INFO - uvicorn.access - 127.0.0.1:46906 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:01 - INFO - uvicorn.access - 127.0.0.1:46906 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:01 - INFO - uvicorn.access - 127.0.0.1:46912 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:02 - INFO - uvicorn.access - 127.0.0.1:46912 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:34:02 - INFO - uvicorn.access - 127.0.0.1:46906 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:34:02 - INFO - uvicorn.access - 127.0.0.1:46906 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:34:02 - INFO - uvicorn.access - 127.0.0.1:46912 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:34:08 - INFO - uvicorn.access - 127.0.0.1:39732 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:08 - INFO - uvicorn.access - 127.0.0.1:39734 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:08 - INFO - uvicorn.access - 127.0.0.1:39732 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:08 - INFO - uvicorn.access - 127.0.0.1:39734 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:11 - INFO - uvicorn.access - 127.0.0.1:39732 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:11 - INFO - uvicorn.access - 127.0.0.1:39734 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:11 - INFO - uvicorn.access - 127.0.0.1:39732 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:11 - INFO - uvicorn.access - 127.0.0.1:39748 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:34:20 - INFO - uvicorn.access - 127.0.0.1:47928 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:34:20 - INFO - uvicorn.access - 127.0.0.1:47928 - "PUT /api/budgets/21 HTTP/1.1" 404
2025-07-08 10:34:33 - INFO - uvicorn.access - 127.0.0.1:47944 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:34:33 - INFO - uvicorn.access - 127.0.0.1:47944 - "PUT /api/budgets/21 HTTP/1.1" 404
WARNING:  StatReload detected changes in 'app/routers/budgets.py'. Reloading...
2025-07-08 10:36:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:36:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Finished server process [446602] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:36:10 - INFO - uvicorn.error - Started server process [463013] None
2025-07-08 10:36:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:36:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:36:10 - INFO - uvicorn.access - 127.0.0.1:36934 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:36:10 - INFO - uvicorn.access - 127.0.0.1:36934 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:36:10 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'IntegrityError' is not defined"), <traceback object at 0x71f746ffe540>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 79, in update_budget
    updated_budget = budget_service.update_budget_with_items(
AttributeError: 'BudgetService' object has no attribute 'update_budget_with_items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 92, in update_budget
    except IntegrityError as e: # Перехватываем ошибки уникальности
NameError: name 'IntegrityError' is not defined
WARNING:  StatReload detected changes in 'app/routers/budgets.py'. Reloading...
2025-07-08 10:37:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:37:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Finished server process [463013] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:37:35 - INFO - uvicorn.error - Started server process [477562] None
2025-07-08 10:37:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:37:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:37:38 - INFO - uvicorn.access - 127.0.0.1:47518 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:37:38 - INFO - uvicorn.access - 127.0.0.1:47518 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:37:54 - INFO - uvicorn.access - 127.0.0.1:47520 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:37:54 - INFO - uvicorn.access - 127.0.0.1:47520 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:38:16 - INFO - uvicorn.access - 127.0.0.1:33148 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:38:16 - INFO - uvicorn.access - 127.0.0.1:33148 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33148 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33162 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33148 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33162 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33162 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33148 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33162 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33148 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33162 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:33148 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52928 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52934 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52932 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52928 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52934 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52942 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52934 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52928 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52934 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:21 - INFO - uvicorn.access - 127.0.0.1:52928 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:25 - INFO - uvicorn.access - 127.0.0.1:52928 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:25 - INFO - uvicorn.access - 127.0.0.1:52934 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:25 - INFO - uvicorn.access - 127.0.0.1:52934 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:25 - INFO - uvicorn.access - 127.0.0.1:52928 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:41 - INFO - uvicorn.access - 127.0.0.1:52476 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:41 - INFO - uvicorn.access - 127.0.0.1:52492 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:41 - INFO - uvicorn.access - 127.0.0.1:52492 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:41 - INFO - uvicorn.access - 127.0.0.1:52476 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:51 - INFO - uvicorn.access - 127.0.0.1:52500 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:51 - INFO - uvicorn.access - 127.0.0.1:52500 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:51 - INFO - uvicorn.access - 127.0.0.1:45190 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:38:51 - INFO - uvicorn.access - 127.0.0.1:45198 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 10:40:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:40:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Finished server process [477562] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:40:22 - INFO - uvicorn.error - Started server process [497377] None
2025-07-08 10:40:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:40:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60630 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60634 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60630 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60634 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60630 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60634 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60650 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60650 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60650 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60666 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60670 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60666 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60670 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60670 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60682 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60676 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60676 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60670 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60670 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:27 - INFO - uvicorn.access - 127.0.0.1:60676 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:33 - INFO - uvicorn.access - 127.0.0.1:60694 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:40:33 - INFO - uvicorn.access - 127.0.0.1:60710 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:40:33 - INFO - uvicorn.access - 127.0.0.1:60694 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:40:33 - INFO - uvicorn.access - 127.0.0.1:60710 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60710 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60694 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60712 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60712 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60712 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60846 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60846 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60856 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60872 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60872 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60856 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60874 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60874 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60856 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60874 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:40:34 - INFO - uvicorn.access - 127.0.0.1:60856 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42406 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42420 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42420 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42406 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42406 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42420 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42430 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42430 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42430 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42442 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42446 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42442 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:03 - INFO - uvicorn.access - 127.0.0.1:42446 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42446 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42446 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42458 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42458 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42446 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42446 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:04 - INFO - uvicorn.access - 127.0.0.1:42458 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:05 - INFO - uvicorn.access - 127.0.0.1:42458 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:05 - INFO - uvicorn.access - 127.0.0.1:42446 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:05 - INFO - uvicorn.access - 127.0.0.1:42446 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:05 - INFO - uvicorn.access - 127.0.0.1:42458 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:42:21 - INFO - uvicorn.access - 127.0.0.1:42474 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:42:21 - INFO - uvicorn.access - 127.0.0.1:42474 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:42:28 - INFO - uvicorn.access - 127.0.0.1:42486 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:42:28 - INFO - uvicorn.access - 127.0.0.1:42486 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:42:56 - INFO - uvicorn.access - 127.0.0.1:42478 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:42:56 - INFO - uvicorn.access - 127.0.0.1:42478 - "PUT /api/budgets/21 HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 10:44:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:44:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Finished server process [497377] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:44:11 - INFO - uvicorn.error - Started server process [507849] None
2025-07-08 10:44:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:44:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53110 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53114 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53114 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53110 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53114 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53110 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53110 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53116 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53116 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53136 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53122 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53122 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53146 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53136 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53150 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53146 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53146 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53136 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53146 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:22 - INFO - uvicorn.access - 127.0.0.1:53136 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:30 - INFO - uvicorn.access - 127.0.0.1:53154 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:30 - INFO - uvicorn.access - 127.0.0.1:53162 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:30 - INFO - uvicorn.access - 127.0.0.1:53154 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:30 - INFO - uvicorn.access - 127.0.0.1:53162 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:44:34 - INFO - uvicorn.access - 127.0.0.1:53154 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:44:34 - INFO - uvicorn.access - 127.0.0.1:53154 - "DELETE /api/budgets/21 HTTP/1.1" 405
2025-07-08 10:44:37 - INFO - uvicorn.access - 127.0.0.1:53154 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:44:37 - INFO - uvicorn.access - 127.0.0.1:53154 - "DELETE /api/budgets/21 HTTP/1.1" 405
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
2025-07-08 10:47:01 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:47:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Finished server process [507849] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
Process SpawnProcess-12:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 13, in <module>
    from .routers import (
  File "/home/true/Projects/money_flow_app/backend/app/routers/auth.py", line 14, in <module>
    from .. import crud, models, schemas
  File "/home/true/Projects/money_flow_app/backend/app/crud/__init__.py", line 12, in <module>
    from .crud_budget import budget_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 78
    .offset(skip).limit(limit)
    ^
SyntaxError: invalid syntax
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:48:15 - INFO - uvicorn.error - Started server process [531754] None
2025-07-08 10:48:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:15 - INFO - uvicorn.error - Application startup complete. None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:48:17 - INFO - uvicorn.error - Started server process [532150] None
2025-07-08 10:48:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40302 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40310 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40320 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40328 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38408 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38418 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38408 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38418 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38418 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:38408 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40320 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40328 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40328 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40320 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40310 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40302 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40310 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40302 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:17 - INFO - uvicorn.access - 127.0.0.1:40310 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:18 - INFO - uvicorn.access - 127.0.0.1:40302 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:18 - INFO - uvicorn.access - 127.0.0.1:40302 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:18 - INFO - uvicorn.access - 127.0.0.1:40310 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:18 - INFO - uvicorn.access - 127.0.0.1:40310 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 500
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb9403400>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:18 - INFO - uvicorn.access - 127.0.0.1:46086 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 500
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb909af80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:48 - INFO - uvicorn.access - 127.0.0.1:46092 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:48 - INFO - uvicorn.access - 127.0.0.1:46098 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:48 - INFO - uvicorn.access - 127.0.0.1:46098 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:48 - INFO - uvicorn.access - 127.0.0.1:46092 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:49 - INFO - uvicorn.access - 127.0.0.1:46092 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:49 - INFO - uvicorn.access - 127.0.0.1:46098 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:48:49 - INFO - uvicorn.access - 127.0.0.1:46092 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 500
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb943c580>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:49 - INFO - uvicorn.access - 127.0.0.1:46098 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 500
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeba6a60c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41890 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41902 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41890 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41902 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41902 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41890 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41906 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41906 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41906 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41910 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41910 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41918 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:37 - INFO - uvicorn.access - 127.0.0.1:41918 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41938 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41934 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41938 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41938 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41934 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41938 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90cba00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:38 - INFO - uvicorn.access - 127.0.0.1:41934 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90c32c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41940 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41954 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41954 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41940 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41940 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41954 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41960 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41964 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41964 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:41960 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56830 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56844 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56850 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56830 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56866 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:45 - INFO - uvicorn.access - 127.0.0.1:56844 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:52:46 - INFO - uvicorn.access - 127.0.0.1:56844 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:52:46 - INFO - uvicorn.access - 127.0.0.1:56866 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:52:46 - INFO - uvicorn.access - 127.0.0.1:56844 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb807abc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:46 - INFO - uvicorn.access - 127.0.0.1:56866 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb8080080>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
2025-07-08 10:55:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:55:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Finished server process [532150] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:55:29 - INFO - uvicorn.error - Started server process [585876] None
2025-07-08 10:55:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:55:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:55:33 - INFO - uvicorn.access - 127.0.0.1:49428 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:55:33 - INFO - uvicorn.access - 127.0.0.1:49430 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49428 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49430 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49428 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49430 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49430 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49440 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49440 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49450 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49450 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49470 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49460 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49470 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49484 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49460 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49460 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49484 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49484 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a8946800>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
2025-07-08 10:55:34 - INFO - uvicorn.access - 127.0.0.1:49460 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 500
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a87fc340>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
2025-07-08 10:56:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:56:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Finished server process [585876] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:56:29 - INFO - uvicorn.error - Started server process [592500] None
2025-07-08 10:56:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:56:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37450 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37466 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37450 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37466 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37450 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37466 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:56:38 - INFO - uvicorn.access - 127.0.0.1:37466 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37480 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37480 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37482 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37488 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37488 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37482 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37506 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37492 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37512 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37512 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37492 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37492 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:39 - INFO - uvicorn.access - 127.0.0.1:37512 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:45 - INFO - uvicorn.access - 127.0.0.1:37516 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:56:45 - INFO - uvicorn.access - 127.0.0.1:37522 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:56:45 - INFO - uvicorn.access - 127.0.0.1:37522 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:56:45 - INFO - uvicorn.access - 127.0.0.1:37516 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:56:47 - INFO - uvicorn.access - 127.0.0.1:37516 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:47 - INFO - uvicorn.access - 127.0.0.1:37522 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:47 - INFO - uvicorn.access - 127.0.0.1:37522 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:47 - INFO - uvicorn.access - 127.0.0.1:37522 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:56:49 - INFO - uvicorn.access - 127.0.0.1:37522 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:49 - INFO - uvicorn.access - 127.0.0.1:57344 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:49 - INFO - uvicorn.access - 127.0.0.1:37522 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:49 - INFO - uvicorn.access - 127.0.0.1:57344 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:56 - INFO - uvicorn.access - 127.0.0.1:57354 - "OPTIONS /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:56 - INFO - uvicorn.access - 127.0.0.1:57354 - "GET /api/budgets/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:57 - INFO - uvicorn.access - 127.0.0.1:57354 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:57 - INFO - uvicorn.access - 127.0.0.1:57354 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:57 - INFO - uvicorn.access - 127.0.0.1:40792 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:57 - INFO - uvicorn.access - 127.0.0.1:40806 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:59 - INFO - uvicorn.access - 127.0.0.1:40806 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:56:59 - INFO - uvicorn.access - 127.0.0.1:40792 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:00 - INFO - uvicorn.access - 127.0.0.1:40806 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:00 - INFO - uvicorn.access - 127.0.0.1:40792 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:51 - INFO - uvicorn.access - 127.0.0.1:40810 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:57:51 - INFO - uvicorn.access - 127.0.0.1:40810 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40154 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40154 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40158 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40162 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40158 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40162 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40162 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40166 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40172 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40166 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40172 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40198 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40196 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40184 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40184 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40196 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40196 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:57:52 - INFO - uvicorn.access - 127.0.0.1:40184 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:57:53 - INFO - uvicorn.access - 127.0.0.1:40196 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:53 - INFO - uvicorn.access - 127.0.0.1:40184 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:53 - INFO - uvicorn.access - 127.0.0.1:40184 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:53 - INFO - uvicorn.access - 127.0.0.1:40196 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:57:57 - INFO - uvicorn.access - 127.0.0.1:40196 - "OPTIONS /api/budgets/21 HTTP/1.1" 200
2025-07-08 10:57:57 - INFO - uvicorn.access - 127.0.0.1:40196 - "PUT /api/budgets/21 HTTP/1.1" 500
2025-07-08 10:58:30 - INFO - uvicorn.access - 127.0.0.1:40210 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:58:30 - INFO - uvicorn.access - 127.0.0.1:40226 - "OPTIONS /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:58:30 - INFO - uvicorn.access - 127.0.0.1:40210 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:58:30 - INFO - uvicorn.access - 127.0.0.1:40226 - "GET /api/budgets/21/status HTTP/1.1" 200
2025-07-08 10:58:34 - INFO - uvicorn.access - 127.0.0.1:40226 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:34 - INFO - uvicorn.access - 127.0.0.1:40210 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:34 - INFO - uvicorn.access - 127.0.0.1:40226 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:34 - INFO - uvicorn.access - 127.0.0.1:40226 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:36 - INFO - uvicorn.access - 127.0.0.1:40226 - "OPTIONS /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:58:36 - INFO - uvicorn.access - 127.0.0.1:42782 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 10:58:36 - INFO - uvicorn.access - 127.0.0.1:40226 - "OPTIONS /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:58:36 - INFO - uvicorn.access - 127.0.0.1:42782 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
DEBUG(Dashboard CRUD): Getting summary data for workspace 69 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-08 00:00:00+03:00, Formatted period_str: 2025-07-08 ---
--- DEBUG (Trend - Row 3): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 4 ---
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-08 00:00:00+03:00, Formatted period_str: 2025-07-08 ---
--- DEBUG (Trend - Row 3): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 4 ---
2025-07-08 10:58:37 - INFO - uvicorn.access - 127.0.0.1:42784 - "GET /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:58:37 - INFO - uvicorn.access - 127.0.0.1:42816 - "GET /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 10:58:37 - INFO - uvicorn.access - 127.0.0.1:42790 - "GET /api/dashboard/cashflow-trend?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 69 from 2025-07-01 to 2025-09-30
2025-07-08 10:58:37 - INFO - uvicorn.access - 127.0.0.1:42800 - "GET /api/dashboard/summary?workspace_id=69&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 10:58:38 - INFO - uvicorn.access - 127.0.0.1:42800 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:38 - INFO - uvicorn.access - 127.0.0.1:42790 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:38 - INFO - uvicorn.access - 127.0.0.1:42800 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:38 - INFO - uvicorn.access - 127.0.0.1:42790 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:48 - INFO - uvicorn.access - 127.0.0.1:42828 - "OPTIONS /api/transactions/ HTTP/1.1" 200
2025-07-08 10:58:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:58:48 - INFO - app.routers.transactions - Транзакция с ID 157 успешно создана для workspace 69. None
2025-07-08 10:58:48 - INFO - uvicorn.access - 127.0.0.1:42828 - "POST /api/transactions/ HTTP/1.1" 201
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:42828 - "OPTIONS /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:42836 - "OPTIONS /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:42836 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:34302 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:34318 - "GET /api/accounts/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:49 - INFO - uvicorn.access - 127.0.0.1:34310 - "GET /api/dds-articles/?workspace_id=69 HTTP/1.1" 200
2025-07-08 10:58:51 - INFO - uvicorn.access - 127.0.0.1:34310 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:58:51 - INFO - uvicorn.access - 127.0.0.1:34318 - "OPTIONS /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:58:51 - INFO - uvicorn.access - 127.0.0.1:34310 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
2025-07-08 10:58:51 - INFO - uvicorn.access - 127.0.0.1:34318 - "GET /api/budgets/?workspace_id=69&is_active=true HTTP/1.1" 200
WARNING:  StatReload detected changes in 'app/routers/budgets.py'. Reloading...
2025-07-08 10:59:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Finished server process [592500] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:59:12 - INFO - uvicorn.error - Started server process [604811] None
2025-07-08 10:59:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:12 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 10:59:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:15 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Finished server process [604811] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:59:17 - INFO - uvicorn.error - Started server process [604937] None
2025-07-08 10:59:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:17 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/services/budget_service.py'. Reloading...
2025-07-08 10:59:28 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Finished server process [604937] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
Process SpawnProcess-19:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 13, in <module>
    from .routers import (
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 10, in <module>
    from ..services.budget_service import budget_service
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 34
    except Exception as e:
    ^
IndentationError: expected an indented block
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
WARNING:  StatReload detected changes in 'app/services/budget_service.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 10:59:43 - INFO - uvicorn.error - Started server process [608042] None
2025-07-08 10:59:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:43 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/services/budget_service.py'. Reloading...
2025-07-08 11:00:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Finished server process [608042] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:00:05 - INFO - uvicorn.error - Started server process [612385] None
2025-07-08 11:00:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:05 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:00:35 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Finished server process [612385] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:00:37 - INFO - uvicorn.error - Started server process [618269] None
2025-07-08 11:00:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:37 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
2025-07-08 11:01:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Finished server process [618269] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/crud/crud_budget.py'. Reloading...
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:01:11 - INFO - uvicorn.error - Started server process [626334] None
2025-07-08 11:01:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:11 - INFO - uvicorn.error - Application startup complete. None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:01:13 - INFO - uvicorn.error - Started server process [626690] None
2025-07-08 11:01:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:13 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:01:37 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Finished server process [626690] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:01:39 - INFO - uvicorn.error - Started server process [633059] None
2025-07-08 11:01:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:39 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:01:44 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Finished server process [633059] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:01:45 - INFO - uvicorn.error - Started server process [634322] None
2025-07-08 11:01:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:45 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 11:02:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Finished server process [634322] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:02:05 - INFO - uvicorn.error - Started server process [638623] None
2025-07-08 11:02:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:05 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 11:02:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Finished server process [638623] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:02:09 - INFO - uvicorn.error - Started server process [639741] None
2025-07-08 11:02:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:02:28 - INFO - uvicorn.access - 127.0.0.1:47136 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:02:28 - INFO - uvicorn.access - 127.0.0.1:47146 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:02:28 - INFO - uvicorn.access - 127.0.0.1:47146 - "GET /api/users/me HTTP/1.1" 401
2025-07-08 11:02:28 - INFO - uvicorn.access - 127.0.0.1:47136 - "GET /api/users/me HTTP/1.1" 401
2025-07-08 11:02:42 - INFO - uvicorn.access - 127.0.0.1:47156 - "OPTIONS /api/users/ HTTP/1.1" 200
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
--- DEBUG (Onboarding): Starting onboarding for user admin1333 ---
--- DEBUG (Onboarding): Attempting to create default accounts for workspace 70. ---
--- DEBUG (Onboarding): Created account 'Кошелек' for workspace 70. ---
--- DEBUG (Onboarding): Created account 'Карта Tinkoff' for workspace 70. ---
--- DEBUG (Onboarding): Finished creating default accounts for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Операционная деятельность' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления от клиентов' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Авансы от покупателей' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи поставщикам' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Оплата труда' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Налоги и взносы' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Аренда' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Прочие операционные расходы' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Инвестиционная деятельность' for workspace 70. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 70. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа основных средств' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа нематериальных активов' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Полученные дивиденды' for workspace 70. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 70. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка основных средств' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка нематериальных активов' for workspace 70. ---
--- DEBUG (Onboarding): Created DDS article 'Финансовая деятельность' for workspace 70. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 70. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Получение кредитов и займов' for workspace 70. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 70. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Выплаты по кредитам и займам' for workspace 70. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Контрагент: ИП Иванов)' for workspace 70. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Сотрудник: Петров А.А.)' for workspace 70. ---
--- DEBUG (Onboarding): Created default transaction 'Покупка канцтоваров (Контрагент: ООО ОфисМаг)' for workspace 70. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата аренды офиса (Контрагент: Арендодатель ООО)' for workspace 70. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступления от клиентов'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата клиента'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Выручка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Доход'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Прибыль'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Возврат от поставщика'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс полученный'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Предоплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступление от банка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Кредит'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Займ'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Дивиденды'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Платеж поставщику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Материалы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Зарплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс сотруднику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Налоги'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Взносы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аренда'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Коммунальные платежи'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Канцтовары'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Обслуживание'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Реклама'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Погашение кредита'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Проценты по займу'. ---
--- DEBUG (Onboarding): Onboarding completed for user admin1333. ---
2025-07-08 11:02:43 - INFO - uvicorn.access - 127.0.0.1:47156 - "POST /api/users/ HTTP/1.1" 201
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:47156 - "POST /api/auth/token HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:47156 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43580 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43580 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43584 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43584 - "OPTIONS /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43590 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43590 - "GET /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:44 - INFO - uvicorn.access - 127.0.0.1:43590 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43590 - "OPTIONS /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43602 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43614 - "OPTIONS /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43590 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 70 from 2025-07-01 to 2025-09-30
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43602 - "GET /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43614 - "GET /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 70 from 2025-07-01 to 2025-09-30
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43624 - "GET /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 11:02:45 - INFO - uvicorn.access - 127.0.0.1:43624 - "GET /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:02:47 - INFO - uvicorn.access - 127.0.0.1:43624 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:02:47 - INFO - uvicorn.access - 127.0.0.1:43614 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:02:47 - INFO - uvicorn.access - 127.0.0.1:43624 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:02:47 - INFO - uvicorn.access - 127.0.0.1:43614 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:02:48 - INFO - uvicorn.access - 127.0.0.1:43614 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:48 - INFO - uvicorn.access - 127.0.0.1:43624 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:48 - INFO - uvicorn.access - 127.0.0.1:43624 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:02:48 - INFO - uvicorn.access - 127.0.0.1:43614 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:03:13 - INFO - uvicorn.access - 127.0.0.1:43640 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 11:03:13 - INFO - uvicorn.access - 127.0.0.1:43640 - "POST /api/budgets/ HTTP/1.1" 201
2025-07-08 11:03:13 - INFO - uvicorn.access - 127.0.0.1:43640 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:13 - INFO - uvicorn.access - 127.0.0.1:43644 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:17 - INFO - uvicorn.access - 127.0.0.1:43644 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:03:17 - INFO - uvicorn.access - 127.0.0.1:43644 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:03:17 - INFO - uvicorn.access - 127.0.0.1:52818 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:03:17 - INFO - uvicorn.access - 127.0.0.1:52834 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:03:20 - INFO - uvicorn.access - 127.0.0.1:52834 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:03:20 - INFO - uvicorn.access - 127.0.0.1:52834 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:03:34 - INFO - uvicorn.access - 127.0.0.1:52848 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:03:34 - INFO - uvicorn.access - 127.0.0.1:52848 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:03:46 - INFO - uvicorn.access - 127.0.0.1:34878 - "OPTIONS /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:03:46 - INFO - uvicorn.access - 127.0.0.1:34892 - "OPTIONS /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:03:46 - INFO - uvicorn.access - 127.0.0.1:34892 - "GET /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:03:46 - INFO - uvicorn.access - 127.0.0.1:34878 - "GET /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:03:52 - INFO - uvicorn.access - 127.0.0.1:34894 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:52 - INFO - uvicorn.access - 127.0.0.1:34894 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:52 - INFO - uvicorn.access - 127.0.0.1:35356 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:52 - INFO - uvicorn.access - 127.0.0.1:35342 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:03:56 - INFO - uvicorn.access - 127.0.0.1:35342 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:03:56 - INFO - uvicorn.access - 127.0.0.1:35356 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:03:56 - INFO - uvicorn.access - 127.0.0.1:35356 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:03:56 - INFO - uvicorn.access - 127.0.0.1:35342 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:35366 - "OPTIONS /api/transactions/ HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 70 пользователем admin1333@admin.ru None
2025-07-08 11:04:07 - INFO - app.routers.transactions - Транзакция с ID 162 успешно создана для workspace 70. None
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:35366 - "POST /api/transactions/ HTTP/1.1" 201
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:35366 - "OPTIONS /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:41040 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:41052 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:41040 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:41056 - "GET /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:04:07 - INFO - uvicorn.access - 127.0.0.1:41052 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:04:10 - INFO - uvicorn.access - 127.0.0.1:41052 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:04:10 - INFO - uvicorn.access - 127.0.0.1:41040 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:04:10 - INFO - uvicorn.access - 127.0.0.1:41040 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:04:10 - INFO - uvicorn.access - 127.0.0.1:41052 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:05:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:05:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Finished server process [639741] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:05:19 - INFO - uvicorn.error - Started server process [673478] None
2025-07-08 11:05:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:05:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:05:47 - INFO - uvicorn.access - 127.0.0.1:58236 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:05:47 - INFO - uvicorn.access - 127.0.0.1:58240 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:05:47 - INFO - uvicorn.access - 127.0.0.1:58240 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:05:47 - INFO - uvicorn.access - 127.0.0.1:58236 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:05:49 - INFO - uvicorn.access - 127.0.0.1:58236 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:05:49 - INFO - uvicorn.access - 127.0.0.1:58236 - "PUT /api/budgets/22 HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:08:20 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:08:21 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Finished server process [673478] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:08:23 - INFO - uvicorn.error - Started server process [698168] None
2025-07-08 11:08:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:08:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:09:06 - INFO - uvicorn.access - 127.0.0.1:46016 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:09:06 - INFO - uvicorn.access - 127.0.0.1:46024 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:09:06 - INFO - uvicorn.access - 127.0.0.1:46024 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:09:06 - INFO - uvicorn.access - 127.0.0.1:46016 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:09:08 - INFO - uvicorn.access - 127.0.0.1:46016 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:09:08 - INFO - uvicorn.access - 127.0.0.1:46016 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:09:14 - INFO - uvicorn.access - 127.0.0.1:46032 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:09:14 - INFO - uvicorn.access - 127.0.0.1:46032 - "PUT /api/budgets/22 HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/models/budget_item.py'. Reloading...
2025-07-08 11:10:38 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Finished server process [698168] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:10:41 - INFO - uvicorn.error - Started server process [715510] None
2025-07-08 11:10:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:41 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/schemas/budget.py'. Reloading...
2025-07-08 11:10:48 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Finished server process [715510] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:10:51 - INFO - uvicorn.error - Started server process [715680] None
2025-07-08 11:10:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:11:01 - INFO - uvicorn.access - 127.0.0.1:49670 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:11:01 - INFO - uvicorn.access - 127.0.0.1:49670 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:11:16 - INFO - uvicorn.access - 127.0.0.1:49676 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:11:16 - INFO - uvicorn.access - 127.0.0.1:49676 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45698 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45698 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45700 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45700 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45716 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45716 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45716 - "OPTIONS /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45720 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45744 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45732 - "OPTIONS /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45720 - "GET /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45760 - "GET /api/accounts/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45744 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45732 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45732 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45744 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45732 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:11:17 - INFO - uvicorn.access - 127.0.0.1:45744 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:11:20 - INFO - uvicorn.access - 127.0.0.1:45744 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:20 - INFO - uvicorn.access - 127.0.0.1:45732 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:21 - INFO - uvicorn.access - 127.0.0.1:45744 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:21 - INFO - uvicorn.access - 127.0.0.1:45732 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:23 - INFO - uvicorn.access - 127.0.0.1:45744 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:11:23 - INFO - uvicorn.access - 127.0.0.1:45744 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:11:40 - INFO - uvicorn.access - 127.0.0.1:45778 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:40 - INFO - uvicorn.access - 127.0.0.1:45768 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:40 - INFO - uvicorn.access - 127.0.0.1:45768 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:40 - INFO - uvicorn.access - 127.0.0.1:45778 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:44 - INFO - uvicorn.access - 127.0.0.1:45778 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:11:44 - INFO - uvicorn.access - 127.0.0.1:45778 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:11:50 - INFO - uvicorn.access - 127.0.0.1:49352 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:50 - INFO - uvicorn.access - 127.0.0.1:49354 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:50 - INFO - uvicorn.access - 127.0.0.1:49352 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:50 - INFO - uvicorn.access - 127.0.0.1:49354 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:11:53 - INFO - uvicorn.access - 127.0.0.1:49354 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:11:53 - INFO - uvicorn.access - 127.0.0.1:49354 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59086 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59090 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59106 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59086 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59090 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59114 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59114 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59114 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59128 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:29 - INFO - uvicorn.access - 127.0.0.1:59138 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:42 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:42 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:43 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:43 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:43 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:43 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:44 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:45 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:45 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:45 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:45 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:49 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:49 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:49 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:49 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:50 - INFO - uvicorn.access - 127.0.0.1:52412 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:50 - INFO - uvicorn.access - 127.0.0.1:52412 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:57 - INFO - uvicorn.access - 127.0.0.1:52414 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:57 - INFO - uvicorn.access - 127.0.0.1:52430 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:57 - INFO - uvicorn.access - 127.0.0.1:52430 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:57 - INFO - uvicorn.access - 127.0.0.1:52414 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:59 - INFO - uvicorn.access - 127.0.0.1:52430 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:59 - INFO - uvicorn.access - 127.0.0.1:52414 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:59 - INFO - uvicorn.access - 127.0.0.1:52414 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:14:59 - INFO - uvicorn.access - 127.0.0.1:52430 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:00 - INFO - uvicorn.access - 127.0.0.1:52430 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:00 - INFO - uvicorn.access - 127.0.0.1:52414 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:00 - INFO - uvicorn.access - 127.0.0.1:52430 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:00 - INFO - uvicorn.access - 127.0.0.1:52414 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:06 - INFO - uvicorn.access - 127.0.0.1:33094 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:06 - INFO - uvicorn.access - 127.0.0.1:33100 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:06 - INFO - uvicorn.access - 127.0.0.1:33094 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:06 - INFO - uvicorn.access - 127.0.0.1:33100 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:32 - INFO - uvicorn.access - 127.0.0.1:33108 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:32 - INFO - uvicorn.access - 127.0.0.1:33108 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:33108 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:33108 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:33108 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:48460 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:48460 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:33 - INFO - uvicorn.access - 127.0.0.1:48476 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:34 - INFO - uvicorn.access - 127.0.0.1:48460 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:34 - INFO - uvicorn.access - 127.0.0.1:48476 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:37 - INFO - uvicorn.access - 127.0.0.1:48460 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:37 - INFO - uvicorn.access - 127.0.0.1:48476 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:37 - INFO - uvicorn.access - 127.0.0.1:48460 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:37 - INFO - uvicorn.access - 127.0.0.1:48476 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:47 - INFO - uvicorn.access - 127.0.0.1:40628 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:47 - INFO - uvicorn.access - 127.0.0.1:40632 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:47 - INFO - uvicorn.access - 127.0.0.1:40632 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:47 - INFO - uvicorn.access - 127.0.0.1:40628 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:15:51 - INFO - uvicorn.access - 127.0.0.1:40628 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:15:51 - INFO - uvicorn.access - 127.0.0.1:40628 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:17:11 - INFO - uvicorn.access - 127.0.0.1:35148 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:17:11 - INFO - uvicorn.access - 127.0.0.1:35162 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:17:12 - INFO - uvicorn.access - 127.0.0.1:35162 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:17:12 - INFO - uvicorn.access - 127.0.0.1:35148 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:17:32 - INFO - uvicorn.access - 127.0.0.1:35170 - "OPTIONS /api/budgets/?workspace_id=70&is_active=false HTTP/1.1" 200
2025-07-08 11:17:32 - INFO - uvicorn.access - 127.0.0.1:35170 - "GET /api/budgets/?workspace_id=70&is_active=false HTTP/1.1" 200
2025-07-08 11:17:34 - INFO - uvicorn.access - 127.0.0.1:35170 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:17:34 - INFO - uvicorn.access - 127.0.0.1:35170 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:20:44 - INFO - uvicorn.access - 127.0.0.1:52476 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:20:44 - INFO - uvicorn.access - 127.0.0.1:52492 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:20:44 - INFO - uvicorn.access - 127.0.0.1:52492 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:20:44 - INFO - uvicorn.access - 127.0.0.1:52476 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:20:47 - INFO - uvicorn.access - 127.0.0.1:52492 - "OPTIONS /api/budgets/22 HTTP/1.1" 200
2025-07-08 11:20:47 - INFO - uvicorn.access - 127.0.0.1:52492 - "PUT /api/budgets/22 HTTP/1.1" 500
2025-07-08 11:23:42 - INFO - uvicorn.access - 127.0.0.1:41250 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:42 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:42 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:42 - INFO - uvicorn.access - 127.0.0.1:41250 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:44 - INFO - uvicorn.access - 127.0.0.1:41250 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:23:44 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:23:44 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:23:44 - INFO - uvicorn.access - 127.0.0.1:41250 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41250 - "OPTIONS /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41250 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
DEBUG(Dashboard CRUD): Getting summary data for workspace 70 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-08 00:00:00+03:00, Formatted period_str: 2025-07-08 ---
--- DEBUG (Trend - Row 3): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 4 ---
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 70 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-08 00:00:00+03:00, Formatted period_str: 2025-07-08 ---
--- DEBUG (Trend - Row 3): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 4 ---
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/dashboard/summary?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:45 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/dashboard/cashflow-trend?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/dds-articles/?workspace_id=70 HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:47 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:49 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/reports/dds?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:49 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/reports/dds?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:49 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/reports/dds?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:49 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/reports/dds?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:51 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/reports/profit-loss?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:51 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/reports/profit-loss?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:51 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/reports/profit-loss?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:51 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/reports/profit-loss?workspace_id=70&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:23:52 - INFO - uvicorn.access - 127.0.0.1:41264 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:52 - INFO - uvicorn.access - 127.0.0.1:41266 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:52 - INFO - uvicorn.access - 127.0.0.1:41264 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:23:52 - INFO - uvicorn.access - 127.0.0.1:41266 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-07-08 11:24:54 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:24:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Finished server process [715680] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-33:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 40, in <module>
    async def log_exceptions_middleware(request: Request, call_next):
NameError: name 'Request' is not defined
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-34:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 40, in <module>
    async def log_exceptions_middleware(request: Request, call_next):
NameError: name 'Request' is not defined
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 11:31:09 - INFO - uvicorn.error - Started server process [794440] None
2025-07-08 11:31:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:31:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:45528 - "OPTIONS /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:45532 - "OPTIONS /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:45546 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:45552 - "OPTIONS /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:49956 - "OPTIONS /api/users/ HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:43538 - "GET /api/budgets/22/status HTTP/1.1" 200
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:43544 - "GET /api/budgets/22/status HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:43558 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
2025-07-08 11:31:09 - INFO - uvicorn.access - 127.0.0.1:43574 - "GET /api/budgets/?workspace_id=70&is_active=true HTTP/1.1" 200
--- DEBUG (Onboarding): Starting onboarding for user admin311133 ---
--- DEBUG (Onboarding): Attempting to create default accounts for workspace 71. ---
--- DEBUG (Onboarding): Created account 'Кошелек' for workspace 71. ---
--- DEBUG (Onboarding): Created account 'Карта Tinkoff' for workspace 71. ---
--- DEBUG (Onboarding): Finished creating default accounts for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Операционная деятельность' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления от клиентов' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Авансы от покупателей' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи поставщикам' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Оплата труда' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Налоги и взносы' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Аренда' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Прочие операционные расходы' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Инвестиционная деятельность' for workspace 71. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 71. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа основных средств' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа нематериальных активов' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Полученные дивиденды' for workspace 71. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 71. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка основных средств' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка нематериальных активов' for workspace 71. ---
--- DEBUG (Onboarding): Created DDS article 'Финансовая деятельность' for workspace 71. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 71. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Получение кредитов и займов' for workspace 71. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 71. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Выплаты по кредитам и займам' for workspace 71. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Контрагент: ИП Иванов)' for workspace 71. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Сотрудник: Петров А.А.)' for workspace 71. ---
--- DEBUG (Onboarding): Created default transaction 'Покупка канцтоваров (Контрагент: ООО ОфисМаг)' for workspace 71. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата аренды офиса (Контрагент: Арендодатель ООО)' for workspace 71. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступления от клиентов'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата клиента'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Выручка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Доход'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Прибыль'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Возврат от поставщика'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс полученный'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Предоплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступление от банка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Кредит'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Займ'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Дивиденды'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Платеж поставщику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Материалы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Зарплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс сотруднику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Налоги'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Взносы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аренда'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Коммунальные платежи'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Канцтовары'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Обслуживание'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Реклама'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Погашение кредита'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Проценты по займу'. ---
--- DEBUG (Onboarding): Onboarding completed for user admin311133. ---
2025-07-08 11:31:10 - INFO - uvicorn.access - 127.0.0.1:43590 - "POST /api/users/ HTTP/1.1" 201
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43590 - "POST /api/auth/token HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43590 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43574 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43574 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43558 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43558 - "OPTIONS /api/accounts/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43544 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43538 - "GET /api/accounts/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43538 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43538 - "OPTIONS /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43224 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43538 - "OPTIONS /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43224 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
DEBUG(Dashboard CRUD): Getting summary data for workspace 71 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
DEBUG(Dashboard CRUD): Getting summary data for workspace 71 from 2025-07-01 to 2025-09-30
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43246 - "GET /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43228 - "GET /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43244 - "GET /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:31:11 - INFO - uvicorn.access - 127.0.0.1:43226 - "GET /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:31:24 - INFO - uvicorn.access - 127.0.0.1:43252 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:24 - INFO - uvicorn.access - 127.0.0.1:43252 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:24 - INFO - uvicorn.access - 127.0.0.1:33912 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:24 - INFO - uvicorn.access - 127.0.0.1:33926 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:25 - INFO - uvicorn.access - 127.0.0.1:33926 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:25 - INFO - uvicorn.access - 127.0.0.1:33912 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:25 - INFO - uvicorn.access - 127.0.0.1:33912 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:25 - INFO - uvicorn.access - 127.0.0.1:33926 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:31:40 - INFO - uvicorn.access - 127.0.0.1:33936 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 11:31:40 - INFO - uvicorn.access - 127.0.0.1:33936 - "POST /api/budgets/ HTTP/1.1" 201
2025-07-08 11:31:40 - INFO - uvicorn.access - 127.0.0.1:33936 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:40 - INFO - uvicorn.access - 127.0.0.1:56794 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:45 - INFO - uvicorn.access - 127.0.0.1:56794 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:31:45 - INFO - uvicorn.access - 127.0.0.1:56810 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:31:45 - INFO - uvicorn.access - 127.0.0.1:56810 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:31:45 - INFO - uvicorn.access - 127.0.0.1:56794 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:31:49 - INFO - uvicorn.access - 127.0.0.1:56794 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:49 - INFO - uvicorn.access - 127.0.0.1:56810 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:49 - INFO - uvicorn.access - 127.0.0.1:56794 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:31:49 - INFO - uvicorn.access - 127.0.0.1:56810 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:38:18 - INFO - uvicorn.access - 127.0.0.1:56856 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:18 - INFO - uvicorn.access - 127.0.0.1:56870 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:18 - INFO - uvicorn.access - 127.0.0.1:56856 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:18 - INFO - uvicorn.access - 127.0.0.1:56870 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:25 - INFO - uvicorn.access - 127.0.0.1:56876 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:25 - INFO - uvicorn.access - 127.0.0.1:56876 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:25 - INFO - uvicorn.access - 127.0.0.1:44200 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:25 - INFO - uvicorn.access - 127.0.0.1:44212 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:38:38 - INFO - uvicorn.access - 127.0.0.1:44220 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:38:38 - INFO - uvicorn.access - 127.0.0.1:44220 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:38:38 - INFO - uvicorn.access - 127.0.0.1:34942 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:38:38 - INFO - uvicorn.access - 127.0.0.1:34954 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:38:59 - INFO - uvicorn.access - 127.0.0.1:34960 - "OPTIONS /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:38:59 - INFO - uvicorn.access - 127.0.0.1:34960 - "OPTIONS /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:38:59 - INFO - uvicorn.access - 127.0.0.1:60128 - "GET /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:38:59 - INFO - uvicorn.access - 127.0.0.1:60130 - "GET /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:03 - INFO - uvicorn.access - 127.0.0.1:60130 - "OPTIONS /api/reports/profit-loss?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:03 - INFO - uvicorn.access - 127.0.0.1:60128 - "OPTIONS /api/reports/profit-loss?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:03 - INFO - uvicorn.access - 127.0.0.1:60128 - "GET /api/reports/profit-loss?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:03 - INFO - uvicorn.access - 127.0.0.1:60130 - "GET /api/reports/profit-loss?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:60132 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:60132 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55244 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55252 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55244 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55246 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55252 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:39:14 - INFO - uvicorn.access - 127.0.0.1:55246 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:39:59 - INFO - uvicorn.access - 127.0.0.1:55266 - "OPTIONS /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:59 - INFO - uvicorn.access - 127.0.0.1:55278 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:39:59 - INFO - uvicorn.access - 127.0.0.1:55266 - "OPTIONS /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:39:59 - INFO - uvicorn.access - 127.0.0.1:55278 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 71 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
DEBUG(Dashboard CRUD): Getting summary data for workspace 71 from 2025-07-01 to 2025-09-30
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 11:40:00 - INFO - uvicorn.access - 127.0.0.1:54098 - "GET /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 11:40:00 - INFO - uvicorn.access - 127.0.0.1:54100 - "GET /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:40:00 - INFO - uvicorn.access - 127.0.0.1:54108 - "GET /api/dashboard/summary?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:40:00 - INFO - uvicorn.access - 127.0.0.1:54122 - "GET /api/dashboard/cashflow-trend?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 11:40:05 - INFO - uvicorn.access - 127.0.0.1:54136 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:40:05 - INFO - uvicorn.access - 127.0.0.1:54140 - "OPTIONS /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:40:05 - INFO - uvicorn.access - 127.0.0.1:54136 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:40:05 - INFO - uvicorn.access - 127.0.0.1:54140 - "GET /api/transactions/?page=1&size=20 HTTP/1.1" 200
2025-07-08 11:40:16 - INFO - uvicorn.access - 127.0.0.1:47404 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:16 - INFO - uvicorn.access - 127.0.0.1:47416 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:16 - INFO - uvicorn.access - 127.0.0.1:47416 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:16 - INFO - uvicorn.access - 127.0.0.1:47404 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:18 - INFO - uvicorn.access - 127.0.0.1:47404 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:18 - INFO - uvicorn.access - 127.0.0.1:47416 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:18 - INFO - uvicorn.access - 127.0.0.1:47416 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:18 - INFO - uvicorn.access - 127.0.0.1:47404 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:37 - INFO - uvicorn.access - 127.0.0.1:47428 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:37 - INFO - uvicorn.access - 127.0.0.1:47428 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:38 - INFO - uvicorn.access - 127.0.0.1:45880 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:38 - INFO - uvicorn.access - 127.0.0.1:45894 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:40:39 - INFO - uvicorn.access - 127.0.0.1:45894 - "OPTIONS /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:40:39 - INFO - uvicorn.access - 127.0.0.1:45880 - "OPTIONS /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:40:40 - INFO - uvicorn.access - 127.0.0.1:45880 - "GET /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:40:40 - INFO - uvicorn.access - 127.0.0.1:45894 - "GET /api/reports/dds?workspace_id=71&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 11:40:42 - INFO - uvicorn.access - 127.0.0.1:45894 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:42 - INFO - uvicorn.access - 127.0.0.1:45880 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:42 - INFO - uvicorn.access - 127.0.0.1:45880 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:40:42 - INFO - uvicorn.access - 127.0.0.1:45894 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:41:10 - INFO - uvicorn.access - 127.0.0.1:45908 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:10 - INFO - uvicorn.access - 127.0.0.1:45908 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:10 - INFO - uvicorn.access - 127.0.0.1:46794 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:10 - INFO - uvicorn.access - 127.0.0.1:46806 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:19 - INFO - uvicorn.access - 127.0.0.1:46822 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:41:19 - INFO - uvicorn.access - 127.0.0.1:46822 - "OPTIONS /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:41:19 - INFO - uvicorn.access - 127.0.0.1:46828 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:41:19 - INFO - uvicorn.access - 127.0.0.1:46830 - "GET /api/budgets/23/status HTTP/1.1" 200
2025-07-08 11:41:54 - INFO - uvicorn.access - 127.0.0.1:46840 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:41:54 - INFO - uvicorn.access - 127.0.0.1:46840 - "OPTIONS /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:41:54 - INFO - uvicorn.access - 127.0.0.1:53474 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:41:54 - INFO - uvicorn.access - 127.0.0.1:53486 - "GET /api/budgets/?workspace_id=71&is_active=true HTTP/1.1" 200
2025-07-08 11:41:56 - INFO - uvicorn.access - 127.0.0.1:53486 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:56 - INFO - uvicorn.access - 127.0.0.1:53474 - "OPTIONS /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:56 - INFO - uvicorn.access - 127.0.0.1:53474 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
2025-07-08 11:41:56 - INFO - uvicorn.access - 127.0.0.1:53486 - "GET /api/dds-articles/?workspace_id=71 HTTP/1.1" 200
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-07-08 17:51:56 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:51:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Finished server process [794440] None
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 17:52:00 - INFO - uvicorn.error - Started server process [1059515] None
2025-07-08 17:52:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:00 - INFO - uvicorn.error - Application startup complete. None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 17:52:02 - INFO - uvicorn.error - Started server process [1059728] None
2025-07-08 17:52:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:02 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-07-08 17:52:05 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:52:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Finished server process [1059728] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 17:52:07 - INFO - uvicorn.error - Started server process [1060404] None
2025-07-08 17:52:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:52:08 - INFO - uvicorn.access - 127.0.0.1:42890 - "GET /docs HTTP/1.1" 200
2025-07-08 17:52:09 - INFO - uvicorn.access - 127.0.0.1:42890 - "GET /openapi.json HTTP/1.1" 200
2025-07-08 17:52:13 - INFO - uvicorn.access - 127.0.0.1:57160 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 17:52:13 - INFO - uvicorn.access - 127.0.0.1:57170 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 17:52:13 - INFO - uvicorn.access - 127.0.0.1:57160 - "GET /api/users/me HTTP/1.1" 401
2025-07-08 17:52:13 - INFO - uvicorn.access - 127.0.0.1:57170 - "GET /api/users/me HTTP/1.1" 401
2025-07-08 17:52:28 - INFO - uvicorn.access - 127.0.0.1:57186 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:52:30 - INFO - uvicorn.access - 127.0.0.1:57186 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:52:31 - INFO - uvicorn.access - 127.0.0.1:57186 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:52:39 - INFO - uvicorn.access - 127.0.0.1:39644 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:52:50 - INFO - uvicorn.access - 127.0.0.1:39646 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:54:34 - INFO - uvicorn.access - 127.0.0.1:37154 - "POST /api/auth/token HTTP/1.1" 401
2025-07-08 17:54:42 - INFO - uvicorn.access - 127.0.0.1:37156 - "OPTIONS /api/users/ HTTP/1.1" 200
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
--- DEBUG (Onboarding): Starting onboarding for user admin332223 ---
--- DEBUG (Onboarding): Attempting to create default accounts for workspace 72. ---
--- DEBUG (Onboarding): Created account 'Кошелек' for workspace 72. ---
--- DEBUG (Onboarding): Created account 'Карта Tinkoff' for workspace 72. ---
--- DEBUG (Onboarding): Finished creating default accounts for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Операционная деятельность' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Поступления от клиентов' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Авансы от покупателей' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Платежи поставщикам' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Оплата труда' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Налоги и взносы' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Аренда' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Прочие операционные расходы' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Инвестиционная деятельность' for workspace 72. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 72. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа основных средств' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Продажа нематериальных активов' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Полученные дивиденды' for workspace 72. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 72. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка основных средств' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Покупка нематериальных активов' for workspace 72. ---
--- DEBUG (Onboarding): Created DDS article 'Финансовая деятельность' for workspace 72. ---
--- DEBUG (Onboarding): DDS article 'Поступления' already exists for workspace 72. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Получение кредитов и займов' for workspace 72. ---
--- DEBUG (Onboarding): DDS article 'Платежи' already exists for workspace 72. Skipping creation. ---
--- DEBUG (Onboarding): Created DDS article 'Выплаты по кредитам и займам' for workspace 72. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Контрагент: ИП Иванов)' for workspace 72. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата за услуги (Сотрудник: Петров А.А.)' for workspace 72. ---
--- DEBUG (Onboarding): Created default transaction 'Покупка канцтоваров (Контрагент: ООО ОфисМаг)' for workspace 72. ---
--- DEBUG (Onboarding): Created default transaction 'Оплата аренды офиса (Контрагент: Арендодатель ООО)' for workspace 72. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступления от клиентов'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата клиента'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Выручка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Доход'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Прибыль'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Возврат от поставщика'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс полученный'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Предоплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Поступление от банка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Кредит'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Займ'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Дивиденды'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Продажа НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Платеж поставщику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Оплата услуг'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Материалы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Зарплата'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аванс сотруднику'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Налоги'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Взносы'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Аренда'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Коммунальные платежи'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Канцтовары'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Обслуживание'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Реклама'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка ОС'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Покупка НМА'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Погашение кредита'. ---
--- DEBUG (Onboarding): Created mapping rule for 'Проценты по займу'. ---
--- DEBUG (Onboarding): Onboarding completed for user admin332223. ---
2025-07-08 17:54:43 - INFO - uvicorn.access - 127.0.0.1:37156 - "POST /api/users/ HTTP/1.1" 201
2025-07-08 17:54:43 - INFO - uvicorn.access - 127.0.0.1:37156 - "POST /api/auth/token HTTP/1.1" 200
2025-07-08 17:54:43 - INFO - uvicorn.access - 127.0.0.1:37156 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 17:54:43 - INFO - uvicorn.access - 127.0.0.1:47278 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 17:54:43 - INFO - uvicorn.access - 127.0.0.1:47278 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47284 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47284 - "OPTIONS /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47298 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47298 - "GET /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47298 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47298 - "OPTIONS /api/dashboard/summary?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47310 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47318 - "OPTIONS /api/dashboard/summary?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47324 - "OPTIONS /api/dashboard/cashflow-trend?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 72 from 2025-07-01 to 2025-09-30
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47318 - "GET /api/dashboard/summary?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend): get_cashflow_trend_by_period invoked. Period type: day ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
--- DEBUG (Trend - Row 0): period_start: 2025-07-01 00:00:00+03:00, Formatted period_str: 2025-07-01 ---
--- DEBUG (Trend - Row 1): period_start: 2025-07-05 00:00:00+03:00, Formatted period_str: 2025-07-05 ---
--- DEBUG (Trend - Row 2): period_start: 2025-07-10 00:00:00+03:00, Formatted period_str: 2025-07-10 ---
--- DEBUG (Trend): Trend data fetched. Count: 3 ---
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47298 - "GET /api/dashboard/cashflow-trend?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
DEBUG(Dashboard CRUD): Getting summary data for workspace 72 from 2025-07-01 to 2025-09-30
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47310 - "GET /api/dashboard/cashflow-trend?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30&period_type=day HTTP/1.1" 200
2025-07-08 17:54:44 - INFO - uvicorn.access - 127.0.0.1:47324 - "GET /api/dashboard/summary?workspace_id=72&start_date=2025-07-01&end_date=2025-09-30 HTTP/1.1" 200
2025-07-08 17:54:45 - INFO - uvicorn.access - 127.0.0.1:47324 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:54:45 - INFO - uvicorn.access - 127.0.0.1:47310 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:54:45 - INFO - uvicorn.access - 127.0.0.1:47324 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:54:45 - INFO - uvicorn.access - 127.0.0.1:47310 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:54:46 - INFO - uvicorn.access - 127.0.0.1:47324 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:46 - INFO - uvicorn.access - 127.0.0.1:47310 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:47 - INFO - uvicorn.access - 127.0.0.1:47324 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:54:47 - INFO - uvicorn.access - 127.0.0.1:47310 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:55:02 - INFO - uvicorn.access - 127.0.0.1:51494 - "OPTIONS /api/budgets/ HTTP/1.1" 200
2025-07-08 17:55:02 - INFO - uvicorn.access - 127.0.0.1:51494 - "POST /api/budgets/ HTTP/1.1" 201
2025-07-08 17:55:02 - INFO - uvicorn.access - 127.0.0.1:51494 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:55:03 - INFO - uvicorn.access - 127.0.0.1:51504 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 17:56:27 - INFO - uvicorn.access - 127.0.0.1:56346 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:56:27 - INFO - uvicorn.access - 127.0.0.1:56358 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:56:28 - INFO - uvicorn.access - 127.0.0.1:56346 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:56:28 - INFO - uvicorn.access - 127.0.0.1:56358 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 17:56:30 - INFO - uvicorn.access - 127.0.0.1:56358 - "OPTIONS /api/budgets/24 HTTP/1.1" 200
2025-07-08 17:56:30 - INFO - uvicorn.access - 127.0.0.1:56358 - "PUT /api/budgets/24 HTTP/1.1" 500
2025-07-08 17:56:38 - INFO - uvicorn.access - 127.0.0.1:56366 - "OPTIONS /api/budgets/24 HTTP/1.1" 200
2025-07-08 17:56:39 - INFO - uvicorn.access - 127.0.0.1:56366 - "PUT /api/budgets/24 HTTP/1.1" 500
2025-07-08 17:56:59 - INFO - uvicorn.access - 127.0.0.1:36008 - "POST /api/auth/token HTTP/1.1" 200
2025-07-08 17:57:25 - INFO - uvicorn.access - 127.0.0.1:36042 - "GET /api/dds-articles/ HTTP/1.1" 200
2025-07-08 17:57:46 - INFO - uvicorn.access - 127.0.0.1:37288 - "POST /api/budgets/ HTTP/1.1" 201
2025-07-08 17:58:04 - INFO - uvicorn.access - 127.0.0.1:37300 - "GET /api/budgets/?skip=0&limit=100 HTTP/1.1" 200
2025-07-08 17:58:41 - INFO - uvicorn.access - 127.0.0.1:34292 - "PUT /api/budgets/25 HTTP/1.1" 500
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-07-08 17:59:34 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Finished server process [1060404] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 17:59:36 - INFO - uvicorn.error - Started server process [1073539] None
2025-07-08 17:59:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:59:36 - INFO - uvicorn.error - Application startup complete. None
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
2025-07-08 17:59:52 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Finished server process [1073539] None
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-40:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 83, in <module>
    app.include_router(budgets_router, prefix="/api/budgets", tags=["budgets"])
NameError: name 'budgets_router' is not defined
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-41:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 83, in <module>
    app.include_router(budgets, prefix="/api/budgets", tags=["budgets"])
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1447, in include_router
    self.router.include_router(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 1222, in include_router
    for route in router.routes:
AttributeError: module 'app.routers.budgets' has no attribute 'routes'
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-42:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 83, in <module>
    app.include_router(budgets, prefix="/api/budgets", tags=["budgets"])
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1447, in include_router
    self.router.include_router(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 1222, in include_router
    for route in router.routes:
AttributeError: module 'app.routers.budgets' has no attribute 'routes'
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
Process SpawnProcess-43:
Traceback (most recent call last):
  File "/usr/lib/python3.9/multiprocessing/process.py", line 315, in _bootstrap
    self.run()
  File "/usr/lib/python3.9/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/usr/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/usr/lib/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 855, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 83, in <module>
    app.include_router(budgets, prefix="/api/budgets", tags=["budgets"])
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1447, in include_router
    self.router.include_router(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 1222, in include_router
    for route in router.routes:
AttributeError: module 'app.routers.budgets' has no attribute 'routes'
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/_internal/_config.py:321: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
--- DEBUG: Пытаюсь подключиться с URL: postgresql://postgres:Ghbdtnjvktn@localhost:5432/money_flow_db ---
2025-07-08 18:10:16 - INFO - uvicorn.error - Started server process [1104291] None
2025-07-08 18:10:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:10:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53192 - "OPTIONS /api/budgets/24 HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53266 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53268 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53282 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53290 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:46572 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:46580 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:48118 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53192 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53266 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:53268 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:46572 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:46580 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:48118 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:42286 - "PUT /api/budgets/25 HTTP/1.1" 500
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58108 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58110 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58118 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58108 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58126 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58134 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58146 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58118 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58146 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58118 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58146 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58134 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58126 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58126 - "OPTIONS /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58134 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58110 - "OPTIONS /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:16 - INFO - uvicorn.access - 127.0.0.1:58110 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58156 - "GET /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58180 - "GET /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58168 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58182 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58182 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58168 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58182 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:17 - INFO - uvicorn.access - 127.0.0.1:58168 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:58194 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:58194 - "OPTIONS /api/users/me HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36360 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36372 - "GET /api/users/me HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36360 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36374 - "OPTIONS /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36372 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36374 - "GET /api/workspaces/ HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36372 - "OPTIONS /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:36 - INFO - uvicorn.access - 127.0.0.1:36374 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36376 - "OPTIONS /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36382 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36376 - "GET /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36392 - "GET /api/accounts/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36404 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36382 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36382 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36404 - "OPTIONS /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36404 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:10:37 - INFO - uvicorn.access - 127.0.0.1:36382 - "GET /api/budgets/?workspace_id=72&is_active=true HTTP/1.1" 200
2025-07-08 18:11:27 - INFO - uvicorn.access - 127.0.0.1:49178 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:11:27 - INFO - uvicorn.access - 127.0.0.1:49190 - "OPTIONS /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:11:27 - INFO - uvicorn.access - 127.0.0.1:49190 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:11:27 - INFO - uvicorn.access - 127.0.0.1:49178 - "GET /api/dds-articles/?workspace_id=72 HTTP/1.1" 200
2025-07-08 18:11:30 - INFO - uvicorn.access - 127.0.0.1:49178 - "OPTIONS /api/budgets/24 HTTP/1.1" 200
2025-07-08 18:11:30 - INFO - uvicorn.access - 127.0.0.1:49178 - "PUT /api/budgets/24 HTTP/1.1" 500
2025-07-08 18:15:56 - INFO - uvicorn.access - 127.0.0.1:45032 - "OPTIONS /api/budgets/24 HTTP/1.1" 200
2025-07-08 18:15:56 - INFO - uvicorn.access - 127.0.0.1:45032 - "PUT /api/budgets/24 HTTP/1.1" 500
