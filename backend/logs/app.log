2025-07-05 22:53:32 - INFO - uvicorn.error - Started server process [49869]
2025-07-05 22:53:32 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 22:53:32 - INFO - uvicorn.error - Application startup complete.
2025-07-05 22:53:32 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:04:54 - INFO - uvicorn.error - Shutting down
2025-07-05 23:04:54 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-05 23:04:54 - INFO - uvicorn.error - Application shutdown complete.
2025-07-05 23:04:54 - INFO - uvicorn.error - Finished server process [49869]
2025-07-05 23:04:57 - INFO - uvicorn.error - Started server process [58581]
2025-07-05 23:04:57 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 23:04:57 - INFO - uvicorn.error - Application startup complete.
2025-07-05 23:04:57 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:05:25 - INFO - uvicorn.error - Shutting down
2025-07-05 23:05:25 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-05 23:05:25 - INFO - uvicorn.error - Application shutdown complete.
2025-07-05 23:05:25 - INFO - uvicorn.error - Finished server process [58581]
2025-07-05 23:05:34 - INFO - uvicorn.error - Started server process [59183]
2025-07-05 23:05:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 23:05:34 - INFO - uvicorn.error - Application startup complete.
2025-07-05 23:05:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:07:44 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:44 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:07:51 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:51 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:07:59 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:59 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:08:14 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:08:14 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:08:30 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 43
2025-07-05 23:08:30 - ERROR - app.routers.dds_articles - Непредвиденная ошибка при создании статьи ДДС: (psycopg2.errors.ForeignKeyViolation) insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".

[SQL: INSERT INTO dds_articles (name, article_type, parent_id, is_active, workspace_id) VALUES (%(name)s, %(article_type)s, %(parent_id)s, %(is_active)s, %(workspace_id)s) RETURNING dds_articles.id, dds_articles.created_at, dds_articles.updated_at]
[parameters: {'name': 'Платежи', 'article_type': 'expense', 'parent_id': 0, 'is_active': True, 'workspace_id': 43}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/dds_articles.py", line 50, in create_dds_article
    article = dds_article_service.create_article(
  File "/home/true/Projects/money_flow_app/backend/app/services/dds_article_service.py", line 53, in create_article
    db_article = crud.dds_article.create_with_owner(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dds_article.py", line 76, in create_with_owner
    db.commit()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".

[SQL: INSERT INTO dds_articles (name, article_type, parent_id, is_active, workspace_id) VALUES (%(name)s, %(article_type)s, %(parent_id)s, %(is_active)s, %(workspace_id)s) RETURNING dds_articles.id, dds_articles.created_at, dds_articles.updated_at]
[parameters: {'name': 'Платежи', 'article_type': 'expense', 'parent_id': 0, 'is_active': True, 'workspace_id': 43}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-06 12:04:19 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж' для workspace 1
2025-07-06 12:04:19 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-06 12:04:26 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж' для workspace 43
2025-07-06 12:04:26 - INFO - app.routers.dds_articles - Статья ДДС с ID 653 успешно создана.
2025-07-06 12:12:21 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров' для workspace 43
2025-07-06 12:12:22 - INFO - app.routers.dds_articles - Статья ДДС с ID 654 успешно создана.
2025-07-06 12:12:40 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров' для workspace 43
2025-07-06 12:12:40 - WARNING - app.routers.dds_articles - Попытка создания дубликата статьи ДДС: Статья с именем 'Выручка от продаж товаров' уже существует.
2025-07-06 12:12:58 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров 1 категории' для workspace 43
2025-07-06 12:12:58 - INFO - app.routers.dds_articles - Статья ДДС с ID 655 успешно создана.
2025-07-06 12:56:28 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'фыв' для workspace 43
2025-07-06 12:56:28 - INFO - app.routers.dds_articles - Статья ДДС с ID 656 успешно создана.
2025-07-06 12:56:37 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'пар' для workspace 43
2025-07-06 12:56:37 - INFO - app.routers.dds_articles - Статья ДДС с ID 657 успешно создана.
2025-07-06 13:03:02 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'пыва' для workspace 43
2025-07-06 13:03:02 - INFO - app.routers.dds_articles - Статья ДДС с ID 658 успешно создана.
2025-07-06 13:14:00 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'фыв' для workspace 43
2025-07-06 13:14:00 - WARNING - app.routers.dds_articles - Попытка создания дубликата статьи ДДС: Статья с именем 'фыв' уже существует.
2025-07-06 13:18:44 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'description' для workspace 43
2025-07-06 13:18:44 - INFO - app.routers.dds_articles - Статья ДДС с ID 659 успешно создана.
2025-07-06 16:59:35 - INFO - uvicorn.error - Started server process [6405]
2025-07-06 16:59:35 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 16:59:35 - INFO - uvicorn.error - Application startup complete.
2025-07-06 16:59:35 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:23:33 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:23:33 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:23:38 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:23:38 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:24:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:24:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:25:29 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:25:29 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:25 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:25 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:34 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:34 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:47 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:47 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:58 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:58 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:32:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:32:18 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:32:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:32:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:35:01 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:35:01 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:25 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:25 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:26 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:26 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:38:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:38:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:38:50 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:38:50 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.from_account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:42:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:42:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:42:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:42:48 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:44:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:44:17 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:50:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:50:35 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:50:42 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:50:42 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:52:46 - INFO - uvicorn.error - Shutting down
2025-07-06 21:52:46 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 21:52:46 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 21:52:46 - INFO - uvicorn.error - Finished server process [6405]
2025-07-06 21:52:49 - INFO - uvicorn.error - Started server process [215243]
2025-07-06 21:52:49 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 21:52:49 - INFO - uvicorn.error - Application startup complete.
2025-07-06 21:52:49 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:52:56 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:52:56 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:54:50 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:54:50 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:55:04 - INFO - uvicorn.error - Shutting down
2025-07-06 21:55:04 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 21:55:04 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 21:55:04 - INFO - uvicorn.error - Finished server process [215243]
2025-07-06 21:55:08 - INFO - uvicorn.error - Started server process [217365]
2025-07-06 21:55:08 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 21:55:08 - INFO - uvicorn.error - Application startup complete.
2025-07-06 21:55:08 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:58:05 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 21:58:05 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:00:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:00:07 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:02:09 - INFO - uvicorn.error - Shutting down
2025-07-06 22:02:09 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:02:09 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:02:09 - INFO - uvicorn.error - Finished server process [217365]
2025-07-06 22:02:14 - INFO - uvicorn.error - Started server process [222782]
2025-07-06 22:02:14 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:02:14 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:02:14 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:02:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:02:24 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:02:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:02:59 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:03:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:03:17 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:04:55 - INFO - uvicorn.error - Shutting down
2025-07-06 22:04:55 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:04:55 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:04:55 - INFO - uvicorn.error - Finished server process [222782]
2025-07-06 22:04:58 - INFO - uvicorn.error - Started server process [225003]
2025-07-06 22:04:58 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:04:58 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:04:58 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:05:20 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:05:20 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:13:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:13:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:15:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:15:10 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:17:27 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:17:27 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:18:19 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:18:19 - INFO - app.routers.transactions - Транзакция с ID 72 успешно создана для workspace 51.
2025-07-06 22:20:32 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:20:32 - INFO - app.routers.transactions - Транзакция с ID 73 успешно создана для workspace 51.
2025-07-06 22:21:12 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:21:12 - INFO - app.routers.transactions - Транзакция с ID 74 успешно создана для workspace 51.
2025-07-06 22:31:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:31:17 - INFO - app.routers.transactions - Транзакция с ID 79 успешно создана для workspace 52.
2025-07-06 22:32:28 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:32:28 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    db=db,
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:34:07 - INFO - uvicorn.error - Shutting down
2025-07-06 22:34:07 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:34:07 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:34:07 - INFO - uvicorn.error - Finished server process [225003]
2025-07-06 22:34:34 - INFO - uvicorn.error - Started server process [247184]
2025-07-06 22:34:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:34:34 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:34:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:34:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:34:35 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:34 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:34 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:40 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:40 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:45 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:45 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:45 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:49 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:49 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:03 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:03 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:15 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:15 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:18 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:38:20 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:38:20 - INFO - app.routers.transactions - Транзакция с ID 80 успешно создана для workspace 52.
2025-07-06 22:38:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:38:35 - INFO - app.routers.transactions - Транзакция с ID 81 успешно создана для workspace 52.
2025-07-06 22:48:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:48:06 - INFO - app.routers.transactions - Транзакция с ID 82 успешно создана для workspace 52.
2025-07-06 22:54:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:54:24 - INFO - app.routers.transactions - Транзакция с ID 83 успешно создана для workspace 52.
2025-07-06 23:03:51 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 43 пользователем admin11555@admin.ru
2025-07-06 23:03:51 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 43: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 23:04:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 53 пользователем admin11323211@admin.ru
2025-07-06 23:04:44 - INFO - app.routers.transactions - Транзакция с ID 88 успешно создана для workspace 53.
2025-07-06 23:07:28 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 53 пользователем admin11323211@admin.ru
2025-07-06 23:07:28 - INFO - app.routers.transactions - Транзакция с ID 89 успешно создана для workspace 53.
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:27 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:27 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:33 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:33 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:20:58 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    owner_id=current_user.id,
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:20:58 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    start_date=start_date,
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:22:11 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:22:11 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:23:17 - INFO - uvicorn.error - Shutting down
2025-07-06 23:23:17 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:23:17 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:23:17 - INFO - uvicorn.error - Finished server process [247184]
2025-07-06 23:23:21 - INFO - uvicorn.error - Started server process [285059]
2025-07-06 23:23:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:23:21 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:23:21 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:23:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.created_by_user_id == owner_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:23:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.created_by_user_id == owner_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:25:03 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:25:03 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:26:42 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:26:42 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    owner_id=current_user.id,
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    start_date=start_date,
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:30 - INFO - uvicorn.error - Shutting down
2025-07-06 23:27:31 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:27:31 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:27:31 - INFO - uvicorn.error - Finished server process [285059]
2025-07-06 23:27:33 - INFO - uvicorn.error - Started server process [288286]
2025-07-06 23:27:33 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:27:33 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:27:33 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:27:54 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 39, in get_summary_data
    summary_item = schemas.SummaryItem(
AttributeError: module 'app.schemas' has no attribute 'SummaryItem'
2025-07-06 23:27:54 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 50, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 139, in get_cashflow_trend_by_period
    trend_data.append(schemas.DashboardCashflowTrendData(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DashboardCashflowTrendData
income
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
expense
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-06 23:29:29 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 50, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 139, in get_cashflow_trend_by_period
    trend_data.append(schemas.DashboardCashflowTrendData(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DashboardCashflowTrendData
income
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
expense
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-06 23:29:29 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 39, in get_summary_data
    summary_item = schemas.SummaryItem(
AttributeError: module 'app.schemas' has no attribute 'SummaryItem'
2025-07-06 23:31:07 - INFO - uvicorn.error - Shutting down
2025-07-06 23:31:07 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:31:07 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:31:07 - INFO - uvicorn.error - Finished server process [288286]
2025-07-06 23:31:09 - INFO - uvicorn.error - Started server process [290830]
2025-07-06 23:31:09 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:31:09 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:31:09 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:38:37 - INFO - uvicorn.error - Shutting down
2025-07-06 23:38:37 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:38:37 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:38:37 - INFO - uvicorn.error - Finished server process [290830]
2025-07-06 23:38:50 - INFO - uvicorn.error - Started server process [296962]
2025-07-06 23:38:50 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:38:50 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:38:50 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:44:52 - INFO - uvicorn.error - Shutting down
2025-07-06 23:44:52 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:44:52 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:44:52 - INFO - uvicorn.error - Finished server process [296962]
2025-07-06 23:44:55 - INFO - uvicorn.error - Started server process [301508]
2025-07-06 23:44:55 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:44:55 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:44:55 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:56:43 - INFO - uvicorn.error - Shutting down
2025-07-06 23:56:44 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:56:44 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:56:44 - INFO - uvicorn.error - Finished server process [301508]
2025-07-06 23:56:46 - INFO - uvicorn.error - Started server process [310521]
2025-07-06 23:56:46 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:56:46 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:56:46 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:00:47 - INFO - uvicorn.error - Shutting down
2025-07-07 00:00:47 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:00:47 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:00:47 - INFO - uvicorn.error - Finished server process [310521]
2025-07-07 00:00:49 - INFO - uvicorn.error - Started server process [313784]
2025-07-07 00:00:49 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:00:49 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:00:49 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:00:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 71, in get_dds_report
    article_type=article.article_type.value,
AttributeError: 'str' object has no attribute 'value'
2025-07-07 00:02:32 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 71, in get_dds_report
    article_type=article.article_type, # ИСПРАВЛЕНО: Удалено .value
AttributeError: 'str' object has no attribute 'value'
2025-07-07 00:03:39 - INFO - uvicorn.error - Shutting down
2025-07-07 00:03:39 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:03:39 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:03:39 - INFO - uvicorn.error - Finished server process [313784]
2025-07-07 00:03:42 - INFO - uvicorn.error - Started server process [316091]
2025-07-07 00:03:42 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:03:42 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:03:42 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:03:44 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:37 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:37 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:38 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:05:01 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:05:02 - INFO - uvicorn.error - Shutting down
2025-07-07 00:05:03 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:05:03 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:05:03 - INFO - uvicorn.error - Finished server process [316091]
2025-07-07 00:12:38 - INFO - uvicorn.error - Started server process [322861]
2025-07-07 00:12:38 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:12:38 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:12:38 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 16:53:03 - INFO - uvicorn.error - Shutting down
2025-07-07 16:53:03 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 16:53:03 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 16:53:04 - INFO - uvicorn.error - Finished server process [322861]
2025-07-07 16:53:11 - INFO - uvicorn.error - Started server process [659845]
2025-07-07 16:53:11 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 16:53:11 - INFO - uvicorn.error - Application startup complete.
2025-07-07 16:53:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:17:34 - INFO - uvicorn.error - Shutting down
2025-07-07 20:17:34 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 20:17:34 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 20:17:34 - INFO - uvicorn.error - Finished server process [659845]
2025-07-07 20:17:44 - INFO - uvicorn.error - Started server process [1133002]
2025-07-07 20:17:44 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 20:17:44 - INFO - uvicorn.error - Application startup complete.
2025-07-07 20:17:44 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:22:19 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 63 пользователем admin13241555@admin.ru
2025-07-07 20:22:19 - INFO - app.routers.transactions - Транзакция с ID 130 успешно создана для workspace 63.
2025-07-07 20:52:10 - INFO - uvicorn.error - Shutting down
2025-07-07 20:52:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 20:52:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 20:52:10 - INFO - uvicorn.error - Finished server process [1133002]
2025-07-07 20:53:26 - INFO - uvicorn.error - Started server process [1289153]
2025-07-07 20:53:26 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 20:53:26 - INFO - uvicorn.error - Application startup complete.
2025-07-07 20:53:26 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:54:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 65 пользователем admin115333551@admin.ru
2025-07-07 20:54:10 - INFO - app.routers.transactions - Транзакция с ID 139 успешно создана для workspace 65.
2025-07-07 21:04:47 - INFO - uvicorn.error - Shutting down
2025-07-07 21:04:47 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 21:04:47 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 21:04:47 - INFO - uvicorn.error - Finished server process [1289153]
2025-07-07 21:06:33 - INFO - uvicorn.error - Started server process [1310756]
2025-07-07 21:06:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 21:06:34 - INFO - uvicorn.error - Application startup complete.
2025-07-07 21:06:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 21:06:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:22 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:22 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:23 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:16:10 - INFO - uvicorn.error - Shutting down
2025-07-07 21:16:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 21:16:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 21:16:10 - INFO - uvicorn.error - Finished server process [1310756]
2025-07-07 21:16:21 - INFO - uvicorn.error - Started server process [1333126]
2025-07-07 21:16:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 21:16:21 - INFO - uvicorn.error - Application startup complete.
2025-07-07 21:16:21 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:35:11 - INFO - uvicorn.error - Started server process [7678]
2025-07-08 09:35:11 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:35:11 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:35:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:43:31 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:31 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:39 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:39 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:47:52 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:47:52 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:18 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:18 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:48:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:07 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    """
NameError: name 'Decimal' is not defined
2025-07-08 09:49:07 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    """
NameError: name 'Decimal' is not defined
2025-07-08 09:49:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:41 - INFO - uvicorn.error - Shutting down
2025-07-08 09:49:41 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:49:41 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:49:41 - INFO - uvicorn.error - Finished server process [7678]
2025-07-08 09:49:47 - INFO - uvicorn.error - Started server process [154183]
2025-07-08 09:49:47 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:49:47 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:49:47 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:49:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 52, in get_budget_status
    for item in budget.items:
AttributeError: 'Budget' object has no attribute 'items'
2025-07-08 09:49:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 52, in get_budget_status
    for item in budget.items:
AttributeError: 'Budget' object has no attribute 'items'
2025-07-08 09:52:09 - INFO - uvicorn.error - Shutting down
2025-07-08 09:52:09 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:52:09 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:52:09 - INFO - uvicorn.error - Finished server process [154183]
2025-07-08 09:54:57 - INFO - uvicorn.error - Started server process [216939]
2025-07-08 09:54:57 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:54:57 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:54:57 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:55:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
AttributeError: module 'app.crud' has no attribute 'budget'
2025-07-08 09:55:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
AttributeError: module 'app.crud' has no attribute 'budget'
2025-07-08 09:56:37 - INFO - uvicorn.error - Shutting down
2025-07-08 09:56:37 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:56:37 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:56:37 - INFO - uvicorn.error - Finished server process [216939]
2025-07-08 09:56:41 - INFO - uvicorn.error - Started server process [234982]
2025-07-08 09:56:41 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:56:41 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:56:41 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:56:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:56:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:57:27 - INFO - uvicorn.error - Shutting down
2025-07-08 09:57:27 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:57:27 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:57:27 - INFO - uvicorn.error - Finished server process [234982]
2025-07-08 09:57:31 - INFO - uvicorn.error - Started server process [242866]
2025-07-08 09:57:31 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:57:31 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:57:31 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:57:34 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:57:34 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:59:32 - INFO - uvicorn.error - Shutting down
2025-07-08 09:59:32 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:59:32 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:59:32 - INFO - uvicorn.error - Finished server process [242866]
2025-07-08 09:59:35 - INFO - uvicorn.error - Started server process [260033]
2025-07-08 09:59:35 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:59:35 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:59:35 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:02:10 - INFO - uvicorn.error - Shutting down
2025-07-08 10:02:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:02:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:02:10 - INFO - uvicorn.error - Finished server process [260033]
2025-07-08 10:02:13 - INFO - uvicorn.error - Started server process [274349]
2025-07-08 10:02:13 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:02:13 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:02:13 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:04:42 - INFO - uvicorn.error - Shutting down
2025-07-08 10:04:42 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:04:42 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:04:42 - INFO - uvicorn.error - Finished server process [274349]
2025-07-08 10:04:45 - INFO - uvicorn.error - Started server process [285103]
2025-07-08 10:04:45 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:04:45 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:04:45 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:13:15 - INFO - uvicorn.error - Shutting down
2025-07-08 10:13:15 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:13:15 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:13:15 - INFO - uvicorn.error - Finished server process [285103]
2025-07-08 10:13:23 - INFO - uvicorn.error - Started server process [320640]
2025-07-08 10:13:23 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:13:23 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:13:33 - INFO - uvicorn.error - Shutting down
2025-07-08 10:13:33 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:13:33 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:13:33 - INFO - uvicorn.error - Finished server process [320640]
2025-07-08 10:14:23 - INFO - uvicorn.error - Started server process [321473]
2025-07-08 10:14:23 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:14:23 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:16:18 - INFO - uvicorn.error - Shutting down
2025-07-08 10:16:18 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:16:18 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:16:18 - INFO - uvicorn.error - Finished server process [321473]
2025-07-08 10:16:21 - INFO - uvicorn.error - Started server process [330380]
2025-07-08 10:16:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:16:21 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:20:05 - INFO - uvicorn.error - Started server process [341467]
2025-07-08 10:20:05 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:20:05 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:22:18 - INFO - uvicorn.error - Shutting down
2025-07-08 10:22:18 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:22:18 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:22:18 - INFO - uvicorn.error - Finished server process [341467]
2025-07-08 10:22:20 - INFO - uvicorn.error - Started server process [347018] None
2025-07-08 10:22:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:22:22 - INFO - uvicorn.error - Started server process [347251] None
2025-07-08 10:22:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:24:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Finished server process [347251] None
2025-07-08 10:24:02 - INFO - uvicorn.error - Started server process [359905] None
2025-07-08 10:24:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:24:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:29:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Finished server process [359905] None
2025-07-08 10:30:02 - INFO - uvicorn.error - Started server process [403802] None
2025-07-08 10:30:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:30:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Finished server process [403802] None
2025-07-08 10:30:29 - INFO - uvicorn.error - Started server process [409015] None
2025-07-08 10:30:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0188a9c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174ec00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174b600>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f01751200>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:33:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:33:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Finished server process [409015] None
2025-07-08 10:33:18 - INFO - uvicorn.error - Started server process [446602] None
2025-07-08 10:33:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:33:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:33:56 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:56 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 69: Для расхода должен быть указан счет-источник. (<class 'ValueError'>, ValueError('Для расхода должен быть указан счет-источник.'), <traceback object at 0x772a76130f80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-08 10:33:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:59 - INFO - app.routers.transactions - Транзакция с ID 156 успешно создана для workspace 69. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:36:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Finished server process [446602] None
2025-07-08 10:36:10 - INFO - uvicorn.error - Started server process [463013] None
2025-07-08 10:36:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:36:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:36:10 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'IntegrityError' is not defined"), <traceback object at 0x71f746ffe540>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 79, in update_budget
    updated_budget = budget_service.update_budget_with_items(
AttributeError: 'BudgetService' object has no attribute 'update_budget_with_items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 92, in update_budget
    except IntegrityError as e: # Перехватываем ошибки уникальности
NameError: name 'IntegrityError' is not defined
2025-07-08 10:37:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:37:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Finished server process [463013] None
2025-07-08 10:37:35 - INFO - uvicorn.error - Started server process [477562] None
2025-07-08 10:37:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:37:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:40:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:40:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Finished server process [477562] None
2025-07-08 10:40:22 - INFO - uvicorn.error - Started server process [497377] None
2025-07-08 10:40:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:40:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:44:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Finished server process [497377] None
2025-07-08 10:44:11 - INFO - uvicorn.error - Started server process [507849] None
2025-07-08 10:44:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:44:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:47:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Finished server process [507849] None
2025-07-08 10:48:15 - INFO - uvicorn.error - Started server process [531754] None
2025-07-08 10:48:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:48:17 - INFO - uvicorn.error - Started server process [532150] None
2025-07-08 10:48:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb9403400>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb909af80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb943c580>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeba6a60c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90cba00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90c32c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb807abc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb8080080>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:55:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:55:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Finished server process [532150] None
2025-07-08 10:55:29 - INFO - uvicorn.error - Started server process [585876] None
2025-07-08 10:55:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:55:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a8946800>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a87fc340>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
2025-07-08 10:56:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:56:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Finished server process [585876] None
2025-07-08 10:56:29 - INFO - uvicorn.error - Started server process [592500] None
2025-07-08 10:56:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:56:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:58:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:58:48 - INFO - app.routers.transactions - Транзакция с ID 157 успешно создана для workspace 69. None
2025-07-08 10:59:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Finished server process [592500] None
2025-07-08 10:59:12 - INFO - uvicorn.error - Started server process [604811] None
2025-07-08 10:59:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:15 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Finished server process [604811] None
2025-07-08 10:59:17 - INFO - uvicorn.error - Started server process [604937] None
2025-07-08 10:59:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Finished server process [604937] None
2025-07-08 10:59:43 - INFO - uvicorn.error - Started server process [608042] None
2025-07-08 10:59:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Finished server process [608042] None
2025-07-08 11:00:05 - INFO - uvicorn.error - Started server process [612385] None
2025-07-08 11:00:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Finished server process [612385] None
2025-07-08 11:00:37 - INFO - uvicorn.error - Started server process [618269] None
2025-07-08 11:00:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Finished server process [618269] None
2025-07-08 11:01:11 - INFO - uvicorn.error - Started server process [626334] None
2025-07-08 11:01:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:13 - INFO - uvicorn.error - Started server process [626690] None
2025-07-08 11:01:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Finished server process [626690] None
2025-07-08 11:01:39 - INFO - uvicorn.error - Started server process [633059] None
2025-07-08 11:01:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Finished server process [633059] None
2025-07-08 11:01:45 - INFO - uvicorn.error - Started server process [634322] None
2025-07-08 11:01:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Finished server process [634322] None
2025-07-08 11:02:05 - INFO - uvicorn.error - Started server process [638623] None
2025-07-08 11:02:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Finished server process [638623] None
2025-07-08 11:02:09 - INFO - uvicorn.error - Started server process [639741] None
2025-07-08 11:02:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:04:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 70 пользователем admin1333@admin.ru None
2025-07-08 11:04:07 - INFO - app.routers.transactions - Транзакция с ID 162 успешно создана для workspace 70. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:05:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Finished server process [639741] None
2025-07-08 11:05:19 - INFO - uvicorn.error - Started server process [673478] None
2025-07-08 11:05:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:05:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:08:20 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:08:21 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Finished server process [673478] None
2025-07-08 11:08:23 - INFO - uvicorn.error - Started server process [698168] None
2025-07-08 11:08:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:08:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Finished server process [698168] None
2025-07-08 11:10:41 - INFO - uvicorn.error - Started server process [715510] None
2025-07-08 11:10:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:10:48 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Finished server process [715510] None
2025-07-08 11:10:51 - INFO - uvicorn.error - Started server process [715680] None
2025-07-08 11:10:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:24:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Finished server process [715680] None
2025-07-08 11:31:09 - INFO - uvicorn.error - Started server process [794440] None
2025-07-08 11:31:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:31:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:51:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Finished server process [794440] None
2025-07-08 17:52:00 - INFO - uvicorn.error - Started server process [1059515] None
2025-07-08 17:52:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:00 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:52:02 - INFO - uvicorn.error - Started server process [1059728] None
2025-07-08 17:52:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:52:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Finished server process [1059728] None
2025-07-08 17:52:07 - INFO - uvicorn.error - Started server process [1060404] None
2025-07-08 17:52:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Finished server process [1060404] None
2025-07-08 17:59:36 - INFO - uvicorn.error - Started server process [1073539] None
2025-07-08 17:59:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:59:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Finished server process [1073539] None
2025-07-08 18:10:16 - INFO - uvicorn.error - Started server process [1104291] None
2025-07-08 18:10:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:10:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:18:05 - INFO - uvicorn.error - Started server process [1140780] None
2025-07-08 18:18:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:18:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:18:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Finished server process [1140780] None
2025-07-08 18:18:44 - INFO - uvicorn.error - Started server process [1147111] None
2025-07-08 18:18:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:18:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:20:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Finished server process [1147111] None
2025-07-08 18:20:15 - INFO - uvicorn.error - Started server process [1159517] None
2025-07-08 18:20:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:20:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:20:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Finished server process [1159517] None
2025-07-08 18:33:27 - INFO - uvicorn.error - Started server process [1168606] None
2025-07-08 18:33:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:33:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:36:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x78a3000cf840>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 45, in log_exceptions_middleware
    |     logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
    | NameError: name 'logger' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 45, in log_exceptions_middleware
    logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
NameError: name 'logger' is not defined
2025-07-08 18:39:18 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:18 - INFO - uvicorn.error - Finished server process [1168606] None
2025-07-08 18:39:20 - INFO - uvicorn.error - Started server process [1180933] None
2025-07-08 18:39:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:21 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x725cd98d9580>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    |     logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
    | NameError: name 'logger' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
NameError: name 'logger' is not defined
2025-07-08 18:39:39 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:39 - INFO - uvicorn.error - Finished server process [1180933] None
2025-07-08 18:39:41 - INFO - uvicorn.error - Started server process [1181117] None
2025-07-08 18:39:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:46 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Finished server process [1181117] None
2025-07-08 18:39:47 - INFO - uvicorn.error - Started server process [1181176] None
2025-07-08 18:39:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:48 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x7df156faaf40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 117, in update_budget
    logger.exception("Произошла непредвиденная ошибка при обновлении бюджета ID: %s", budget_id)
NameError: name 'logger' is not defined
2025-07-08 18:39:48 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'JSONResponse' is not defined"), <traceback object at 0x7df156f05800>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_exceptions_middleware
    |     return JSONResponse(
    | NameError: name 'JSONResponse' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_exceptions_middleware
    return JSONResponse(
NameError: name 'JSONResponse' is not defined
2025-07-08 18:40:05 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:40:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:40:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:40:05 - INFO - uvicorn.error - Finished server process [1181176] None
2025-07-08 18:40:07 - INFO - uvicorn.error - Started server process [1181352] None
2025-07-08 18:40:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:40:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:40:07 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x709d03194d00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 117, in update_budget
    logger.exception("Произошла непредвиденная ошибка при обновлении бюджета ID: %s", budget_id)
NameError: name 'logger' is not defined
2025-07-08 18:40:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:40:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:40:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:40:51 - INFO - uvicorn.error - Finished server process [1181352] None
2025-07-08 18:40:53 - INFO - uvicorn.error - Started server process [1182073] None
2025-07-08 18:40:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:40:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:41:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Finished server process [1182073] None
2025-07-08 18:41:02 - INFO - uvicorn.error - Started server process [1182749] None
2025-07-08 18:41:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:41:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:41:04 - ERROR - app.routers.budgets - Произошла непредвиденная ошибка при обновлении бюджета ID: 26 (<class 'AttributeError'>, AttributeError("module 'app.crud' has no attribute 'budget_item'"), <traceback object at 0x748c5a38ce80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 82, in update_budget
    updated_budget = budget_service.update_budget_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 84, in update_budget_with_items
    crud.budget_item.remove(db, id=item_id)
AttributeError: module 'app.crud' has no attribute 'budget_item'
2025-07-08 18:42:26 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:42:26 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:42:26 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:42:26 - INFO - uvicorn.error - Finished server process [1182749] None
2025-07-08 18:56:38 - INFO - uvicorn.error - Started server process [1270831] None
2025-07-08 18:56:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:56:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:56:41 - INFO - app.services.budget_service - Deleted budget item 30 for budget 26. None
2025-07-08 18:56:41 - INFO - app.services.budget_service - Added new budget item for budget 26. None
2025-07-08 18:56:51 - INFO - app.services.budget_service - Deleted budget item 31 for budget 26. None
2025-07-08 18:56:51 - INFO - app.services.budget_service - Added new budget item for budget 26. None
2025-07-08 20:00:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 74 пользователем test332325@test.com None
2025-07-08 20:00:17 - INFO - app.routers.transactions - Транзакция с ID 179 успешно создана для workspace 74. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:00:53 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Finished server process [1270831] None
2025-07-08 20:04:24 - INFO - uvicorn.error - Started server process [1561013] None
2025-07-08 20:04:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:04:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:14:19 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Finished server process [1561013] None
2025-07-08 20:15:30 - INFO - uvicorn.error - Started server process [1613452] None
2025-07-08 20:15:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:15:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:25:24 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Finished server process [1613452] None
2025-07-08 20:25:26 - INFO - uvicorn.error - Started server process [1622028] None
2025-07-08 20:25:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:25:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:25:49 - INFO - app.services.budget_service - Deleted budget item 34 for budget 28. None
2025-07-08 20:25:49 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:25:53 - INFO - app.services.budget_service - Deleted budget item 35 for budget 28. None
2025-07-08 20:25:53 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:25:58 - INFO - app.services.budget_service - Deleted budget item 36 for budget 28. None
2025-07-08 20:25:59 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:29:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Finished server process [1622028] None
2025-07-08 20:30:38 - INFO - uvicorn.error - Started server process [1630149] None
2025-07-08 20:30:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:30:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:30:39 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x714448211c40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:39 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x71444821aa00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x714446661280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7144465e9a00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:09 - INFO - uvicorn.error - Finished server process [1630149] None
2025-07-08 20:32:11 - INFO - uvicorn.error - Started server process [1635060] None
2025-07-08 20:32:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Finished server process [1635060] None
2025-07-08 20:32:32 - INFO - uvicorn.error - Started server process [1635466] None
2025-07-08 20:32:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7bd5566bfec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7bd555e15bc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:51 - INFO - uvicorn.error - Finished server process [1635466] None
2025-07-08 20:32:53 - INFO - uvicorn.error - Started server process [1637468] None
2025-07-08 20:32:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:55 - INFO - uvicorn.error - Started server process [1637611] None
2025-07-08 20:32:55 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:56 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7619deb79700>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 144, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:56 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7619df404e80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 144, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:33:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:33:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:33:03 - INFO - uvicorn.error - Finished server process [1637611] None
2025-07-08 20:33:04 - INFO - uvicorn.error - Started server process [1638872] None
2025-07-08 20:33:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:33:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:33:09 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b467d7c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:09 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b472f340>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:17 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b44ac500>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:17 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b4474380>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:35:54 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:35:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:35:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:35:54 - INFO - uvicorn.error - Finished server process [1638872] None
2025-07-08 20:35:56 - INFO - uvicorn.error - Started server process [1646433] None
2025-07-08 20:35:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:35:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:38:07 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:38:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:38:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:38:08 - INFO - uvicorn.error - Finished server process [1646433] None
2025-07-08 20:38:09 - INFO - uvicorn.error - Started server process [1658816] None
2025-07-08 20:38:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:38:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:38:37 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x712ab0325800>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:38:37 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x712ab026a280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:39:28 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:39:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:39:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:39:28 - INFO - uvicorn.error - Finished server process [1658816] None
2025-07-08 20:39:30 - INFO - uvicorn.error - Started server process [1665045] None
2025-07-08 20:39:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:39:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:39:35 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x78d631c34100>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 24, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:39:35 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x78d632f43280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 24, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:39:39 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:39:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:39:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:39:39 - INFO - uvicorn.error - Finished server process [1665045] None
2025-07-08 20:39:41 - INFO - uvicorn.error - Started server process [1665674] None
2025-07-08 20:39:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:39:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:40:40 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:40:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:40:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:40:41 - INFO - uvicorn.error - Finished server process [1665674] None
2025-07-08 20:40:42 - INFO - uvicorn.error - Started server process [1672005] None
2025-07-08 20:40:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:40:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:40:47 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x7f7ce5a05b80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 110, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:40:47 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x7f7ce7566980>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 110, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:42:29 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:42:29 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:42:29 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:42:29 - INFO - uvicorn.error - Finished server process [1672005] None
2025-07-08 20:42:31 - INFO - uvicorn.error - Started server process [1678988] None
2025-07-08 20:42:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:42:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:43:09 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Покупка авто' для workspace 76 None
2025-07-08 20:43:09 - INFO - app.routers.dds_articles - Статья ДДС с ID 1287 успешно создана. None
2025-07-08 20:43:47 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 76 пользователем admin98989@admin.ru None
2025-07-08 20:43:48 - INFO - app.routers.transactions - Транзакция с ID 188 успешно создана для workspace 76. None
2025-07-08 20:43:57 - INFO - app.services.budget_service - Удалена статья бюджета 38 для бюджета 29. None
2025-07-08 20:43:57 - INFO - app.services.budget_service - Добавлена новая статья для бюджета 29. None
2025-07-08 20:44:09 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 76 пользователем admin98989@admin.ru None
2025-07-08 20:44:09 - INFO - app.routers.transactions - Транзакция с ID 189 успешно создана для workspace 76. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:45:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Finished server process [1678988] None
2025-07-08 20:45:47 - INFO - uvicorn.error - Started server process [1693444] None
2025-07-08 20:45:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:45:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:08:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Finished server process [1693444] None
2025-07-08 22:08:51 - INFO - uvicorn.error - Started server process [1750016] None
2025-07-08 22:08:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:08:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:09:41 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 77 пользователем admin3335556@admin.ru None
2025-07-08 22:09:41 - INFO - app.routers.transactions - Транзакция с ID 194 успешно создана для workspace 77. None
2025-07-08 22:19:01 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x7acaee6dc400>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:20:11 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:20:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:20:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:20:11 - INFO - uvicorn.error - Finished server process [1750016] None
2025-07-08 22:20:14 - INFO - uvicorn.error - Started server process [1800811] None
2025-07-08 22:20:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:20:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:20:22 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x784b59f99d40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:21:25 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:21:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:21:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:21:25 - INFO - uvicorn.error - Finished server process [1800811] None
2025-07-08 22:21:28 - INFO - uvicorn.error - Started server process [1812080] None
2025-07-08 22:21:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:29 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:21:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:21:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:21:30 - INFO - uvicorn.error - Finished server process [1812080] None
2025-07-08 22:21:33 - INFO - uvicorn.error - Started server process [1812667] None
2025-07-08 22:21:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:39 - INFO - uvicorn.error - Started server process [1813519] None
2025-07-08 22:21:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:42 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x7ce910b3fe40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:23:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:23:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:23:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:23:00 - INFO - uvicorn.error - Finished server process [1813519] None
2025-07-08 22:23:02 - INFO - uvicorn.error - Started server process [1825404] None
2025-07-08 22:23:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:23:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:23:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:23:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:23:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:23:34 - INFO - uvicorn.error - Finished server process [1825404] None
2025-07-08 22:23:37 - INFO - uvicorn.error - Started server process [1830306] None
2025-07-08 22:23:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:23:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:23:42 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x701e716bd480>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:25:10 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:25:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:25:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:25:10 - INFO - uvicorn.error - Finished server process [1830306] None
2025-07-08 22:29:08 - INFO - uvicorn.error - Started server process [1864464] None
2025-07-08 22:29:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:29:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:29:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Finished server process [1864464] None
2025-07-08 22:29:17 - INFO - uvicorn.error - Started server process [1865269] None
2025-07-08 22:29:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:29:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:32:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Finished server process [1865269] None
2025-07-08 22:32:19 - INFO - uvicorn.error - Started server process [1871109] None
2025-07-08 22:32:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:32:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:32:38 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:32:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:32:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:32:39 - INFO - uvicorn.error - Finished server process [1871109] None
2025-07-08 22:32:41 - INFO - uvicorn.error - Started server process [1872755] None
2025-07-08 22:32:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:32:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:34:04 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Finished server process [1872755] None
2025-07-08 22:42:49 - INFO - uvicorn.error - Started server process [1908978] None
2025-07-08 22:42:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:42:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:46:49 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:46:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:46:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:46:50 - INFO - uvicorn.error - Finished server process [1908978] None
2025-07-08 22:46:52 - INFO - uvicorn.error - Started server process [1913196] None
2025-07-08 22:46:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:46:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:52:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:52:10 - INFO - app.routers.transactions - Транзакция с ID 199 успешно создана для workspace 78. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:53:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Finished server process [1913196] None
2025-07-08 22:53:38 - INFO - uvicorn.error - Started server process [1926170] None
2025-07-08 22:53:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:53:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:54:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:54:06 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 78: name 'user' is not defined (<class 'NameError'>, NameError("name 'user' is not defined"), <traceback object at 0x7c9b85ae0700>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 42, in create_transaction
    owner_id=user.id,
NameError: name 'user' is not defined
2025-07-08 22:55:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:55:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:55:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:55:41 - INFO - uvicorn.error - Finished server process [1926170] None
2025-07-08 22:55:44 - INFO - uvicorn.error - Started server process [1942032] None
2025-07-08 22:55:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:55:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:55:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:55:48 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'HTTPException' is not defined"), <traceback object at 0x77574bdb4d00>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    |     except HTTPException as http_exc:
    | NameError: name 'HTTPException' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    except HTTPException as http_exc:
NameError: name 'HTTPException' is not defined
2025-07-08 22:56:48 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:56:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:56:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:56:48 - INFO - uvicorn.error - Finished server process [1942032] None
2025-07-08 22:56:50 - INFO - uvicorn.error - Started server process [1942904] None
2025-07-08 22:56:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:56:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:56:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:56:59 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.PendingRollbackError'>, PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"\nDETAIL:  Failing row contains (201, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:56:59.269151, 2025-07-08 22:56:59.269151, 1312).\n\n[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]\n[parameters: {\'description\': None, \'amount\': Decimal(\'-10000\'), \'transaction_date\': datetime.date(2025, 7, 8), \'transaction_type\': \'EXPENSE\', \'from_account_id\': 168, \'to_account_id\': None, \'user_id\': 78, \'workspace_id\': 78, \'dds_article_id\': 1312}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'), <traceback object at 0x7be4c53b4500>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 48, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 105, in create_transaction
    current_workspace.id,
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 1670, in load_scalar_attributes
    result = load_on_ident(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2226, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2095, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"
DETAIL:  Failing row contains (201, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:56:59.269151, 2025-07-08 22:56:59.269151, 1312).

[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]
[parameters: {'description': None, 'amount': Decimal('-10000'), 'transaction_date': datetime.date(2025, 7, 8), 'transaction_type': 'EXPENSE', 'from_account_id': 168, 'to_account_id': None, 'user_id': 78, 'workspace_id': 78, 'dds_article_id': 1312}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-07-08 22:57:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:57:19 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:57:19 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:57:19 - INFO - uvicorn.error - Finished server process [1942904] None
2025-07-08 22:57:21 - INFO - uvicorn.error - Started server process [1945917] None
2025-07-08 22:57:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:57:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:57:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:57:24 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.PendingRollbackError'>, PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"\nDETAIL:  Failing row contains (202, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:57:24.817469, 2025-07-08 22:57:24.817469, 1312).\n\n[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]\n[parameters: {\'description\': None, \'amount\': Decimal(\'-10000\'), \'transaction_date\': datetime.date(2025, 7, 8), \'transaction_type\': \'EXPENSE\', \'from_account_id\': 168, \'to_account_id\': None, \'user_id\': 78, \'workspace_id\': 78, \'dds_article_id\': 1312}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'), <traceback object at 0x71ff14987600>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 105, in create_transaction
    current_workspace.id,
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 1670, in load_scalar_attributes
    result = load_on_ident(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2226, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2095, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"
DETAIL:  Failing row contains (202, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:57:24.817469, 2025-07-08 22:57:24.817469, 1312).

[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]
[parameters: {'description': None, 'amount': Decimal('-10000'), 'transaction_date': datetime.date(2025, 7, 8), 'transaction_type': 'EXPENSE', 'from_account_id': 168, 'to_account_id': None, 'user_id': 78, 'workspace_id': 78, 'dds_article_id': 1312}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-07-08 22:58:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:58:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:58:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:58:41 - INFO - uvicorn.error - Finished server process [1945917] None
2025-07-08 22:58:44 - INFO - uvicorn.error - Started server process [1956449] None
2025-07-08 22:58:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:58:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:59:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Finished server process [1956449] None
2025-07-08 22:59:21 - INFO - uvicorn.error - Started server process [1961224] None
2025-07-08 22:59:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:59:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:59:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:59:30 - INFO - app.routers.transactions - Транзакция с ID 203 успешно создана для workspace 78. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:03:43 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Finished server process [1961224] None
2025-07-08 23:03:45 - INFO - uvicorn.error - Started server process [1979802] None
2025-07-08 23:03:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:03:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:04:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Finished server process [1979802] None
2025-07-08 23:04:06 - INFO - uvicorn.error - Started server process [1981553] None
2025-07-08 23:04:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:04:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:04:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Finished server process [1981553] None
2025-07-08 23:04:16 - INFO - uvicorn.error - Started server process [1982597] None
2025-07-08 23:04:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:04:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Finished server process [1982597] None
2025-07-08 23:05:19 - INFO - uvicorn.error - Started server process [1988630] None
2025-07-08 23:05:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Finished server process [1988630] None
2025-07-08 23:05:36 - INFO - uvicorn.error - Started server process [1989329] None
2025-07-08 23:05:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Finished server process [1989329] None
2025-07-08 23:05:44 - INFO - uvicorn.error - Started server process [1989396] None
2025-07-08 23:05:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:06:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 23:06:06 - INFO - app.routers.transactions - Транзакция с ID 204 успешно создана для workspace 78. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:53:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Finished server process [1989396] None
2025-07-09 08:53:41 - INFO - uvicorn.error - Started server process [2058037] None
2025-07-09 08:53:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:53:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:53:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Finished server process [2058037] None
2025-07-09 08:53:59 - INFO - uvicorn.error - Started server process [2060276] None
2025-07-09 08:53:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:53:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:55:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Finished server process [2060276] None
2025-07-09 08:55:19 - INFO - uvicorn.error - Started server process [2075219] None
2025-07-09 08:55:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:55:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:55:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Finished server process [2075219] None
2025-07-09 08:55:27 - INFO - uvicorn.error - Started server process [2076815] None
2025-07-09 08:55:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:55:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:16:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Finished server process [2076815] None
2025-07-09 09:16:18 - INFO - uvicorn.error - Started server process [2129116] None
2025-07-09 09:16:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:16:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:16:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Finished server process [2129116] None
2025-07-09 09:16:57 - INFO - uvicorn.error - Started server process [2129573] None
2025-07-09 09:16:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:16:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:17:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Finished server process [2129573] None
2025-07-09 09:26:17 - INFO - uvicorn.error - Started server process [2197704] None
2025-07-09 09:26:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:26:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:27:27 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 79 пользователем admin1322222@admin.ru None
2025-07-09 09:27:27 - INFO - app.routers.transactions - Транзакция с ID 209 успешно создана для workspace 79. None
2025-07-09 09:34:00 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDPlannedPayment' object has no attribute 'get_multi_by_owner'"), <traceback object at 0x7d1f081e8d00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/planned_payments.py", line 47, in read_planned_payments
    return crud.planned_payment.get_multi_by_owner(db=db, owner_id=current_workspace.id)
AttributeError: 'CRUDPlannedPayment' object has no attribute 'get_multi_by_owner'
2025-07-09 09:34:24 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDPlannedPayment' object has no attribute 'create_with_owner'"), <traceback object at 0x7d1f08134440>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/planned_payments.py", line 28, in create_planned_payment
    return crud.planned_payment.create_with_owner(
AttributeError: 'CRUDPlannedPayment' object has no attribute 'create_with_owner'
2025-07-09 09:35:18 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:35:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:35:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:35:18 - INFO - uvicorn.error - Finished server process [2197704] None
2025-07-09 09:35:21 - INFO - uvicorn.error - Started server process [2309398] None
2025-07-09 09:35:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:35:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:36:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x7dc073f8ff80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 25, in generate_calendar
    current_balance = crud.account.get_total_balance_by_workspace(db, workspace_id=workspace_id)
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_account.py", line 71, in get_total_balance_by_workspace
    total = db.query(func.sum(self.model.balance)).filter(self.model.workspace_id == workspace_id).scalar()
NameError: name 'func' is not defined
2025-07-09 09:37:48 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:37:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:37:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:37:48 - INFO - uvicorn.error - Finished server process [2309398] None
2025-07-09 09:37:50 - INFO - uvicorn.error - Started server process [2311962] None
2025-07-09 09:37:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:37:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:48:14 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 79 пользователем admin1322222@admin.ru None
2025-07-09 09:48:14 - INFO - app.routers.transactions - Транзакция с ID 210 успешно создана для workspace 79. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:56:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Finished server process [2311962] None
2025-07-09 09:56:51 - INFO - uvicorn.error - Started server process [2476873] None
2025-07-09 09:56:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:56:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:10:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Finished server process [2476873] None
2025-07-09 10:10:53 - INFO - uvicorn.error - Started server process [2510333] None
2025-07-09 10:10:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:10:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:07 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Finished server process [2510333] None
2025-07-09 10:11:09 - INFO - uvicorn.error - Started server process [2510610] None
2025-07-09 10:11:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:31 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Finished server process [2510610] None
2025-07-09 10:11:33 - INFO - uvicorn.error - Started server process [2510823] None
2025-07-09 10:11:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Finished server process [2510823] None
2025-07-09 10:11:47 - INFO - uvicorn.error - Started server process [2511138] None
2025-07-09 10:11:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:12:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Finished server process [2511138] None
2025-07-09 10:12:14 - INFO - uvicorn.error - Started server process [2511431] None
2025-07-09 10:12:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:12:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Started server process [5103] None
2025-07-09 11:12:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:14:17 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9820>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9cd0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9d30>).'), <traceback object at 0x7d3b481f1380>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9820>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9cd0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9d30>).
2025-07-09 11:14:17 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f43d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4a00>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4c70>).'), <traceback object at 0x7d3b480631c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f43d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4a00>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4c70>).
2025-07-09 11:14:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438a90>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438d30>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438ca0>).'), <traceback object at 0x7d3b4849bec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438a90>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438d30>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438ca0>).
2025-07-09 11:14:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9910>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9b80>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b482422b0>).'), <traceback object at 0x7d3b4827e040>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9910>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9b80>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b482422b0>).
2025-07-09 11:15:58 - INFO - uvicorn.error - Shutting down None
2025-07-09 11:15:58 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 11:15:58 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 11:15:58 - INFO - uvicorn.error - Finished server process [5103] None
2025-07-09 11:16:06 - INFO - uvicorn.error - Started server process [29979] None
2025-07-09 11:16:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:16:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:16:06 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:16:27 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a670>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a700>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a7f0>).'), <traceback object at 0x7331f0754ec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a670>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a700>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a7f0>).
2025-07-09 11:16:27 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f07694f0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0769310>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7190>).'), <traceback object at 0x7331f05d8240>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f07694f0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0769310>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7190>).
2025-07-09 11:19:58 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d79d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7eb0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7400>).'), <traceback object at 0x7331f0750040>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    # Либо это не повторяющийся платеж внутри нашего окна
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d79d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7eb0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7400>).
2025-07-09 11:19:58 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753040>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753c70>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753be0>).'), <traceback object at 0x7331f05d6f40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    # Либо это не повторяющийся платеж внутри нашего окна
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753040>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753c70>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753be0>).
2025-07-09 11:20:13 - INFO - uvicorn.error - Shutting down None
2025-07-09 11:20:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 11:20:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 11:20:13 - INFO - uvicorn.error - Finished server process [29979] None
2025-07-09 11:20:23 - INFO - uvicorn.error - Started server process [64670] None
2025-07-09 11:20:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:20:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:20:23 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:33:02 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 80 пользователем true1853@yandex.ru None
2025-07-09 11:33:02 - INFO - app.routers.transactions - Транзакция с ID 215 успешно создана для workspace 80. None
2025-07-09 11:34:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 80 пользователем true1853@yandex.ru None
2025-07-09 11:34:17 - INFO - app.routers.transactions - Транзакция с ID 216 успешно создана для workspace 80. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Shutting down None
2025-07-09 13:52:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Finished server process [64670] None
2025-07-09 13:52:15 - INFO - uvicorn.error - Started server process [452524] None
2025-07-09 13:52:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 13:52:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 13:52:15 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 13:52:22 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c12292ddc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:53:56 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1228cb2c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:55:44 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1232e9e80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:57:34 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1228cd9c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:57:37 - INFO - uvicorn.error - Shutting down None
2025-07-09 13:57:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 13:57:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 13:57:37 - INFO - uvicorn.error - Finished server process [452524] None
2025-07-09 13:57:41 - INFO - uvicorn.error - Started server process [488280] None
2025-07-09 13:57:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 13:57:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 13:57:41 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 16:04:13 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 84 пользователем office@prismatica.agency None
2025-07-09 16:04:13 - INFO - app.routers.transactions - Транзакция с ID 233 успешно создана для workspace 84. None
2025-07-09 16:06:02 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 84 пользователем office@prismatica.agency None
2025-07-09 16:06:02 - INFO - app.routers.transactions - Транзакция с ID 234 успешно создана для workspace 84. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Shutting down None
2025-07-09 16:20:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Finished server process [488280] None
2025-07-09 17:02:11 - INFO - uvicorn.error - Started server process [1531962] None
2025-07-09 17:02:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 17:02:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 17:02:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit) None
