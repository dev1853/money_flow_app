2025-07-05 22:53:32 - INFO - uvicorn.error - Started server process [49869]
2025-07-05 22:53:32 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 22:53:32 - INFO - uvicorn.error - Application startup complete.
2025-07-05 22:53:32 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:04:54 - INFO - uvicorn.error - Shutting down
2025-07-05 23:04:54 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-05 23:04:54 - INFO - uvicorn.error - Application shutdown complete.
2025-07-05 23:04:54 - INFO - uvicorn.error - Finished server process [49869]
2025-07-05 23:04:57 - INFO - uvicorn.error - Started server process [58581]
2025-07-05 23:04:57 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 23:04:57 - INFO - uvicorn.error - Application startup complete.
2025-07-05 23:04:57 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:05:25 - INFO - uvicorn.error - Shutting down
2025-07-05 23:05:25 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-05 23:05:25 - INFO - uvicorn.error - Application shutdown complete.
2025-07-05 23:05:25 - INFO - uvicorn.error - Finished server process [58581]
2025-07-05 23:05:34 - INFO - uvicorn.error - Started server process [59183]
2025-07-05 23:05:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-05 23:05:34 - INFO - uvicorn.error - Application startup complete.
2025-07-05 23:05:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-05 23:07:44 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:44 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:07:51 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:51 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:07:59 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:07:59 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:08:14 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 0
2025-07-05 23:08:14 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-05 23:08:30 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Платежи' для workspace 43
2025-07-05 23:08:30 - ERROR - app.routers.dds_articles - Непредвиденная ошибка при создании статьи ДДС: (psycopg2.errors.ForeignKeyViolation) insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".

[SQL: INSERT INTO dds_articles (name, article_type, parent_id, is_active, workspace_id) VALUES (%(name)s, %(article_type)s, %(parent_id)s, %(is_active)s, %(workspace_id)s) RETURNING dds_articles.id, dds_articles.created_at, dds_articles.updated_at]
[parameters: {'name': 'Платежи', 'article_type': 'expense', 'parent_id': 0, 'is_active': True, 'workspace_id': 43}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/dds_articles.py", line 50, in create_dds_article
    article = dds_article_service.create_article(
  File "/home/true/Projects/money_flow_app/backend/app/services/dds_article_service.py", line 53, in create_article
    db_article = crud.dds_article.create_with_owner(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dds_article.py", line 76, in create_with_owner
    db.commit()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "dds_articles" violates foreign key constraint "fk_dds_articles_parent"
DETAIL:  Key (parent_id)=(0) is not present in table "dds_articles".

[SQL: INSERT INTO dds_articles (name, article_type, parent_id, is_active, workspace_id) VALUES (%(name)s, %(article_type)s, %(parent_id)s, %(is_active)s, %(workspace_id)s) RETURNING dds_articles.id, dds_articles.created_at, dds_articles.updated_at]
[parameters: {'name': 'Платежи', 'article_type': 'expense', 'parent_id': 0, 'is_active': True, 'workspace_id': 43}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-06 12:04:19 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж' для workspace 1
2025-07-06 12:04:19 - WARNING - app.routers.dds_articles - Ошибка доступа при создании статьи ДДС: Недостаточно прав для этого рабочего пространства.
2025-07-06 12:04:26 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж' для workspace 43
2025-07-06 12:04:26 - INFO - app.routers.dds_articles - Статья ДДС с ID 653 успешно создана.
2025-07-06 12:12:21 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров' для workspace 43
2025-07-06 12:12:22 - INFO - app.routers.dds_articles - Статья ДДС с ID 654 успешно создана.
2025-07-06 12:12:40 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров' для workspace 43
2025-07-06 12:12:40 - WARNING - app.routers.dds_articles - Попытка создания дубликата статьи ДДС: Статья с именем 'Выручка от продаж товаров' уже существует.
2025-07-06 12:12:58 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Выручка от продаж товаров 1 категории' для workspace 43
2025-07-06 12:12:58 - INFO - app.routers.dds_articles - Статья ДДС с ID 655 успешно создана.
2025-07-06 12:56:28 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'фыв' для workspace 43
2025-07-06 12:56:28 - INFO - app.routers.dds_articles - Статья ДДС с ID 656 успешно создана.
2025-07-06 12:56:37 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'пар' для workspace 43
2025-07-06 12:56:37 - INFO - app.routers.dds_articles - Статья ДДС с ID 657 успешно создана.
2025-07-06 13:03:02 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'пыва' для workspace 43
2025-07-06 13:03:02 - INFO - app.routers.dds_articles - Статья ДДС с ID 658 успешно создана.
2025-07-06 13:14:00 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'фыв' для workspace 43
2025-07-06 13:14:00 - WARNING - app.routers.dds_articles - Попытка создания дубликата статьи ДДС: Статья с именем 'фыв' уже существует.
2025-07-06 13:18:44 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'description' для workspace 43
2025-07-06 13:18:44 - INFO - app.routers.dds_articles - Статья ДДС с ID 659 успешно создана.
2025-07-06 16:59:35 - INFO - uvicorn.error - Started server process [6405]
2025-07-06 16:59:35 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 16:59:35 - INFO - uvicorn.error - Application startup complete.
2025-07-06 16:59:35 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:23:33 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:23:33 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:23:38 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:23:38 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:24:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:24:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:25:29 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:25:29 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:25 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:25 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:34 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:34 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:47 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:47 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:27:58 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:27:58 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    if workspace_id not in [ws.id for ws in current_user.workspaces]:
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:32:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:32:18 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:32:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:32:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:35:01 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:35:01 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:25 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:25 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:26 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:26 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:37:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:37:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:38:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:38:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    # 2. Проверяем права на счета и их существование
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:38:50 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:38:50 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.from_account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:42:43 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:42:43 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:42:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:42:48 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    if transaction_in.account_id:
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:44:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 49 пользователем admin1434311@admin.ru
2025-07-06 21:44:17 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 49: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 21:50:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:50:35 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:50:42 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:50:42 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:52:46 - INFO - uvicorn.error - Shutting down
2025-07-06 21:52:46 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 21:52:46 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 21:52:46 - INFO - uvicorn.error - Finished server process [6405]
2025-07-06 21:52:49 - INFO - uvicorn.error - Started server process [215243]
2025-07-06 21:52:49 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 21:52:49 - INFO - uvicorn.error - Application startup complete.
2025-07-06 21:52:49 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:52:56 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:52:56 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:54:50 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 50 пользователем admin114341@admin.ru
2025-07-06 21:54:50 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 50: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 21:55:04 - INFO - uvicorn.error - Shutting down
2025-07-06 21:55:04 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 21:55:04 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 21:55:04 - INFO - uvicorn.error - Finished server process [215243]
2025-07-06 21:55:08 - INFO - uvicorn.error - Started server process [217365]
2025-07-06 21:55:08 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 21:55:08 - INFO - uvicorn.error - Application startup complete.
2025-07-06 21:55:08 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 21:58:05 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 21:58:05 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:00:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:00:07 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:02:09 - INFO - uvicorn.error - Shutting down
2025-07-06 22:02:09 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:02:09 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:02:09 - INFO - uvicorn.error - Finished server process [217365]
2025-07-06 22:02:14 - INFO - uvicorn.error - Started server process [222782]
2025-07-06 22:02:14 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:02:14 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:02:14 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:02:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:02:24 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:02:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:02:59 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:03:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:03:17 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:04:55 - INFO - uvicorn.error - Shutting down
2025-07-06 22:04:55 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:04:55 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:04:55 - INFO - uvicorn.error - Finished server process [222782]
2025-07-06 22:04:58 - INFO - uvicorn.error - Started server process [225003]
2025-07-06 22:04:58 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:04:58 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:04:58 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:05:20 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:05:20 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:13:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:13:30 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:15:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:15:10 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:17:27 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:17:27 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 51: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 22:18:19 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:18:19 - INFO - app.routers.transactions - Транзакция с ID 72 успешно создана для workspace 51.
2025-07-06 22:20:32 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:20:32 - INFO - app.routers.transactions - Транзакция с ID 73 успешно создана для workspace 51.
2025-07-06 22:21:12 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 51 пользователем admin11asdas111@admin.ru
2025-07-06 22:21:12 - INFO - app.routers.transactions - Транзакция с ID 74 успешно создана для workspace 51.
2025-07-06 22:31:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:31:17 - INFO - app.routers.transactions - Транзакция с ID 79 успешно создана для workspace 52.
2025-07-06 22:32:28 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:32:28 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 78, in create_transaction
    db=db,
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:34:07 - INFO - uvicorn.error - Shutting down
2025-07-06 22:34:07 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 22:34:07 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 22:34:07 - INFO - uvicorn.error - Finished server process [225003]
2025-07-06 22:34:34 - INFO - uvicorn.error - Started server process [247184]
2025-07-06 22:34:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 22:34:34 - INFO - uvicorn.error - Application startup complete.
2025-07-06 22:34:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 22:34:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:34:35 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:34 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:34 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:40 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:40 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:45 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:45 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:45 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    try:
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:36:49 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:36:49 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:03 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:03 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:15 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:15 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:37:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:37:18 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 52: Для дохода должен быть указан счет-получатель.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 53, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-06 22:38:20 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:38:20 - INFO - app.routers.transactions - Транзакция с ID 80 успешно создана для workspace 52.
2025-07-06 22:38:35 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:38:35 - INFO - app.routers.transactions - Транзакция с ID 81 успешно создана для workspace 52.
2025-07-06 22:48:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:48:06 - INFO - app.routers.transactions - Транзакция с ID 82 успешно создана для workspace 52.
2025-07-06 22:54:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем admin13451@admin.ru
2025-07-06 22:54:24 - INFO - app.routers.transactions - Транзакция с ID 83 успешно создана для workspace 52.
2025-07-06 23:03:51 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 43 пользователем admin11555@admin.ru
2025-07-06 23:03:51 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 43: Для расхода должен быть указан счет-источник.
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-06 23:04:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 53 пользователем admin11323211@admin.ru
2025-07-06 23:04:44 - INFO - app.routers.transactions - Транзакция с ID 88 успешно создана для workspace 53.
2025-07-06 23:07:28 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 53 пользователем admin11323211@admin.ru
2025-07-06 23:07:28 - INFO - app.routers.transactions - Транзакция с ID 89 успешно создана для workspace 53.
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:26 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:27 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:19:27 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:33 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:19:33 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:20:58 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    owner_id=current_user.id,
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:20:58 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    start_date=start_date,
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:22:11 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.crud_dashboard.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_cashflow_trend_data'
2025-07-06 23:22:11 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.crud_dashboard.get_summary_data(
AttributeError: module 'app.crud.crud_dashboard' has no attribute 'get_summary_data'
2025-07-06 23:23:17 - INFO - uvicorn.error - Shutting down
2025-07-06 23:23:17 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:23:17 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:23:17 - INFO - uvicorn.error - Finished server process [247184]
2025-07-06 23:23:21 - INFO - uvicorn.error - Started server process [285059]
2025-07-06 23:23:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:23:21 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:23:21 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:23:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.created_by_user_id == owner_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:23:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.created_by_user_id == owner_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:25:03 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:25:03 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:26:42 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:26:42 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 31, in get_dashboard_summary
    owner_id=current_user.id,
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 21, in get_summary_data
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 54, in get_dashboard_cashflow_trend
    start_date=start_date,
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 118, in get_cashflow_trend_by_period
    models.Transaction.workspace_id == workspace_id,
AttributeError: type object 'Transaction' has no attribute 'created_by_user_id'
2025-07-06 23:27:30 - INFO - uvicorn.error - Shutting down
2025-07-06 23:27:31 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:27:31 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:27:31 - INFO - uvicorn.error - Finished server process [285059]
2025-07-06 23:27:33 - INFO - uvicorn.error - Started server process [288286]
2025-07-06 23:27:33 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:27:33 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:27:33 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:27:54 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 39, in get_summary_data
    summary_item = schemas.SummaryItem(
AttributeError: module 'app.schemas' has no attribute 'SummaryItem'
2025-07-06 23:27:54 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 50, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 139, in get_cashflow_trend_by_period
    trend_data.append(schemas.DashboardCashflowTrendData(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DashboardCashflowTrendData
income
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
expense
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-06 23:29:29 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 50, in get_dashboard_cashflow_trend
    return crud.dashboard_crud.get_cashflow_trend_by_period( # ИСПРАВЛЕНО: Изменено имя метода и используется экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 139, in get_cashflow_trend_by_period
    trend_data.append(schemas.DashboardCashflowTrendData(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DashboardCashflowTrendData
income
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
expense
  Field required [type=missing, input_value={'period': '2025-07-06', ...: Decimal('2949999.00')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-06 23:29:29 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_dashboard.py", line 39, in get_summary_data
    summary_item = schemas.SummaryItem(
AttributeError: module 'app.schemas' has no attribute 'SummaryItem'
2025-07-06 23:31:07 - INFO - uvicorn.error - Shutting down
2025-07-06 23:31:07 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:31:07 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:31:07 - INFO - uvicorn.error - Finished server process [288286]
2025-07-06 23:31:09 - INFO - uvicorn.error - Started server process [290830]
2025-07-06 23:31:09 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:31:09 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:31:09 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:38:37 - INFO - uvicorn.error - Shutting down
2025-07-06 23:38:37 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:38:37 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:38:37 - INFO - uvicorn.error - Finished server process [290830]
2025-07-06 23:38:50 - INFO - uvicorn.error - Started server process [296962]
2025-07-06 23:38:50 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:38:50 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:38:50 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:44:52 - INFO - uvicorn.error - Shutting down
2025-07-06 23:44:52 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:44:52 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:44:52 - INFO - uvicorn.error - Finished server process [296962]
2025-07-06 23:44:55 - INFO - uvicorn.error - Started server process [301508]
2025-07-06 23:44:55 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:44:55 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:44:55 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-06 23:56:43 - INFO - uvicorn.error - Shutting down
2025-07-06 23:56:44 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-06 23:56:44 - INFO - uvicorn.error - Application shutdown complete.
2025-07-06 23:56:44 - INFO - uvicorn.error - Finished server process [301508]
2025-07-06 23:56:46 - INFO - uvicorn.error - Started server process [310521]
2025-07-06 23:56:46 - INFO - uvicorn.error - Waiting for application startup.
2025-07-06 23:56:46 - INFO - uvicorn.error - Application startup complete.
2025-07-06 23:56:46 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:00:47 - INFO - uvicorn.error - Shutting down
2025-07-07 00:00:47 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:00:47 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:00:47 - INFO - uvicorn.error - Finished server process [310521]
2025-07-07 00:00:49 - INFO - uvicorn.error - Started server process [313784]
2025-07-07 00:00:49 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:00:49 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:00:49 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:00:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 71, in get_dds_report
    article_type=article.article_type.value,
AttributeError: 'str' object has no attribute 'value'
2025-07-07 00:02:32 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 71, in get_dds_report
    article_type=article.article_type, # ИСПРАВЛЕНО: Удалено .value
AttributeError: 'str' object has no attribute 'value'
2025-07-07 00:03:39 - INFO - uvicorn.error - Shutting down
2025-07-07 00:03:39 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:03:39 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:03:39 - INFO - uvicorn.error - Finished server process [313784]
2025-07-07 00:03:42 - INFO - uvicorn.error - Started server process [316091]
2025-07-07 00:03:42 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:03:42 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:03:42 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 00:03:44 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:37 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:37 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:04:38 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:05:01 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 28, in get_dds_report
    return crud.report_crud.get_dds_report(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_report.py", line 68, in get_dds_report
    schemas.DdsReportItem(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/pydantic/main.py", line 164, in __init__
    __pydantic_self__.__pydantic_validator__.validate_python(data, self_instance=__pydantic_self__)
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DdsReportItem
amount
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
percentage_of_total
  Field required [type=missing, input_value={'article_id': 853, 'arti...alance': Decimal('0.0')}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/missing
2025-07-07 00:05:02 - INFO - uvicorn.error - Shutting down
2025-07-07 00:05:03 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 00:05:03 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 00:05:03 - INFO - uvicorn.error - Finished server process [316091]
2025-07-07 00:12:38 - INFO - uvicorn.error - Started server process [322861]
2025-07-07 00:12:38 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 00:12:38 - INFO - uvicorn.error - Application startup complete.
2025-07-07 00:12:38 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 16:53:03 - INFO - uvicorn.error - Shutting down
2025-07-07 16:53:03 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 16:53:03 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 16:53:04 - INFO - uvicorn.error - Finished server process [322861]
2025-07-07 16:53:11 - INFO - uvicorn.error - Started server process [659845]
2025-07-07 16:53:11 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 16:53:11 - INFO - uvicorn.error - Application startup complete.
2025-07-07 16:53:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:17:34 - INFO - uvicorn.error - Shutting down
2025-07-07 20:17:34 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 20:17:34 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 20:17:34 - INFO - uvicorn.error - Finished server process [659845]
2025-07-07 20:17:44 - INFO - uvicorn.error - Started server process [1133002]
2025-07-07 20:17:44 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 20:17:44 - INFO - uvicorn.error - Application startup complete.
2025-07-07 20:17:44 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:22:19 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 63 пользователем admin13241555@admin.ru
2025-07-07 20:22:19 - INFO - app.routers.transactions - Транзакция с ID 130 успешно создана для workspace 63.
2025-07-07 20:52:10 - INFO - uvicorn.error - Shutting down
2025-07-07 20:52:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 20:52:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 20:52:10 - INFO - uvicorn.error - Finished server process [1133002]
2025-07-07 20:53:26 - INFO - uvicorn.error - Started server process [1289153]
2025-07-07 20:53:26 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 20:53:26 - INFO - uvicorn.error - Application startup complete.
2025-07-07 20:53:26 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 20:54:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 65 пользователем admin115333551@admin.ru
2025-07-07 20:54:10 - INFO - app.routers.transactions - Транзакция с ID 139 успешно создана для workspace 65.
2025-07-07 21:04:47 - INFO - uvicorn.error - Shutting down
2025-07-07 21:04:47 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 21:04:47 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 21:04:47 - INFO - uvicorn.error - Finished server process [1289153]
2025-07-07 21:06:33 - INFO - uvicorn.error - Started server process [1310756]
2025-07-07 21:06:34 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 21:06:34 - INFO - uvicorn.error - Application startup complete.
2025-07-07 21:06:34 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-07 21:06:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:06:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:22 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:22 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:14:23 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/reports.py", line 67, in get_profit_loss_report
    return crud.report_crud.get_profit_loss_report(
TypeError: get_profit_loss_report() got an unexpected keyword argument 'period_type'
2025-07-07 21:16:10 - INFO - uvicorn.error - Shutting down
2025-07-07 21:16:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-07 21:16:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-07 21:16:10 - INFO - uvicorn.error - Finished server process [1310756]
2025-07-07 21:16:21 - INFO - uvicorn.error - Started server process [1333126]
2025-07-07 21:16:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-07 21:16:21 - INFO - uvicorn.error - Application startup complete.
2025-07-07 21:16:21 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:35:11 - INFO - uvicorn.error - Started server process [7678]
2025-07-08 09:35:11 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:35:11 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:35:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:43:31 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:31 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:39 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:43:39 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:47:52 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:47:52 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:18 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:18 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    total_budgeted = Decimal('0.0')
NameError: name 'Decimal' is not defined
2025-07-08 09:48:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:48:50 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:07 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    """
NameError: name 'Decimal' is not defined
2025-07-08 09:49:07 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    """
NameError: name 'Decimal' is not defined
2025-07-08 09:49:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:25 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 48, in get_budget_status
    items_status: List[schemas.BudgetItemStatus] = []
NameError: name 'Decimal' is not defined
2025-07-08 09:49:41 - INFO - uvicorn.error - Shutting down
2025-07-08 09:49:41 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:49:41 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:49:41 - INFO - uvicorn.error - Finished server process [7678]
2025-07-08 09:49:47 - INFO - uvicorn.error - Started server process [154183]
2025-07-08 09:49:47 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:49:47 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:49:47 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:49:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 52, in get_budget_status
    for item in budget.items:
AttributeError: 'Budget' object has no attribute 'items'
2025-07-08 09:49:51 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 52, in get_budget_status
    for item in budget.items:
AttributeError: 'Budget' object has no attribute 'items'
2025-07-08 09:52:09 - INFO - uvicorn.error - Shutting down
2025-07-08 09:52:09 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:52:09 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:52:09 - INFO - uvicorn.error - Finished server process [154183]
2025-07-08 09:54:57 - INFO - uvicorn.error - Started server process [216939]
2025-07-08 09:54:57 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:54:57 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:54:57 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:55:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
AttributeError: module 'app.crud' has no attribute 'budget'
2025-07-08 09:55:24 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
AttributeError: module 'app.crud' has no attribute 'budget'
2025-07-08 09:56:37 - INFO - uvicorn.error - Shutting down
2025-07-08 09:56:37 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:56:37 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:56:37 - INFO - uvicorn.error - Finished server process [216939]
2025-07-08 09:56:41 - INFO - uvicorn.error - Started server process [234982]
2025-07-08 09:56:41 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:56:41 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:56:41 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:56:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:56:48 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:57:27 - INFO - uvicorn.error - Shutting down
2025-07-08 09:57:27 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:57:27 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:57:27 - INFO - uvicorn.error - Finished server process [234982]
2025-07-08 09:57:31 - INFO - uvicorn.error - Started server process [242866]
2025-07-08 09:57:31 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:57:31 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:57:31 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 09:57:34 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:57:34 - ERROR - uvicorn.error - Exception in ASGI application
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 63, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 50, in get_multi_by_workspace
    joinedload(models.Budget.items) # Загружаем статьи бюджета
AttributeError: type object 'Budget' has no attribute 'items'
2025-07-08 09:59:32 - INFO - uvicorn.error - Shutting down
2025-07-08 09:59:32 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 09:59:32 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 09:59:32 - INFO - uvicorn.error - Finished server process [242866]
2025-07-08 09:59:35 - INFO - uvicorn.error - Started server process [260033]
2025-07-08 09:59:35 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 09:59:35 - INFO - uvicorn.error - Application startup complete.
2025-07-08 09:59:35 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:02:10 - INFO - uvicorn.error - Shutting down
2025-07-08 10:02:10 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:02:10 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:02:10 - INFO - uvicorn.error - Finished server process [260033]
2025-07-08 10:02:13 - INFO - uvicorn.error - Started server process [274349]
2025-07-08 10:02:13 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:02:13 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:02:13 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:04:42 - INFO - uvicorn.error - Shutting down
2025-07-08 10:04:42 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:04:42 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:04:42 - INFO - uvicorn.error - Finished server process [274349]
2025-07-08 10:04:45 - INFO - uvicorn.error - Started server process [285103]
2025-07-08 10:04:45 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:04:45 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:04:45 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
2025-07-08 10:13:15 - INFO - uvicorn.error - Shutting down
2025-07-08 10:13:15 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:13:15 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:13:15 - INFO - uvicorn.error - Finished server process [285103]
2025-07-08 10:13:23 - INFO - uvicorn.error - Started server process [320640]
2025-07-08 10:13:23 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:13:23 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:13:33 - INFO - uvicorn.error - Shutting down
2025-07-08 10:13:33 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:13:33 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:13:33 - INFO - uvicorn.error - Finished server process [320640]
2025-07-08 10:14:23 - INFO - uvicorn.error - Started server process [321473]
2025-07-08 10:14:23 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:14:23 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:16:18 - INFO - uvicorn.error - Shutting down
2025-07-08 10:16:18 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:16:18 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:16:18 - INFO - uvicorn.error - Finished server process [321473]
2025-07-08 10:16:21 - INFO - uvicorn.error - Started server process [330380]
2025-07-08 10:16:21 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:16:21 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:20:05 - INFO - uvicorn.error - Started server process [341467]
2025-07-08 10:20:05 - INFO - uvicorn.error - Waiting for application startup.
2025-07-08 10:20:05 - INFO - uvicorn.error - Application startup complete.
2025-07-08 10:22:18 - INFO - uvicorn.error - Shutting down
2025-07-08 10:22:18 - INFO - uvicorn.error - Waiting for application shutdown.
2025-07-08 10:22:18 - INFO - uvicorn.error - Application shutdown complete.
2025-07-08 10:22:18 - INFO - uvicorn.error - Finished server process [341467]
2025-07-08 10:22:20 - INFO - uvicorn.error - Started server process [347018] None
2025-07-08 10:22:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:22:22 - INFO - uvicorn.error - Started server process [347251] None
2025-07-08 10:22:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:22:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:24:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:24:00 - INFO - uvicorn.error - Finished server process [347251] None
2025-07-08 10:24:02 - INFO - uvicorn.error - Started server process [359905] None
2025-07-08 10:24:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:24:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:29:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:29:59 - INFO - uvicorn.error - Finished server process [359905] None
2025-07-08 10:30:02 - INFO - uvicorn.error - Started server process [403802] None
2025-07-08 10:30:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:30:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:30:27 - INFO - uvicorn.error - Finished server process [403802] None
2025-07-08 10:30:29 - INFO - uvicorn.error - Started server process [409015] None
2025-07-08 10:30:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:30:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0188a9c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:28 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174ec00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f0174b600>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:31:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x751f01751200>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 81, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 75, in get_budget_status
    actual_amount = crud.transaction.get_actual_spending_for_budget_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_transaction.py", line 133, in get_actual_spending_for_budget_items
    query = db.query(func.sum(models.Transaction.amount)).filter(
NameError: name 'func' is not defined
2025-07-08 10:33:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:33:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:33:16 - INFO - uvicorn.error - Finished server process [409015] None
2025-07-08 10:33:18 - INFO - uvicorn.error - Started server process [446602] None
2025-07-08 10:33:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:33:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:33:56 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:56 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 69: Для расхода должен быть указан счет-источник. (<class 'ValueError'>, ValueError('Для расхода должен быть указан счет-источник.'), <traceback object at 0x772a76130f80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 51, in create_transaction
    raise ValueError("Для расхода должен быть указан счет-источник.")
ValueError: Для расхода должен быть указан счет-источник.
2025-07-08 10:33:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:33:59 - INFO - app.routers.transactions - Транзакция с ID 156 успешно создана для workspace 69. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:36:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:36:08 - INFO - uvicorn.error - Finished server process [446602] None
2025-07-08 10:36:10 - INFO - uvicorn.error - Started server process [463013] None
2025-07-08 10:36:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:36:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:36:10 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'IntegrityError' is not defined"), <traceback object at 0x71f746ffe540>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 79, in update_budget
    updated_budget = budget_service.update_budget_with_items(
AttributeError: 'BudgetService' object has no attribute 'update_budget_with_items'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 92, in update_budget
    except IntegrityError as e: # Перехватываем ошибки уникальности
NameError: name 'IntegrityError' is not defined
2025-07-08 10:37:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:37:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:37:33 - INFO - uvicorn.error - Finished server process [463013] None
2025-07-08 10:37:35 - INFO - uvicorn.error - Started server process [477562] None
2025-07-08 10:37:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:37:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:40:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:40:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:40:20 - INFO - uvicorn.error - Finished server process [477562] None
2025-07-08 10:40:22 - INFO - uvicorn.error - Started server process [497377] None
2025-07-08 10:40:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:40:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:44:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:44:09 - INFO - uvicorn.error - Finished server process [497377] None
2025-07-08 10:44:11 - INFO - uvicorn.error - Started server process [507849] None
2025-07-08 10:44:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:44:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:47:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:47:01 - INFO - uvicorn.error - Finished server process [507849] None
2025-07-08 10:48:15 - INFO - uvicorn.error - Started server process [531754] None
2025-07-08 10:48:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:48:17 - INFO - uvicorn.error - Started server process [532150] None
2025-07-08 10:48:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:48:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb9403400>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb909af80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb943c580>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:48:49 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeba6a60c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90cba00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:38 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb90c32c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb807abc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:52:46 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'sqlalchemy.exc.ProgrammingError'>, ProgrammingError('(psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date\nLINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...\n                                                      ^\n'), <traceback object at 0x7adeb8080080>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DatatypeMismatch: argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 82, in get_multi_by_workspace
    results = budgets_query.all()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) argument of AND must be type boolean, not type date
LINE 6: WHERE budgets.id = budget_items.budget_id AND budgets.start_...
                                                      ^

[SQL: SELECT budgets.id AS budgets_id, budgets.name AS budgets_name, budgets.start_date AS budgets_start_date, budgets.end_date AS budgets_end_date, budgets.owner_id AS budgets_owner_id, budgets.workspace_id AS budgets_workspace_id, budgets.created_at AS budgets_created_at, budgets.updated_at AS budgets_updated_at, sum(budget_items.budgeted_amount) AS total_budgeted_amount, coalesce(sum(anon_1.actual_amount_for_item), %(coalesce_1)s) AS total_actual_amount 
FROM budgets LEFT OUTER JOIN budget_items ON budgets.id = budget_items.budget_id LEFT OUTER JOIN (SELECT budget_items.budget_id AS subquery_budget_id, budget_items.dds_article_id AS subquery_article_id, coalesce(sum(CASE WHEN (transactions.transaction_type = %(transaction_type_1)s) THEN transactions.amount ELSE %(param_1)s END), %(coalesce_2)s) AS actual_amount_for_item 
FROM budget_items JOIN transactions ON budget_items.dds_article_id = transactions.dds_article_id 
WHERE transactions.workspace_id = %(workspace_id_1)s AND transactions.transaction_date >= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.start_date)) AND transactions.transaction_date <= (EXISTS (SELECT 1 
FROM budgets 
WHERE budgets.id = budget_items.budget_id AND budgets.end_date)) GROUP BY budget_items.budget_id, budget_items.dds_article_id) AS anon_1 ON budget_items.budget_id = anon_1.subquery_budget_id AND budget_items.dds_article_id = anon_1.subquery_article_id 
WHERE budgets.workspace_id = %(workspace_id_2)s GROUP BY budgets.id ORDER BY budgets.end_date DESC 
 LIMIT %(param_2)s OFFSET %(param_3)s]
[parameters: {'coalesce_1': Decimal('0.0'), 'transaction_type_1': 'EXPENSE', 'param_1': Decimal('0.0'), 'coalesce_2': Decimal('0.0'), 'workspace_id_1': 69, 'workspace_id_2': 69, 'param_2': 100, 'param_3': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-08 10:55:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:55:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:55:27 - INFO - uvicorn.error - Finished server process [532150] None
2025-07-08 10:55:29 - INFO - uvicorn.error - Started server process [585876] None
2025-07-08 10:55:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:55:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a8946800>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
2025-07-08 10:55:34 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'crud' is not defined"), <traceback object at 0x7056a87fc340>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 57, in read_budgets
    return crud.budget.get_multi_by_workspace(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 71, in get_multi_by_workspace
    total_actual_amount = crud.transaction.get_actual_spending_for_budget_items(
NameError: name 'crud' is not defined
2025-07-08 10:56:27 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:56:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:56:27 - INFO - uvicorn.error - Finished server process [585876] None
2025-07-08 10:56:29 - INFO - uvicorn.error - Started server process [592500] None
2025-07-08 10:56:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:56:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:58:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 69 пользователем test32225@test.com None
2025-07-08 10:58:48 - INFO - app.routers.transactions - Транзакция с ID 157 успешно создана для workspace 69. None
2025-07-08 10:59:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:10 - INFO - uvicorn.error - Finished server process [592500] None
2025-07-08 10:59:12 - INFO - uvicorn.error - Started server process [604811] None
2025-07-08 10:59:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:15 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:15 - INFO - uvicorn.error - Finished server process [604811] None
2025-07-08 10:59:17 - INFO - uvicorn.error - Started server process [604937] None
2025-07-08 10:59:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Shutting down None
2025-07-08 10:59:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 10:59:28 - INFO - uvicorn.error - Finished server process [604937] None
2025-07-08 10:59:43 - INFO - uvicorn.error - Started server process [608042] None
2025-07-08 10:59:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 10:59:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:03 - INFO - uvicorn.error - Finished server process [608042] None
2025-07-08 11:00:05 - INFO - uvicorn.error - Started server process [612385] None
2025-07-08 11:00:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:00:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:00:35 - INFO - uvicorn.error - Finished server process [612385] None
2025-07-08 11:00:37 - INFO - uvicorn.error - Started server process [618269] None
2025-07-08 11:00:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:00:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:09 - INFO - uvicorn.error - Finished server process [618269] None
2025-07-08 11:01:11 - INFO - uvicorn.error - Started server process [626334] None
2025-07-08 11:01:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:13 - INFO - uvicorn.error - Started server process [626690] None
2025-07-08 11:01:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:37 - INFO - uvicorn.error - Finished server process [626690] None
2025-07-08 11:01:39 - INFO - uvicorn.error - Started server process [633059] None
2025-07-08 11:01:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:01:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:01:44 - INFO - uvicorn.error - Finished server process [633059] None
2025-07-08 11:01:45 - INFO - uvicorn.error - Started server process [634322] None
2025-07-08 11:01:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:01:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:03 - INFO - uvicorn.error - Finished server process [634322] None
2025-07-08 11:02:05 - INFO - uvicorn.error - Started server process [638623] None
2025-07-08 11:02:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:02:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:02:08 - INFO - uvicorn.error - Finished server process [638623] None
2025-07-08 11:02:09 - INFO - uvicorn.error - Started server process [639741] None
2025-07-08 11:02:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:02:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:04:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 70 пользователем admin1333@admin.ru None
2025-07-08 11:04:07 - INFO - app.routers.transactions - Транзакция с ID 162 успешно создана для workspace 70. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:05:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:05:17 - INFO - uvicorn.error - Finished server process [639741] None
2025-07-08 11:05:19 - INFO - uvicorn.error - Started server process [673478] None
2025-07-08 11:05:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:05:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:08:20 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:08:21 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:08:21 - INFO - uvicorn.error - Finished server process [673478] None
2025-07-08 11:08:23 - INFO - uvicorn.error - Started server process [698168] None
2025-07-08 11:08:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:08:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:38 - INFO - uvicorn.error - Finished server process [698168] None
2025-07-08 11:10:41 - INFO - uvicorn.error - Started server process [715510] None
2025-07-08 11:10:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:10:48 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:10:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:10:49 - INFO - uvicorn.error - Finished server process [715510] None
2025-07-08 11:10:51 - INFO - uvicorn.error - Started server process [715680] None
2025-07-08 11:10:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:10:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Shutting down None
2025-07-08 11:24:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 11:24:54 - INFO - uvicorn.error - Finished server process [715680] None
2025-07-08 11:31:09 - INFO - uvicorn.error - Started server process [794440] None
2025-07-08 11:31:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 11:31:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:51:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:51:56 - INFO - uvicorn.error - Finished server process [794440] None
2025-07-08 17:52:00 - INFO - uvicorn.error - Started server process [1059515] None
2025-07-08 17:52:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:00 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:52:02 - INFO - uvicorn.error - Started server process [1059728] None
2025-07-08 17:52:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:52:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:52:05 - INFO - uvicorn.error - Finished server process [1059728] None
2025-07-08 17:52:07 - INFO - uvicorn.error - Started server process [1060404] None
2025-07-08 17:52:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:52:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:34 - INFO - uvicorn.error - Finished server process [1060404] None
2025-07-08 17:59:36 - INFO - uvicorn.error - Started server process [1073539] None
2025-07-08 17:59:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 17:59:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Shutting down None
2025-07-08 17:59:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 17:59:52 - INFO - uvicorn.error - Finished server process [1073539] None
2025-07-08 18:10:16 - INFO - uvicorn.error - Started server process [1104291] None
2025-07-08 18:10:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:10:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:18:05 - INFO - uvicorn.error - Started server process [1140780] None
2025-07-08 18:18:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:18:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:18:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:18:41 - INFO - uvicorn.error - Finished server process [1140780] None
2025-07-08 18:18:44 - INFO - uvicorn.error - Started server process [1147111] None
2025-07-08 18:18:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:18:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:20:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:20:13 - INFO - uvicorn.error - Finished server process [1147111] None
2025-07-08 18:20:15 - INFO - uvicorn.error - Started server process [1159517] None
2025-07-08 18:20:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:20:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:20:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:20:25 - INFO - uvicorn.error - Finished server process [1159517] None
2025-07-08 18:33:27 - INFO - uvicorn.error - Started server process [1168606] None
2025-07-08 18:33:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:33:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:36:18 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x78a3000cf840>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 45, in log_exceptions_middleware
    |     logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
    | NameError: name 'logger' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 45, in log_exceptions_middleware
    logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
NameError: name 'logger' is not defined
2025-07-08 18:39:18 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:18 - INFO - uvicorn.error - Finished server process [1168606] None
2025-07-08 18:39:20 - INFO - uvicorn.error - Started server process [1180933] None
2025-07-08 18:39:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:21 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x725cd98d9580>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    |     logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
    | NameError: name 'logger' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    logger.exception("!!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!!") # Добавил маркер для легкого поиска
NameError: name 'logger' is not defined
2025-07-08 18:39:39 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:39 - INFO - uvicorn.error - Finished server process [1180933] None
2025-07-08 18:39:41 - INFO - uvicorn.error - Started server process [1181117] None
2025-07-08 18:39:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:39:46 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:39:46 - INFO - uvicorn.error - Finished server process [1181117] None
2025-07-08 18:39:47 - INFO - uvicorn.error - Started server process [1181176] None
2025-07-08 18:39:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:39:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:39:48 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x7df156faaf40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 46, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 117, in update_budget
    logger.exception("Произошла непредвиденная ошибка при обновлении бюджета ID: %s", budget_id)
NameError: name 'logger' is not defined
2025-07-08 18:39:48 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'JSONResponse' is not defined"), <traceback object at 0x7df156f05800>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_exceptions_middleware
    |     return JSONResponse(
    | NameError: name 'JSONResponse' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_exceptions_middleware
    return JSONResponse(
NameError: name 'JSONResponse' is not defined
2025-07-08 18:40:05 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:40:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:40:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:40:05 - INFO - uvicorn.error - Finished server process [1181176] None
2025-07-08 18:40:07 - INFO - uvicorn.error - Started server process [1181352] None
2025-07-08 18:40:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:40:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:40:07 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'NameError'>, NameError("name 'logger' is not defined"), <traceback object at 0x709d03194d00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 117, in update_budget
    logger.exception("Произошла непредвиденная ошибка при обновлении бюджета ID: %s", budget_id)
NameError: name 'logger' is not defined
2025-07-08 18:40:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:40:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:40:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:40:51 - INFO - uvicorn.error - Finished server process [1181352] None
2025-07-08 18:40:53 - INFO - uvicorn.error - Started server process [1182073] None
2025-07-08 18:40:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:40:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:41:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:41:00 - INFO - uvicorn.error - Finished server process [1182073] None
2025-07-08 18:41:02 - INFO - uvicorn.error - Started server process [1182749] None
2025-07-08 18:41:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:41:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:41:04 - ERROR - app.routers.budgets - Произошла непредвиденная ошибка при обновлении бюджета ID: 26 (<class 'AttributeError'>, AttributeError("module 'app.crud' has no attribute 'budget_item'"), <traceback object at 0x748c5a38ce80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 82, in update_budget
    updated_budget = budget_service.update_budget_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 84, in update_budget_with_items
    crud.budget_item.remove(db, id=item_id)
AttributeError: module 'app.crud' has no attribute 'budget_item'
2025-07-08 18:42:26 - INFO - uvicorn.error - Shutting down None
2025-07-08 18:42:26 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 18:42:26 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 18:42:26 - INFO - uvicorn.error - Finished server process [1182749] None
2025-07-08 18:56:38 - INFO - uvicorn.error - Started server process [1270831] None
2025-07-08 18:56:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 18:56:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 18:56:41 - INFO - app.services.budget_service - Deleted budget item 30 for budget 26. None
2025-07-08 18:56:41 - INFO - app.services.budget_service - Added new budget item for budget 26. None
2025-07-08 18:56:51 - INFO - app.services.budget_service - Deleted budget item 31 for budget 26. None
2025-07-08 18:56:51 - INFO - app.services.budget_service - Added new budget item for budget 26. None
2025-07-08 20:00:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 74 пользователем test332325@test.com None
2025-07-08 20:00:17 - INFO - app.routers.transactions - Транзакция с ID 179 успешно создана для workspace 74. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:00:53 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:00:53 - INFO - uvicorn.error - Finished server process [1270831] None
2025-07-08 20:04:24 - INFO - uvicorn.error - Started server process [1561013] None
2025-07-08 20:04:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:04:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:14:19 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:14:19 - INFO - uvicorn.error - Finished server process [1561013] None
2025-07-08 20:15:30 - INFO - uvicorn.error - Started server process [1613452] None
2025-07-08 20:15:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:15:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:25:24 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:25:24 - INFO - uvicorn.error - Finished server process [1613452] None
2025-07-08 20:25:26 - INFO - uvicorn.error - Started server process [1622028] None
2025-07-08 20:25:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:25:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:25:49 - INFO - app.services.budget_service - Deleted budget item 34 for budget 28. None
2025-07-08 20:25:49 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:25:53 - INFO - app.services.budget_service - Deleted budget item 35 for budget 28. None
2025-07-08 20:25:53 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:25:58 - INFO - app.services.budget_service - Deleted budget item 36 for budget 28. None
2025-07-08 20:25:59 - INFO - app.services.budget_service - Added new budget item for budget 28. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:29:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:29:51 - INFO - uvicorn.error - Finished server process [1622028] None
2025-07-08 20:30:38 - INFO - uvicorn.error - Started server process [1630149] None
2025-07-08 20:30:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:30:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:30:39 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x714448211c40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:39 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x71444821aa00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x714446661280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:30:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7144465e9a00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:09 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:09 - INFO - uvicorn.error - Finished server process [1630149] None
2025-07-08 20:32:11 - INFO - uvicorn.error - Started server process [1635060] None
2025-07-08 20:32:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:30 - INFO - uvicorn.error - Finished server process [1635060] None
2025-07-08 20:32:32 - INFO - uvicorn.error - Started server process [1635466] None
2025-07-08 20:32:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7bd5566bfec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:43 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7bd555e15bc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:51 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:32:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:32:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:32:51 - INFO - uvicorn.error - Finished server process [1635466] None
2025-07-08 20:32:53 - INFO - uvicorn.error - Started server process [1637468] None
2025-07-08 20:32:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:55 - INFO - uvicorn.error - Started server process [1637611] None
2025-07-08 20:32:55 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:32:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:32:56 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7619deb79700>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 144, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:32:56 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7619df404e80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 144, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:33:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:33:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:33:03 - INFO - uvicorn.error - Finished server process [1637611] None
2025-07-08 20:33:04 - INFO - uvicorn.error - Started server process [1638872] None
2025-07-08 20:33:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:33:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:33:09 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b467d7c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:09 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b472f340>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:17 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b44ac500>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:33:17 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x7ee2b4474380>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:35:54 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:35:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:35:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:35:54 - INFO - uvicorn.error - Finished server process [1638872] None
2025-07-08 20:35:56 - INFO - uvicorn.error - Started server process [1646433] None
2025-07-08 20:35:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:35:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:38:07 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:38:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:38:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:38:08 - INFO - uvicorn.error - Finished server process [1646433] None
2025-07-08 20:38:09 - INFO - uvicorn.error - Started server process [1658816] None
2025-07-08 20:38:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:38:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:38:37 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x712ab0325800>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:38:37 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'BudgetService' object has no attribute 'get_budget_status'"), <traceback object at 0x712ab026a280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
AttributeError: 'BudgetService' object has no attribute 'get_budget_status'
2025-07-08 20:39:28 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:39:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:39:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:39:28 - INFO - uvicorn.error - Finished server process [1658816] None
2025-07-08 20:39:30 - INFO - uvicorn.error - Started server process [1665045] None
2025-07-08 20:39:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:39:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:39:35 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x78d631c34100>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 24, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:39:35 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x78d632f43280>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 24, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:39:39 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:39:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:39:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:39:39 - INFO - uvicorn.error - Finished server process [1665045] None
2025-07-08 20:39:41 - INFO - uvicorn.error - Started server process [1665674] None
2025-07-08 20:39:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:39:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:40:40 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:40:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:40:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:40:41 - INFO - uvicorn.error - Finished server process [1665674] None
2025-07-08 20:40:42 - INFO - uvicorn.error - Started server process [1672005] None
2025-07-08 20:40:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:40:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:40:47 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x7f7ce5a05b80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 110, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:40:47 - ERROR - app.main - !!! ПОЙМАНА НЕОБРАБОТАННАЯ ОШИБКА !!! (<class 'AttributeError'>, AttributeError("'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'"), <traceback object at 0x7f7ce7566980>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/budgets.py", line 143, in get_budget_status
    return budget_service.get_budget_status(db=db, budget=budget)
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 110, in get_budget_status
    actuals_map = crud.transaction.get_actual_spending_by_article(
AttributeError: 'CRUDTransaction' object has no attribute 'get_actual_spending_by_article'
2025-07-08 20:42:29 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:42:29 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:42:29 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:42:29 - INFO - uvicorn.error - Finished server process [1672005] None
2025-07-08 20:42:31 - INFO - uvicorn.error - Started server process [1678988] None
2025-07-08 20:42:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:42:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 20:43:09 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Покупка авто' для workspace 76 None
2025-07-08 20:43:09 - INFO - app.routers.dds_articles - Статья ДДС с ID 1287 успешно создана. None
2025-07-08 20:43:47 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 76 пользователем admin98989@admin.ru None
2025-07-08 20:43:48 - INFO - app.routers.transactions - Транзакция с ID 188 успешно создана для workspace 76. None
2025-07-08 20:43:57 - INFO - app.services.budget_service - Удалена статья бюджета 38 для бюджета 29. None
2025-07-08 20:43:57 - INFO - app.services.budget_service - Добавлена новая статья для бюджета 29. None
2025-07-08 20:44:09 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 76 пользователем admin98989@admin.ru None
2025-07-08 20:44:09 - INFO - app.routers.transactions - Транзакция с ID 189 успешно создана для workspace 76. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Shutting down None
2025-07-08 20:45:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 20:45:44 - INFO - uvicorn.error - Finished server process [1678988] None
2025-07-08 20:45:47 - INFO - uvicorn.error - Started server process [1693444] None
2025-07-08 20:45:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 20:45:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:08:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:08:49 - INFO - uvicorn.error - Finished server process [1693444] None
2025-07-08 22:08:51 - INFO - uvicorn.error - Started server process [1750016] None
2025-07-08 22:08:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:08:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:09:41 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 77 пользователем admin3335556@admin.ru None
2025-07-08 22:09:41 - INFO - app.routers.transactions - Транзакция с ID 194 успешно создана для workspace 77. None
2025-07-08 22:19:01 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x7acaee6dc400>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:20:11 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:20:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:20:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:20:11 - INFO - uvicorn.error - Finished server process [1750016] None
2025-07-08 22:20:14 - INFO - uvicorn.error - Started server process [1800811] None
2025-07-08 22:20:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:20:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:20:22 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x784b59f99d40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:21:25 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:21:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:21:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:21:25 - INFO - uvicorn.error - Finished server process [1800811] None
2025-07-08 22:21:28 - INFO - uvicorn.error - Started server process [1812080] None
2025-07-08 22:21:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:29 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:21:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:21:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:21:30 - INFO - uvicorn.error - Finished server process [1812080] None
2025-07-08 22:21:33 - INFO - uvicorn.error - Started server process [1812667] None
2025-07-08 22:21:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:39 - INFO - uvicorn.error - Started server process [1813519] None
2025-07-08 22:21:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:21:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:21:42 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x7ce910b3fe40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:23:00 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:23:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:23:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:23:00 - INFO - uvicorn.error - Finished server process [1813519] None
2025-07-08 22:23:02 - INFO - uvicorn.error - Started server process [1825404] None
2025-07-08 22:23:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:23:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:23:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:23:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:23:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:23:34 - INFO - uvicorn.error - Finished server process [1825404] None
2025-07-08 22:23:37 - INFO - uvicorn.error - Started server process [1830306] None
2025-07-08 22:23:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:23:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:23:42 - WARNING - app.services.budget_service - Конфликт при создании бюджета (дубликат). (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"\nDETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.\n'), <traceback object at 0x701e716bd480>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/services/budget_service.py", line 33, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_budget.py", line 20, in create_with_items
    db.flush()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "_budget_name_workspace_period_uc"
DETAIL:  Key (name, workspace_id, start_date, end_date)=(Июль 2025, 77, 2025-07-01, 2025-07-31) already exists.

[SQL: INSERT INTO budgets (name, start_date, end_date, owner_id, workspace_id) VALUES (%(name)s, %(start_date)s, %(end_date)s, %(owner_id)s, %(workspace_id)s) RETURNING budgets.id, budgets.created_at, budgets.updated_at]
[parameters: {'name': 'Июль 2025', 'start_date': datetime.date(2025, 7, 1), 'end_date': datetime.date(2025, 7, 31), 'owner_id': 77, 'workspace_id': 77}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 22:25:10 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:25:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:25:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:25:10 - INFO - uvicorn.error - Finished server process [1830306] None
2025-07-08 22:29:08 - INFO - uvicorn.error - Started server process [1864464] None
2025-07-08 22:29:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:29:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:29:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:29:12 - INFO - uvicorn.error - Finished server process [1864464] None
2025-07-08 22:29:17 - INFO - uvicorn.error - Started server process [1865269] None
2025-07-08 22:29:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:29:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:32:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:32:17 - INFO - uvicorn.error - Finished server process [1865269] None
2025-07-08 22:32:19 - INFO - uvicorn.error - Started server process [1871109] None
2025-07-08 22:32:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:32:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:32:38 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:32:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:32:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:32:39 - INFO - uvicorn.error - Finished server process [1871109] None
2025-07-08 22:32:41 - INFO - uvicorn.error - Started server process [1872755] None
2025-07-08 22:32:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:32:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:34:04 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:34:04 - INFO - uvicorn.error - Finished server process [1872755] None
2025-07-08 22:42:49 - INFO - uvicorn.error - Started server process [1908978] None
2025-07-08 22:42:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:42:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:46:49 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:46:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:46:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:46:50 - INFO - uvicorn.error - Finished server process [1908978] None
2025-07-08 22:46:52 - INFO - uvicorn.error - Started server process [1913196] None
2025-07-08 22:46:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:46:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:52:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:52:10 - INFO - app.routers.transactions - Транзакция с ID 199 успешно создана для workspace 78. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:53:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:53:35 - INFO - uvicorn.error - Finished server process [1913196] None
2025-07-08 22:53:38 - INFO - uvicorn.error - Started server process [1926170] None
2025-07-08 22:53:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:53:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:54:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:54:06 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 78: name 'user' is not defined (<class 'NameError'>, NameError("name 'user' is not defined"), <traceback object at 0x7c9b85ae0700>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 77, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/home/true/Projects/money_flow_app/backend/app/services/transaction_service.py", line 42, in create_transaction
    owner_id=user.id,
NameError: name 'user' is not defined
2025-07-08 22:55:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:55:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:55:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:55:41 - INFO - uvicorn.error - Finished server process [1926170] None
2025-07-08 22:55:44 - INFO - uvicorn.error - Started server process [1942032] None
2025-07-08 22:55:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:55:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:55:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:55:48 - ERROR - uvicorn.error - Exception in ASGI application
 (<class 'NameError'>, NameError("name 'HTTPException' is not defined"), <traceback object at 0x77574bdb4d00>)
  + Exception Group Traceback (most recent call last):
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    |     return await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    |     except HTTPException as http_exc:
    | NameError: name 'HTTPException' is not defined
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py", line 396, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 148, in simple_response
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 193, in __call__
    response_sent.set()
  File "/usr/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_utils.py", line 93, in collapse_excgroups
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    except HTTPException as http_exc:
NameError: name 'HTTPException' is not defined
2025-07-08 22:56:48 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:56:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:56:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:56:48 - INFO - uvicorn.error - Finished server process [1942032] None
2025-07-08 22:56:50 - INFO - uvicorn.error - Started server process [1942904] None
2025-07-08 22:56:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:56:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:56:59 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:56:59 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.PendingRollbackError'>, PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"\nDETAIL:  Failing row contains (201, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:56:59.269151, 2025-07-08 22:56:59.269151, 1312).\n\n[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]\n[parameters: {\'description\': None, \'amount\': Decimal(\'-10000\'), \'transaction_date\': datetime.date(2025, 7, 8), \'transaction_type\': \'EXPENSE\', \'from_account_id\': 168, \'to_account_id\': None, \'user_id\': 78, \'workspace_id\': 78, \'dds_article_id\': 1312}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'), <traceback object at 0x7be4c53b4500>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 48, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 105, in create_transaction
    current_workspace.id,
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 1670, in load_scalar_attributes
    result = load_on_ident(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2226, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2095, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"
DETAIL:  Failing row contains (201, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:56:59.269151, 2025-07-08 22:56:59.269151, 1312).

[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]
[parameters: {'description': None, 'amount': Decimal('-10000'), 'transaction_date': datetime.date(2025, 7, 8), 'transaction_type': 'EXPENSE', 'from_account_id': 168, 'to_account_id': None, 'user_id': 78, 'workspace_id': 78, 'dds_article_id': 1312}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-07-08 22:57:19 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:57:19 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:57:19 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:57:19 - INFO - uvicorn.error - Finished server process [1942904] None
2025-07-08 22:57:21 - INFO - uvicorn.error - Started server process [1945917] None
2025-07-08 22:57:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:57:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:57:24 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:57:24 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.PendingRollbackError'>, PendingRollbackError('This Session\'s transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"\nDETAIL:  Failing row contains (202, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:57:24.817469, 2025-07-08 22:57:24.817469, 1312).\n\n[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]\n[parameters: {\'description\': None, \'amount\': Decimal(\'-10000\'), \'transaction_date\': datetime.date(2025, 7, 8), \'transaction_type\': \'EXPENSE\', \'from_account_id\': 168, \'to_account_id\': None, \'user_id\': 78, \'workspace_id\': 78, \'dds_article_id\': 1312}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'), <traceback object at 0x71ff14987600>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 47, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/transactions.py", line 105, in create_transaction
    current_workspace.id,
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/attributes.py", line 1116, in _fire_loader_callables
    return state._load_expired(state, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 796, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 1670, in load_scalar_attributes
    result = load_on_ident(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 509, in load_on_ident
    return load_on_pk_identity(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2226, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2095, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
  File "<string>", line 2, in _connection_for_bind
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 103, in _go
    self._raise_for_prerequisite_state(fn.__name__, current_state)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 973, in _raise_for_prerequisite_state
    raise sa_exc.PendingRollbackError(
sqlalchemy.exc.PendingRollbackError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.CheckViolation) new row for relation "transactions" violates check constraint "check_transaction_amount_positive"
DETAIL:  Failing row contains (202, null, -10000.00, 2025-07-08, EXPENSE, 168, null, 78, 78, 2025-07-08 22:57:24.817469, 2025-07-08 22:57:24.817469, 1312).

[SQL: INSERT INTO transactions (description, amount, transaction_date, transaction_type, from_account_id, to_account_id, user_id, workspace_id, dds_article_id) VALUES (%(description)s, %(amount)s, %(transaction_date)s, %(transaction_type)s, %(from_account_id)s, %(to_account_id)s, %(user_id)s, %(workspace_id)s, %(dds_article_id)s) RETURNING transactions.id, transactions.created_at, transactions.updated_at]
[parameters: {'description': None, 'amount': Decimal('-10000'), 'transaction_date': datetime.date(2025, 7, 8), 'transaction_type': 'EXPENSE', 'from_account_id': 168, 'to_account_id': None, 'user_id': 78, 'workspace_id': 78, 'dds_article_id': 1312}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-07-08 22:58:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:58:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:58:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:58:41 - INFO - uvicorn.error - Finished server process [1945917] None
2025-07-08 22:58:44 - INFO - uvicorn.error - Started server process [1956449] None
2025-07-08 22:58:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:58:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Shutting down None
2025-07-08 22:59:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 22:59:18 - INFO - uvicorn.error - Finished server process [1956449] None
2025-07-08 22:59:21 - INFO - uvicorn.error - Started server process [1961224] None
2025-07-08 22:59:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 22:59:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 22:59:30 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 22:59:30 - INFO - app.routers.transactions - Транзакция с ID 203 успешно создана для workspace 78. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:03:43 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:03:43 - INFO - uvicorn.error - Finished server process [1961224] None
2025-07-08 23:03:45 - INFO - uvicorn.error - Started server process [1979802] None
2025-07-08 23:03:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:03:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:04:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:04:03 - INFO - uvicorn.error - Finished server process [1979802] None
2025-07-08 23:04:06 - INFO - uvicorn.error - Started server process [1981553] None
2025-07-08 23:04:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:04:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:04:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:04:13 - INFO - uvicorn.error - Finished server process [1981553] None
2025-07-08 23:04:16 - INFO - uvicorn.error - Started server process [1982597] None
2025-07-08 23:04:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:04:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:17 - INFO - uvicorn.error - Finished server process [1982597] None
2025-07-08 23:05:19 - INFO - uvicorn.error - Started server process [1988630] None
2025-07-08 23:05:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:33 - INFO - uvicorn.error - Finished server process [1988630] None
2025-07-08 23:05:36 - INFO - uvicorn.error - Started server process [1989329] None
2025-07-08 23:05:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Shutting down None
2025-07-08 23:05:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-08 23:05:41 - INFO - uvicorn.error - Finished server process [1989329] None
2025-07-08 23:05:44 - INFO - uvicorn.error - Started server process [1989396] None
2025-07-08 23:05:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-08 23:05:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-08 23:06:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 78 пользователем admin3111133@admin.ru None
2025-07-08 23:06:06 - INFO - app.routers.transactions - Транзакция с ID 204 успешно создана для workspace 78. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:53:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:53:37 - INFO - uvicorn.error - Finished server process [1989396] None
2025-07-09 08:53:41 - INFO - uvicorn.error - Started server process [2058037] None
2025-07-09 08:53:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:53:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:53:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:53:56 - INFO - uvicorn.error - Finished server process [2058037] None
2025-07-09 08:53:59 - INFO - uvicorn.error - Started server process [2060276] None
2025-07-09 08:53:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:53:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:55:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:55:16 - INFO - uvicorn.error - Finished server process [2060276] None
2025-07-09 08:55:19 - INFO - uvicorn.error - Started server process [2075219] None
2025-07-09 08:55:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:55:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Shutting down None
2025-07-09 08:55:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 08:55:25 - INFO - uvicorn.error - Finished server process [2075219] None
2025-07-09 08:55:27 - INFO - uvicorn.error - Started server process [2076815] None
2025-07-09 08:55:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 08:55:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:16:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:16:14 - INFO - uvicorn.error - Finished server process [2076815] None
2025-07-09 09:16:18 - INFO - uvicorn.error - Started server process [2129116] None
2025-07-09 09:16:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:16:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:16:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:16:54 - INFO - uvicorn.error - Finished server process [2129116] None
2025-07-09 09:16:57 - INFO - uvicorn.error - Started server process [2129573] None
2025-07-09 09:16:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:16:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:17:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:17:16 - INFO - uvicorn.error - Finished server process [2129573] None
2025-07-09 09:26:17 - INFO - uvicorn.error - Started server process [2197704] None
2025-07-09 09:26:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:26:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:27:27 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 79 пользователем admin1322222@admin.ru None
2025-07-09 09:27:27 - INFO - app.routers.transactions - Транзакция с ID 209 успешно создана для workspace 79. None
2025-07-09 09:34:00 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDPlannedPayment' object has no attribute 'get_multi_by_owner'"), <traceback object at 0x7d1f081e8d00>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/planned_payments.py", line 47, in read_planned_payments
    return crud.planned_payment.get_multi_by_owner(db=db, owner_id=current_workspace.id)
AttributeError: 'CRUDPlannedPayment' object has no attribute 'get_multi_by_owner'
2025-07-09 09:34:24 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDPlannedPayment' object has no attribute 'create_with_owner'"), <traceback object at 0x7d1f08134440>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/planned_payments.py", line 28, in create_planned_payment
    return crud.planned_payment.create_with_owner(
AttributeError: 'CRUDPlannedPayment' object has no attribute 'create_with_owner'
2025-07-09 09:35:18 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:35:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:35:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:35:18 - INFO - uvicorn.error - Finished server process [2197704] None
2025-07-09 09:35:21 - INFO - uvicorn.error - Started server process [2309398] None
2025-07-09 09:35:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:35:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:36:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'NameError'>, NameError("name 'func' is not defined"), <traceback object at 0x7dc073f8ff80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 25, in generate_calendar
    current_balance = crud.account.get_total_balance_by_workspace(db, workspace_id=workspace_id)
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_account.py", line 71, in get_total_balance_by_workspace
    total = db.query(func.sum(self.model.balance)).filter(self.model.workspace_id == workspace_id).scalar()
NameError: name 'func' is not defined
2025-07-09 09:37:48 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:37:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:37:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:37:48 - INFO - uvicorn.error - Finished server process [2309398] None
2025-07-09 09:37:50 - INFO - uvicorn.error - Started server process [2311962] None
2025-07-09 09:37:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:37:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 09:48:14 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 79 пользователем admin1322222@admin.ru None
2025-07-09 09:48:14 - INFO - app.routers.transactions - Транзакция с ID 210 успешно создана для workspace 79. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Shutting down None
2025-07-09 09:56:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 09:56:38 - INFO - uvicorn.error - Finished server process [2311962] None
2025-07-09 09:56:51 - INFO - uvicorn.error - Started server process [2476873] None
2025-07-09 09:56:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 09:56:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:10:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:10:51 - INFO - uvicorn.error - Finished server process [2476873] None
2025-07-09 10:10:53 - INFO - uvicorn.error - Started server process [2510333] None
2025-07-09 10:10:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:10:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:07 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:07 - INFO - uvicorn.error - Finished server process [2510333] None
2025-07-09 10:11:09 - INFO - uvicorn.error - Started server process [2510610] None
2025-07-09 10:11:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:31 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:31 - INFO - uvicorn.error - Finished server process [2510610] None
2025-07-09 10:11:33 - INFO - uvicorn.error - Started server process [2510823] None
2025-07-09 10:11:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:11:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:11:45 - INFO - uvicorn.error - Finished server process [2510823] None
2025-07-09 10:11:47 - INFO - uvicorn.error - Started server process [2511138] None
2025-07-09 10:11:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:11:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Shutting down None
2025-07-09 10:12:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 10:12:12 - INFO - uvicorn.error - Finished server process [2511138] None
2025-07-09 10:12:14 - INFO - uvicorn.error - Started server process [2511431] None
2025-07-09 10:12:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 10:12:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Started server process [5103] None
2025-07-09 11:12:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:12:05 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:14:17 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9820>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9cd0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9d30>).'), <traceback object at 0x7d3b481f1380>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9820>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9cd0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481e9d30>).
2025-07-09 11:14:17 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f43d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4a00>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4c70>).'), <traceback object at 0x7d3b480631c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f43d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4a00>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481f4c70>).
2025-07-09 11:14:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438a90>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438d30>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438ca0>).'), <traceback object at 0x7d3b4849bec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438a90>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438d30>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b48438ca0>).
2025-07-09 11:14:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9910>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9b80>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b482422b0>).'), <traceback object at 0x7d3b4827e040>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9910>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b481d9b80>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7d3b482422b0>).
2025-07-09 11:15:58 - INFO - uvicorn.error - Shutting down None
2025-07-09 11:15:58 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 11:15:58 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 11:15:58 - INFO - uvicorn.error - Finished server process [5103] None
2025-07-09 11:16:06 - INFO - uvicorn.error - Started server process [29979] None
2025-07-09 11:16:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:16:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:16:06 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:16:27 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a670>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a700>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a7f0>).'), <traceback object at 0x7331f0754ec0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a670>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a700>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f075a7f0>).
2025-07-09 11:16:27 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f07694f0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0769310>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7190>).'), <traceback object at 0x7331f05d8240>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    or_(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f07694f0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0769310>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7190>).
2025-07-09 11:19:58 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d79d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7eb0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7400>).'), <traceback object at 0x7331f0750040>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    # Либо это не повторяющийся платеж внутри нашего окна
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d79d0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7eb0>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f05d7400>).
2025-07-09 11:19:58 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.ArgumentError'>, ArgumentError('SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753040>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753c70>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753be0>).'), <traceback object at 0x7331f05d6f40>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/home/true/Projects/money_flow_app/backend/app/routers/payment_calendar.py", line 26, in get_payment_calendar
    return payment_calendar_service.generate_calendar(
  File "/home/true/Projects/money_flow_app/backend/app/services/payment_calendar_service.py", line 26, in generate_calendar
    planned_payments = crud.planned_payment.get_multi_by_workspace_and_period(
  File "/home/true/Projects/money_flow_app/backend/app/crud/crud_planned_payment.py", line 47, in get_multi_by_workspace_and_period
    # Либо это не повторяющийся платеж внутри нашего окна
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/_elements_constructors.py", line 1488, in or_
    return BooleanClauseList.or_(*clauses)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3165, in or_
    return cls._construct(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3063, in _construct
    [
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 3064, in <listcomp>
    coercions.expect(roles.WhereHavingRole, clause)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 396, in expect
    resolved = impl._literal_coercion(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 634, in _literal_coercion
    self._raise_for_expected(element, argname)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/sqlalchemy/sql/coercions.py", line 518, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
sqlalchemy.exc.ArgumentError: SQL expression for WHERE/HAVING role expected, got (<sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753040>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753c70>, <sqlalchemy.sql.elements.BinaryExpression object at 0x7331f0753be0>).
2025-07-09 11:20:13 - INFO - uvicorn.error - Shutting down None
2025-07-09 11:20:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 11:20:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 11:20:13 - INFO - uvicorn.error - Finished server process [29979] None
2025-07-09 11:20:23 - INFO - uvicorn.error - Started server process [64670] None
2025-07-09 11:20:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 11:20:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 11:20:23 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 11:33:02 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 80 пользователем true1853@yandex.ru None
2025-07-09 11:33:02 - INFO - app.routers.transactions - Транзакция с ID 215 успешно создана для workspace 80. None
2025-07-09 11:34:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 80 пользователем true1853@yandex.ru None
2025-07-09 11:34:17 - INFO - app.routers.transactions - Транзакция с ID 216 успешно создана для workspace 80. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Shutting down None
2025-07-09 13:52:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 13:52:11 - INFO - uvicorn.error - Finished server process [64670] None
2025-07-09 13:52:15 - INFO - uvicorn.error - Started server process [452524] None
2025-07-09 13:52:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 13:52:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 13:52:15 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 13:52:22 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c12292ddc0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:53:56 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1228cb2c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:55:44 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1232e9e80>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:57:34 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x73c1228cd9c0>)
Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/true/Projects/money_flow_app/backend/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/home/true/Projects/money_flow_app/backend/venv/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}

2025-07-09 13:57:37 - INFO - uvicorn.error - Shutting down None
2025-07-09 13:57:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 13:57:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 13:57:37 - INFO - uvicorn.error - Finished server process [452524] None
2025-07-09 13:57:41 - INFO - uvicorn.error - Started server process [488280] None
2025-07-09 13:57:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 13:57:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 13:57:41 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit) None
2025-07-09 16:04:13 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 84 пользователем office@prismatica.agency None
2025-07-09 16:04:13 - INFO - app.routers.transactions - Транзакция с ID 233 успешно создана для workspace 84. None
2025-07-09 16:06:02 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 84 пользователем office@prismatica.agency None
2025-07-09 16:06:02 - INFO - app.routers.transactions - Транзакция с ID 234 успешно создана для workspace 84. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Shutting down None
2025-07-09 16:20:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 16:20:49 - INFO - uvicorn.error - Finished server process [488280] None
2025-07-09 17:02:11 - INFO - uvicorn.error - Started server process [1531962] None
2025-07-09 17:02:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 17:02:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 17:02:11 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit) None
2025-07-09 19:21:22 - INFO - uvicorn.error - Shutting down None
2025-07-09 19:21:22 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 19:21:22 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 19:21:22 - INFO - uvicorn.error - Finished server process [1531962] None
2025-07-09 19:22:17 - INFO - uvicorn.error - Started server process [1847641] None
2025-07-09 19:22:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 19:22:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 19:22:17 - INFO - uvicorn.error - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit) None
2025-07-09 20:08:35 - INFO - uvicorn.error - Shutting down None
2025-07-09 20:08:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 20:08:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 20:08:35 - INFO - uvicorn.error - Finished server process [1847641] None
2025-07-09 18:54:16 - INFO - uvicorn.error - Started server process [10] None
2025-07-09 18:54:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-09 18:54:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-09 19:02:22 - INFO - uvicorn.error - Shutting down None
2025-07-09 19:02:22 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-09 19:02:22 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-09 19:02:22 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 10:47:32 - INFO - uvicorn.error - Started server process [14] None
2025-07-10 10:47:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 10:47:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 10:48:38 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 10:48:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 10:48:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 10:57:52 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 10:57:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 10:57:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 10:59:08 - INFO - uvicorn.error - Shutting down None
2025-07-10 10:59:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 10:59:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 10:59:08 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 10:59:11 - INFO - uvicorn.error - Started server process [16] None
2025-07-10 10:59:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 10:59:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:01:12 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:01:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:01:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:01:12 - INFO - uvicorn.error - Finished server process [16] None
2025-07-10 11:01:16 - INFO - uvicorn.error - Started server process [20] None
2025-07-10 11:01:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:01:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:02:24 - INFO - uvicorn.error - Started server process [9] None
2025-07-10 11:02:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:02:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:04:28 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:04:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:04:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:04:28 - INFO - uvicorn.error - Finished server process [9] None
2025-07-10 11:04:32 - INFO - uvicorn.error - Started server process [15] None
2025-07-10 11:04:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:04:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:05:05 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:05:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:05:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:05:05 - INFO - uvicorn.error - Finished server process [15] None
2025-07-10 11:05:08 - INFO - uvicorn.error - Started server process [20] None
2025-07-10 11:05:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:05:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:06:24 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 11:06:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:06:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:09:25 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:09:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:09:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:09:25 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 11:09:28 - INFO - uvicorn.error - Started server process [17] None
2025-07-10 11:09:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:09:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:09:34 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:09:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:09:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:09:34 - INFO - uvicorn.error - Finished server process [17] None
2025-07-10 11:09:37 - INFO - uvicorn.error - Started server process [21] None
2025-07-10 11:09:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:09:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:09:51 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x723e2e28e580>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'missing', 'loc': ('response', 'items'), 'msg': 'Field required', 'input': {'transactions': [], 'total_count': 0}}
  {'type': 'missing', 'loc': ('response', 'total'), 'msg': 'Field required', 'input': {'transactions': [], 'total_count': 0}}

2025-07-10 11:10:15 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x723e2d9b1880>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'missing', 'loc': ('response', 'items'), 'msg': 'Field required', 'input': {'transactions': [], 'total_count': 0}}
  {'type': 'missing', 'loc': ('response', 'total'), 'msg': 'Field required', 'input': {'transactions': [], 'total_count': 0}}

2025-07-10 11:11:42 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:11:42 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:11:42 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:11:42 - INFO - uvicorn.error - Finished server process [21] None
2025-07-10 11:11:46 - INFO - uvicorn.error - Started server process [30] None
2025-07-10 11:11:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:11:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:16:32 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:16:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:16:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:16:32 - INFO - uvicorn.error - Finished server process [30] None
2025-07-10 11:16:36 - INFO - uvicorn.error - Started server process [37] None
2025-07-10 11:16:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:16:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:16:38 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:16:38 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:16:38 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:16:38 - INFO - uvicorn.error - Finished server process [37] None
2025-07-10 11:16:41 - INFO - uvicorn.error - Started server process [41] None
2025-07-10 11:16:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:16:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:18:15 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 11:18:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:18:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:23:02 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:23:02 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:23:02 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:23:02 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 11:23:05 - INFO - uvicorn.error - Started server process [17] None
2025-07-10 11:23:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:23:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:28:34 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:28:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:28:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:28:34 - INFO - uvicorn.error - Finished server process [17] None
2025-07-10 11:28:37 - INFO - uvicorn.error - Started server process [22] None
2025-07-10 11:28:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:28:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:36:12 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:36:12 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:36:12 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:36:12 - INFO - uvicorn.error - Finished server process [22] None
2025-07-10 11:36:15 - INFO - uvicorn.error - Started server process [27] None
2025-07-10 11:36:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:36:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:41:34 - INFO - uvicorn.error - Started server process [9] None
2025-07-10 11:41:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:41:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:43:47 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:43:47 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:43:47 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:43:47 - INFO - uvicorn.error - Finished server process [9] None
2025-07-10 11:43:50 - INFO - uvicorn.error - Started server process [16] None
2025-07-10 11:43:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:43:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:43:59 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x794c60109840>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 8 validation errors:
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 0, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x794c60074fa0>}
  {'type': 'recursion_loop', 'loc': ('response', 0, 'transactions', 0, 'workspace'), 'msg': 'Recursion error - cyclic reference detected', 'input': <app.models.workspace.Workspace object at 0x794c601f8b20>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 1, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x794c60074fd0>}
  {'type': 'recursion_loop', 'loc': ('response', 0, 'transactions', 1, 'workspace'), 'msg': 'Recursion error - cyclic reference detected', 'input': <app.models.workspace.Workspace object at 0x794c601f8b20>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 2, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x794c6008d070>}
  {'type': 'recursion_loop', 'loc': ('response', 0, 'transactions', 2, 'workspace'), 'msg': 'Recursion error - cyclic reference detected', 'input': <app.models.workspace.Workspace object at 0x794c601f8b20>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 3, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x794c6008d0a0>}
  {'type': 'recursion_loop', 'loc': ('response', 0, 'transactions', 3, 'workspace'), 'msg': 'Recursion error - cyclic reference detected', 'input': <app.models.workspace.Workspace object at 0x794c601f8b20>}

2025-07-10 11:50:33 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 11:50:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:50:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:51:01 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x7434ed719f40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 0, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7434ed634640>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 1, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7434ed6346a0>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 2, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7434ed6346d0>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 3, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7434ed634700>}

2025-07-10 11:51:47 - INFO - uvicorn.error - Started server process [9] None
2025-07-10 11:51:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:51:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 11:51:59 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'fastapi.exceptions.ResponseValidationError'>, ResponseValidationError(), <traceback object at 0x7534fb444600>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 296, in app
    content = await serialize_response(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 0, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7534fb3d9820>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 1, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7534fb3d9880>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 2, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7534fb3d98b0>}
  {'type': 'missing', 'loc': ('response', 0, 'transactions', 3, 'type'), 'msg': 'Field required', 'input': <app.models.transaction.Transaction object at 0x7534fb3d98e0>}

2025-07-10 11:56:31 - INFO - uvicorn.error - Shutting down None
2025-07-10 11:56:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 11:56:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 11:56:32 - INFO - uvicorn.error - Finished server process [9] None
2025-07-10 11:56:34 - INFO - uvicorn.error - Started server process [15] None
2025-07-10 11:56:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 11:56:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:00:43 - INFO - uvicorn.error - Shutting down None
2025-07-10 12:00:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 12:00:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 12:00:44 - INFO - uvicorn.error - Finished server process [15] None
2025-07-10 12:00:46 - INFO - uvicorn.error - Started server process [20] None
2025-07-10 12:00:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:00:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:00:49 - INFO - uvicorn.error - Started server process [24] None
2025-07-10 12:00:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:00:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:19:57 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 12:19:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:19:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:29:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 12:29:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:29:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:51:41 - INFO - uvicorn.error - Shutting down None
2025-07-10 12:51:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 12:51:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 12:51:41 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 12:51:45 - INFO - uvicorn.error - Started server process [18] None
2025-07-10 12:51:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:51:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 12:55:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 12:55:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 12:55:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:11:58 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:11:58 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("app.schemas.transaction.TransactionCreate() got multiple values for keyword argument 'user_id'"), <traceback object at 0x74fa76a3ae40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/transactions.py", line 78, in create_transaction
    full_transaction_in = schemas.TransactionCreate(
TypeError: app.schemas.transaction.TransactionCreate() got multiple values for keyword argument 'user_id'
2025-07-10 13:13:46 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:13:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("app.schemas.transaction.TransactionCreate() got multiple values for keyword argument 'user_id'"), <traceback object at 0x74fa76a37a80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 49, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/transactions.py", line 78, in create_transaction
    full_transaction_in = schemas.TransactionCreate(
TypeError: app.schemas.transaction.TransactionCreate() got multiple values for keyword argument 'user_id'
2025-07-10 13:15:44 - INFO - uvicorn.error - Shutting down None
2025-07-10 13:15:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 13:15:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 13:15:44 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 13:15:47 - INFO - uvicorn.error - Started server process [17] None
2025-07-10 13:15:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 13:15:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:16:05 - INFO - uvicorn.error - Shutting down None
2025-07-10 13:16:05 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 13:16:05 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 13:16:05 - INFO - uvicorn.error - Finished server process [17] None
2025-07-10 13:16:08 - INFO - uvicorn.error - Started server process [21] None
2025-07-10 13:16:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 13:16:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:16:12 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:16:12 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 1: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7aa9b97d03c0>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 87, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 54, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-10 13:16:47 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:16:47 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 1: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7aa9b97befc0>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 87, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 54, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-10 13:19:57 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 13:19:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 13:19:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:21:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:21:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 1: unsupported operand type(s) for -=: 'decimal.Decimal' and 'float' (<class 'TypeError'>, TypeError("unsupported operand type(s) for -=: 'decimal.Decimal' and 'float'"), <traceback object at 0x7d9395ef6600>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 87, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 62, in create_transaction
    from_account.balance -= amount
TypeError: unsupported operand type(s) for -=: 'decimal.Decimal' and 'float'
2025-07-10 13:24:40 - INFO - uvicorn.error - Shutting down None
2025-07-10 13:24:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 13:24:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 13:24:40 - INFO - uvicorn.error - Finished server process [10] None
2025-07-10 13:24:44 - INFO - uvicorn.error - Started server process [18] None
2025-07-10 13:24:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 13:24:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:25:40 - INFO - uvicorn.error - Started server process [10] None
2025-07-10 13:25:40 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 13:25:40 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 13:25:42 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-10 13:25:42 - INFO - app.routers.transactions - Транзакция с ID 5 успешно создана для workspace 1. None
2025-07-10 17:57:54 - INFO - uvicorn.error - Started server process [17] None
2025-07-10 17:57:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 17:57:54 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 17:57:56 - INFO - uvicorn.error - Started server process [21] None
2025-07-10 17:57:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 17:57:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 18:06:14 - INFO - uvicorn.error - Shutting down None
2025-07-10 18:06:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 18:06:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 18:06:14 - INFO - uvicorn.error - Finished server process [21] None
2025-07-10 18:06:18 - INFO - uvicorn.error - Started server process [28] None
2025-07-10 18:06:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 18:06:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 18:06:20 - INFO - uvicorn.error - Started server process [32] None
2025-07-10 18:06:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 18:06:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-10 18:07:20 - INFO - uvicorn.error - Shutting down None
2025-07-10 18:07:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-10 18:07:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-10 18:07:20 - INFO - uvicorn.error - Finished server process [32] None
2025-07-10 18:11:17 - INFO - uvicorn.error - Started server process [72] None
2025-07-10 18:11:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-10 18:11:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 08:17:18 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 08:17:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 08:17:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 08:21:56 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 08:21:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 08:21:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 08:25:31 - INFO - uvicorn.error - Started server process [11] None
2025-07-11 08:25:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 08:25:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 08:46:27 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 08:46:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 08:46:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:03:46 - INFO - uvicorn.error - Started server process [9] None
2025-07-11 09:03:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:03:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:05:55 - INFO - uvicorn.error - Shutting down None
2025-07-11 09:05:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-11 09:05:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-11 09:05:56 - INFO - uvicorn.error - Finished server process [9] None
2025-07-11 09:05:58 - INFO - uvicorn.error - Started server process [17] None
2025-07-11 09:05:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:05:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:06:01 - INFO - uvicorn.error - Started server process [21] None
2025-07-11 09:06:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:06:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:06:41 - INFO - uvicorn.error - Shutting down None
2025-07-11 09:06:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-11 09:06:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-11 09:06:41 - INFO - uvicorn.error - Finished server process [21] None
2025-07-11 09:09:35 - INFO - uvicorn.error - Started server process [20] None
2025-07-11 09:09:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:09:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:43:05 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 09:43:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:43:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:49:16 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 09:49:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:49:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 09:57:14 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 09:57:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 09:57:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:00:33 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:00:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:00:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:01:42 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDCounterparty' object has no attribute 'create_with_owner'"), <traceback object at 0x7fa3fe1662c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
AttributeError: 'CRUDCounterparty' object has no attribute 'create_with_owner'
2025-07-11 10:01:43 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDCounterparty' object has no attribute 'create_with_owner'"), <traceback object at 0x7fa3fe163800>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
AttributeError: 'CRUDCounterparty' object has no attribute 'create_with_owner'
2025-07-11 10:01:46 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'CRUDCounterparty' object has no attribute 'create_with_owner'"), <traceback object at 0x7fa3fe0b5d00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
AttributeError: 'CRUDCounterparty' object has no attribute 'create_with_owner'
2025-07-11 10:05:27 - INFO - uvicorn.error - Shutting down None
2025-07-11 10:05:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-11 10:05:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-11 10:05:27 - INFO - uvicorn.error - Finished server process [10] None
2025-07-11 10:05:31 - INFO - uvicorn.error - Started server process [17] None
2025-07-11 10:05:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:05:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:16:11 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:16:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:16:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:20:49 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80161a4300>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:50 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8016103840>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:50 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8015838fc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:50 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157c0e00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:50 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8016103280>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:50 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157c9b80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:51 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157c94c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:51 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8016103280>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:51 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157d0040>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:51 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8015838440>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d801583d4c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157d5700>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d801583dc00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157cd780>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157e51c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157e5180>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157cd600>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157eea40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157ea480>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157d5d00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:53 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157f7b80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157c09c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157eac40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157fca00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157ee780>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157eabc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:54 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8015789600>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d8015788500>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d801577fe80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157979c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d801578f680>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d80157eeac0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:20:55 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x7d801579c780>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:21:41 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:21:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:21:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:22:03 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("'owner_id' is an invalid keyword argument for Counterparty"), <traceback object at 0x776df59f2500>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 23, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 33, in create_with_owner
    db_obj = self.model(**obj_in.model_dump(), owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'owner_id' is an invalid keyword argument for Counterparty
2025-07-11 10:22:54 - INFO - uvicorn.error - Shutting down None
2025-07-11 10:22:55 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-11 10:22:55 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-11 10:22:55 - INFO - uvicorn.error - Finished server process [10] None
2025-07-11 10:22:58 - INFO - uvicorn.error - Started server process [17] None
2025-07-11 10:22:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:22:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:23:11 - INFO - uvicorn.error - Shutting down None
2025-07-11 10:23:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-11 10:23:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-11 10:23:11 - INFO - uvicorn.error - Finished server process [17] None
2025-07-11 10:23:15 - INFO - uvicorn.error - Started server process [21] None
2025-07-11 10:23:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:23:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:23:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:23:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:23:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:26:51 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:26:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:26:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:37:24 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:37:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:37:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:56:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:56:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:56:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 10:59:35 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 10:59:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 10:59:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 11:04:07 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 11:04:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 11:04:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 11:09:10 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 11:09:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 11:09:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 11:24:04 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 11:24:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 11:24:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 11:26:16 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 11:26:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 11:26:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-11 11:28:19 - INFO - uvicorn.error - Started server process [10] None
2025-07-11 11:28:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-11 11:28:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 08:23:22 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 08:23:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 08:23:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 08:40:16 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 08:40:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 08:40:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 08:51:41 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 08:51:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 08:51:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 09:01:33 - INFO - uvicorn.error - Started server process [9] None
2025-07-12 09:01:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 09:01:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:09:10 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 17:09:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:09:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:16:52 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 17:16:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:16:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:32:29 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 17:32:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:32:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:39:23 - INFO - uvicorn.error - Shutting down None
2025-07-12 17:39:23 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 17:39:23 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 17:39:23 - INFO - uvicorn.error - Finished server process [10] None
2025-07-12 17:39:27 - INFO - uvicorn.error - Started server process [17] None
2025-07-12 17:39:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:39:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:39:39 - INFO - uvicorn.error - Shutting down None
2025-07-12 17:39:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 17:39:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 17:39:39 - INFO - uvicorn.error - Finished server process [17] None
2025-07-12 17:39:43 - INFO - uvicorn.error - Started server process [21] None
2025-07-12 17:39:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:39:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:39:57 - INFO - uvicorn.error - Shutting down None
2025-07-12 17:39:57 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 17:39:57 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 17:39:57 - INFO - uvicorn.error - Finished server process [21] None
2025-07-12 17:40:01 - INFO - uvicorn.error - Started server process [25] None
2025-07-12 17:40:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:40:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:40:10 - INFO - uvicorn.error - Shutting down None
2025-07-12 17:40:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 17:40:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 17:40:11 - INFO - uvicorn.error - Finished server process [25] None
2025-07-12 17:45:22 - INFO - uvicorn.error - Started server process [13] None
2025-07-12 17:45:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:45:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:46:03 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 17:46:03 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:46:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 17:57:18 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 17:57:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 17:57:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 18:03:33 - INFO - uvicorn.error - Shutting down None
2025-07-12 18:03:33 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 18:03:33 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 18:03:33 - INFO - uvicorn.error - Finished server process [10] None
2025-07-12 18:03:37 - INFO - uvicorn.error - Started server process [15] None
2025-07-12 18:03:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 18:03:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 18:04:48 - INFO - uvicorn.error - Shutting down None
2025-07-12 18:04:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 18:04:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 18:04:48 - INFO - uvicorn.error - Finished server process [15] None
2025-07-12 18:07:25 - INFO - uvicorn.error - Started server process [13] None
2025-07-12 18:07:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 18:07:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 18:08:05 - INFO - uvicorn.error - Started server process [9] None
2025-07-12 18:08:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 18:08:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:09:57 - INFO - uvicorn.error - Shutting down None
2025-07-12 21:09:57 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 21:09:57 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 21:09:57 - INFO - uvicorn.error - Finished server process [9] None
2025-07-12 21:21:19 - INFO - uvicorn.error - Started server process [14] None
2025-07-12 21:21:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:21:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:21:49 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:21:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:21:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:28:36 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:28:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:28:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:31:59 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:31:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:31:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:37:01 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:37:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:37:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:45:23 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:45:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:45:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:45:53 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-12 21:45:53 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 1: app.models.transaction.Transaction() got multiple values for keyword argument 'user_id' (<class 'TypeError'>, TypeError("app.models.transaction.Transaction() got multiple values for keyword argument 'user_id'"), <traceback object at 0x739d451eaa40>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 87, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 83, in create_transaction
    db_transaction = crud.transaction.create_with_owner(
  File "/app/app/crud/crud_transaction.py", line 95, in create_with_owner
    db_obj = self.model(
TypeError: app.models.transaction.Transaction() got multiple values for keyword argument 'user_id'
2025-07-12 21:48:13 - INFO - uvicorn.error - Shutting down None
2025-07-12 21:48:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 21:48:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 21:48:13 - INFO - uvicorn.error - Finished server process [10] None
2025-07-12 21:48:16 - INFO - uvicorn.error - Started server process [18] None
2025-07-12 21:48:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:48:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:48:32 - INFO - uvicorn.error - Shutting down None
2025-07-12 21:48:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-12 21:48:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-12 21:48:32 - INFO - uvicorn.error - Finished server process [18] None
2025-07-12 21:48:35 - INFO - uvicorn.error - Started server process [22] None
2025-07-12 21:48:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:48:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:48:38 - INFO - uvicorn.error - Started server process [26] None
2025-07-12 21:48:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:48:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:49:13 - INFO - uvicorn.error - Started server process [10] None
2025-07-12 21:49:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-12 21:49:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-12 21:49:49 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-12 21:49:49 - INFO - app.routers.transactions - Транзакция с ID 5 успешно создана для workspace 1. None
2025-07-12 21:50:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-12 21:50:06 - INFO - app.routers.transactions - Транзакция с ID 6 успешно создана для workspace 1. None
2025-07-13 05:45:06 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 05:45:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:45:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:49:03 - INFO - uvicorn.error - Shutting down None
2025-07-13 05:49:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 05:49:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 05:49:03 - INFO - uvicorn.error - Finished server process [10] None
2025-07-13 05:49:06 - INFO - uvicorn.error - Started server process [18] None
2025-07-13 05:49:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:49:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:49:34 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 05:49:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:49:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:49:50 - ERROR - app.services.transaction_service - Ошибка при удалении транзакции ID 6: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g) (<class 'sqlalchemy.exc.NotSupportedError'>, NotSupportedError('(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n'), <traceback object at 0x7b61fce30ec0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.FeatureNotSupported: FOR UPDATE cannot be applied to the nullable side of an outer join


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/services/transaction_service.py", line 160, in delete_transaction
    crud.account.update_balance(db, account_id=transaction_to_delete.from_account_id, amount_change=amount) # Возвращаем сумму на счет-источник
  File "/app/app/crud/crud_account.py", line 53, in update_balance
    account = db.query(models.Account).filter_by(id=account_id).with_for_update().one()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.NotSupportedError: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g)
2025-07-13 05:49:50 - ERROR - app.services.transaction_service - Ошибка при удалении транзакции ID 6: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g) (<class 'sqlalchemy.exc.NotSupportedError'>, NotSupportedError('(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n'), <traceback object at 0x7b61fc5c0c80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.FeatureNotSupported: FOR UPDATE cannot be applied to the nullable side of an outer join


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/services/transaction_service.py", line 160, in delete_transaction
    crud.account.update_balance(db, account_id=transaction_to_delete.from_account_id, amount_change=amount) # Возвращаем сумму на счет-источник
  File "/app/app/crud/crud_account.py", line 53, in update_balance
    account = db.query(models.Account).filter_by(id=account_id).with_for_update().one()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.NotSupportedError: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g)
2025-07-13 05:50:02 - ERROR - app.services.transaction_service - Ошибка при обновлении транзакции ID 6: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g) (<class 'sqlalchemy.exc.NotSupportedError'>, NotSupportedError('(psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join\n'), <traceback object at 0x7b61fc349dc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.FeatureNotSupported: FOR UPDATE cannot be applied to the nullable side of an outer join


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/services/transaction_service.py", line 119, in update_transaction
    crud.account.update_balance(db, account_id=old_from_account_id, amount_change=old_amount)
  File "/app/app/crud/crud_account.py", line 53, in update_balance
    account = db.query(models.Account).filter_by(id=account_id).with_for_update().one()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2778, in one
    return self._iter().one()  # type: ignore
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2236, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.NotSupportedError: (psycopg2.errors.FeatureNotSupported) FOR UPDATE cannot be applied to the nullable side of an outer join

[SQL: SELECT accounts.id AS accounts_id, accounts.name AS accounts_name, accounts.balance AS accounts_balance, accounts.currency AS accounts_currency, accounts.is_active AS accounts_is_active, accounts.account_type_id AS accounts_account_type_id, accounts.owner_id AS accounts_owner_id, accounts.workspace_id AS accounts_workspace_id, accounts.created_at AS accounts_created_at, accounts.updated_at AS accounts_updated_at, account_types_1.id AS account_types_1_id, account_types_1.name AS account_types_1_name, account_types_1.code AS account_types_1_code, account_types_1.created_at AS account_types_1_created_at, account_types_1.updated_at AS account_types_1_updated_at 
FROM accounts LEFT OUTER JOIN account_types AS account_types_1 ON account_types_1.id = accounts.account_type_id 
WHERE accounts.id = %(id_1)s FOR UPDATE]
[parameters: {'id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/tw8g)
2025-07-13 05:52:10 - INFO - uvicorn.error - Shutting down None
2025-07-13 05:52:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 05:52:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 05:52:10 - INFO - uvicorn.error - Finished server process [10] None
2025-07-13 05:52:13 - INFO - uvicorn.error - Started server process [17] None
2025-07-13 05:52:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:52:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:52:20 - INFO - uvicorn.error - Shutting down None
2025-07-13 05:52:21 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 05:52:21 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 05:52:21 - INFO - uvicorn.error - Finished server process [17] None
2025-07-13 05:52:24 - INFO - uvicorn.error - Started server process [21] None
2025-07-13 05:52:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:52:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:52:27 - INFO - uvicorn.error - Started server process [26] None
2025-07-13 05:52:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:52:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:52:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 05:52:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:52:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:52:59 - ERROR - app.services.transaction_service - Ошибка при обновлении транзакции ID 6: name 'lazyload' is not defined (<class 'NameError'>, NameError("name 'lazyload' is not defined"), <traceback object at 0x722c1bac4e40>)
Traceback (most recent call last):
  File "/app/app/services/transaction_service.py", line 119, in update_transaction
    crud.account.update_balance(db, account_id=old_from_account_id, amount_change=old_amount)
  File "/app/app/crud/crud_account.py", line 54, in update_balance
    .options(lazyload(models.Account.account_type_ref))\
NameError: name 'lazyload' is not defined
2025-07-13 05:53:10 - ERROR - app.services.transaction_service - Ошибка при обновлении транзакции ID 6: name 'lazyload' is not defined (<class 'NameError'>, NameError("name 'lazyload' is not defined"), <traceback object at 0x722c1af169c0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_service.py", line 119, in update_transaction
    crud.account.update_balance(db, account_id=old_from_account_id, amount_change=old_amount)
  File "/app/app/crud/crud_account.py", line 54, in update_balance
    .options(lazyload(models.Account.account_type_ref))\
NameError: name 'lazyload' is not defined
2025-07-13 05:54:06 - INFO - uvicorn.error - Shutting down None
2025-07-13 05:54:06 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 05:54:06 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 05:54:06 - INFO - uvicorn.error - Finished server process [10] None
2025-07-13 05:54:09 - INFO - uvicorn.error - Started server process [17] None
2025-07-13 05:54:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:54:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:54:18 - INFO - uvicorn.error - Shutting down None
2025-07-13 05:54:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 05:54:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 05:54:18 - INFO - uvicorn.error - Finished server process [17] None
2025-07-13 05:54:21 - INFO - uvicorn.error - Started server process [21] None
2025-07-13 05:54:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:54:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:54:51 - INFO - uvicorn.error - Started server process [9] None
2025-07-13 05:54:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:54:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 05:58:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 05:58:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 05:58:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 06:01:32 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 06:01:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 06:01:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 06:10:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 06:10:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 06:10:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 06:12:01 - INFO - uvicorn.error - Started server process [9] None
2025-07-13 06:12:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 06:12:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 06:13:22 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 06:13:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 06:13:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 09:11:32 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 09:11:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 09:11:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 09:31:46 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 09:31:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 09:31:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 09:36:13 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 09:36:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 09:36:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 09:42:51 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 09:42:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 09:42:51 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 09:56:43 - INFO - uvicorn.error - Started server process [9] None
2025-07-13 09:56:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 09:56:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:05:28 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 10:05:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:05:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:15:21 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 10:15:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:15:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:22:21 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 10:22:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:22:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:26:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 10:26:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:26:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:32:52 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 10:32:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:32:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:37:41 - INFO - uvicorn.error - Shutting down None
2025-07-13 10:37:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 10:37:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 10:37:41 - INFO - uvicorn.error - Finished server process [10] None
2025-07-13 10:37:44 - INFO - uvicorn.error - Started server process [19] None
2025-07-13 10:37:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 10:37:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 10:38:11 - INFO - uvicorn.error - Shutting down None
2025-07-13 10:38:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-13 10:38:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-13 10:38:11 - INFO - uvicorn.error - Finished server process [19] None
2025-07-13 11:10:31 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 11:10:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 11:10:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 14:31:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 14:31:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 14:31:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 14:38:18 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 14:38:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 14:38:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 14:42:42 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 14:42:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 14:42:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 14:47:39 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 14:47:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 14:47:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:06:54 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:06:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:06:54 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:08:01 - INFO - uvicorn.error - Started server process [9] None
2025-07-13 15:08:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:08:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:16:18 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:16:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:16:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:44:55 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:44:55 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:44:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:50:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:50:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:50:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:54:20 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:54:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:54:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 15:58:15 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 15:58:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 15:58:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:00:42 - INFO - uvicorn.error - Started server process [11] None
2025-07-13 16:00:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:00:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:02:07 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 16:02:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:02:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:12:53 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 16:12:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:12:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:24:21 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 16:24:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:24:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:41:13 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 16:41:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:41:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:50:12 - INFO - uvicorn.error - Started server process [9] None
2025-07-13 16:50:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:50:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:53:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 16:53:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 16:53:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 16:57:45 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-13 16:57:45 - INFO - app.routers.transactions - Транзакция с ID 11 успешно создана для workspace 1. None
2025-07-13 17:06:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 17:06:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 17:06:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 17:10:09 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 17:10:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 17:10:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 17:20:09 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 17:20:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 17:20:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 17:36:06 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-13 17:36:06 - INFO - app.routers.transactions - Транзакция с ID 12 успешно создана для workspace 1. None
2025-07-13 17:52:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 17:52:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 17:52:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 17:59:49 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 17:59:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 17:59:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:01:44 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:01:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:01:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:07:01 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:07:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:07:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:09:53 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:09:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:09:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:18:42 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:18:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:18:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:25:51 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-13 18:25:51 - INFO - app.routers.transactions - Транзакция с ID 13 успешно создана для workspace 1. None
2025-07-13 18:46:31 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:46:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:46:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 18:58:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-13 18:58:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-13 18:58:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-13 20:16:32 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("unsupported operand type(s) for -: 'float' and 'decimal.Decimal'"), <traceback object at 0x7d551e4137c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/app/app/crud/crud_dashboard.py", line 38, in get_summary_data
    net_profit_loss = total_income_result - total_expense_result
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-07-13 20:16:35 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("unsupported operand type(s) for -: 'float' and 'decimal.Decimal'"), <traceback object at 0x7d551e402f40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/app/app/crud/crud_dashboard.py", line 38, in get_summary_data
    net_profit_loss = total_income_result - total_expense_result
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-07-13 22:04:00 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-13 22:04:00 - INFO - app.routers.transactions - Транзакция с ID 14 успешно создана для workspace 1. None
2025-07-14 07:19:56 - INFO - uvicorn.error - Started server process [10] None
2025-07-14 07:19:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-14 07:19:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-14 07:23:13 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-14 07:23:14 - INFO - app.routers.transactions - Транзакция с ID 15 успешно создана для workspace 1. None
2025-07-14 07:50:36 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-14 07:50:36 - INFO - app.routers.transactions - Транзакция с ID 16 успешно создана для workspace 1. None
2025-07-14 07:54:13 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 1 пользователем true1853@yandex.ru None
2025-07-14 07:54:13 - INFO - app.routers.transactions - Транзакция с ID 17 успешно создана для workspace 1. None
2025-07-15 10:59:14 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 10:59:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 10:59:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:04:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 11:04:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:04:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:06:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 11:06:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:06:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:07:49 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 11:07:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:07:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:09:29 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 11:09:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:09:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:13:56 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 11:13:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:13:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:41:26 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("unsupported operand type(s) for -: 'float' and 'decimal.Decimal'"), <traceback object at 0x7a13986512c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/app/app/crud/crud_dashboard.py", line 38, in get_summary_data
    net_profit_loss = total_income_result - total_expense_result
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-07-15 11:41:36 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'TypeError'>, TypeError("unsupported operand type(s) for -: 'float' and 'decimal.Decimal'"), <traceback object at 0x7a13997e7dc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/dashboard.py", line 29, in get_dashboard_summary
    return crud.dashboard_crud.get_summary_data( # ИСПРАВЛЕНО: Используем экземпляр dashboard_crud
  File "/app/app/crud/crud_dashboard.py", line 38, in get_summary_data
    net_profit_loss = total_income_result - total_expense_result
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-07-15 11:43:56 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "counterparties_inn_key"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x7a13985b79c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "counterparties_inn_key"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "counterparties_inn_key"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 11:46:09 - INFO - uvicorn.error - Shutting down None
2025-07-15 11:46:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 11:46:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 11:46:09 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 11:46:13 - INFO - uvicorn.error - Started server process [93] None
2025-07-15 11:46:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:46:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:53:01 - INFO - uvicorn.error - Shutting down None
2025-07-15 11:53:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 11:53:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 11:53:01 - INFO - uvicorn.error - Finished server process [93] None
2025-07-15 11:53:04 - INFO - uvicorn.error - Started server process [97] None
2025-07-15 11:53:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:53:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 11:56:32 - INFO - uvicorn.error - Shutting down None
2025-07-15 11:56:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 11:56:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 11:56:32 - INFO - uvicorn.error - Finished server process [97] None
2025-07-15 11:56:35 - INFO - uvicorn.error - Started server process [108] None
2025-07-15 11:56:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 11:56:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:00:25 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:00:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:00:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:00:25 - INFO - uvicorn.error - Finished server process [108] None
2025-07-15 12:00:27 - INFO - uvicorn.error - Started server process [112] None
2025-07-15 12:00:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:00:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:00:30 - INFO - uvicorn.error - Started server process [117] None
2025-07-15 12:00:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:00:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:01:46 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:01:46 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:01:46 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:01:46 - INFO - uvicorn.error - Finished server process [117] None
2025-07-15 12:01:48 - INFO - uvicorn.error - Started server process [121] None
2025-07-15 12:01:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:01:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:01:50 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:01:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:01:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:01:50 - INFO - uvicorn.error - Finished server process [121] None
2025-07-15 12:01:52 - INFO - uvicorn.error - Started server process [125] None
2025-07-15 12:01:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:01:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:04:13 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:04:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:04:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:04:13 - INFO - uvicorn.error - Finished server process [125] None
2025-07-15 12:04:16 - INFO - uvicorn.error - Started server process [129] None
2025-07-15 12:04:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:04:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:04:18 - INFO - uvicorn.error - Started server process [134] None
2025-07-15 12:04:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:04:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:04:41 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:04:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:04:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:04:41 - INFO - uvicorn.error - Finished server process [134] None
2025-07-15 12:04:43 - INFO - uvicorn.error - Started server process [138] None
2025-07-15 12:04:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:04:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:06:45 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:06:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:06:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:06:45 - INFO - uvicorn.error - Finished server process [138] None
2025-07-15 12:06:48 - INFO - uvicorn.error - Started server process [143] None
2025-07-15 12:06:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:06:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:06:58 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:06:58 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:06:58 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:06:58 - INFO - uvicorn.error - Finished server process [143] None
2025-07-15 12:07:01 - INFO - uvicorn.error - Started server process [147] None
2025-07-15 12:07:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:07:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:07:03 - INFO - uvicorn.error - Started server process [151] None
2025-07-15 12:07:03 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:07:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:07:16 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:07:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:07:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:07:16 - INFO - uvicorn.error - Finished server process [151] None
2025-07-15 12:07:18 - INFO - uvicorn.error - Started server process [155] None
2025-07-15 12:07:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:07:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:07:18 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:07:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:07:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:07:18 - INFO - uvicorn.error - Finished server process [155] None
2025-07-15 12:07:21 - INFO - uvicorn.error - Started server process [160] None
2025-07-15 12:07:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:07:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:07:56 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:07:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:07:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:07:56 - INFO - uvicorn.error - Finished server process [160] None
2025-07-15 12:07:59 - INFO - uvicorn.error - Started server process [164] None
2025-07-15 12:07:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:07:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:08:01 - INFO - uvicorn.error - Started server process [168] None
2025-07-15 12:08:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:08:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:08:24 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:08:24 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:08:24 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:08:24 - INFO - uvicorn.error - Finished server process [168] None
2025-07-15 12:08:26 - INFO - uvicorn.error - Started server process [172] None
2025-07-15 12:08:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:08:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:10:14 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:10:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:10:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:10:14 - INFO - uvicorn.error - Finished server process [172] None
2025-07-15 12:10:17 - INFO - uvicorn.error - Started server process [176] None
2025-07-15 12:10:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:10:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:12:48 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:12:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:12:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:12:48 - INFO - uvicorn.error - Finished server process [176] None
2025-07-15 12:17:53 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:17:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:17:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:18:32 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:18:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:18:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:19:28 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x73ab0450aa80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:22:43 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x73ab045311c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:23:10 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:23:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:23:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:23:10 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x7320045e9dc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:23:11 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x732004377f80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:23:12 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x7320043088c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:23:15 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x7320043171c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:23:17 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x732004308e00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:24:48 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:24:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:24:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:26:07 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:26:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:26:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:26:14 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x7e3a7aa88fc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 51, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур Гусейнов', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 1, 'workspace_id': 1}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 12:36:01 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:36:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:36:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:38:06 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:38:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:38:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:40:35 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:40:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:40:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:40:57 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:40:57 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:40:57 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:40:57 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 12:41:00 - INFO - uvicorn.error - Started server process [21] None
2025-07-15 12:41:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:41:00 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:41:09 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:41:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:41:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:41:09 - INFO - uvicorn.error - Finished server process [21] None
2025-07-15 12:41:11 - INFO - uvicorn.error - Started server process [37] None
2025-07-15 12:41:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:41:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:43:51 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:43:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:43:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:43:52 - INFO - uvicorn.error - Finished server process [37] None
2025-07-15 12:43:54 - INFO - uvicorn.error - Started server process [48] None
2025-07-15 12:43:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:43:54 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:43:57 - INFO - uvicorn.error - Started server process [52] None
2025-07-15 12:43:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:43:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:44:22 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:44:23 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:44:23 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:44:23 - INFO - uvicorn.error - Finished server process [52] None
2025-07-15 12:48:38 - INFO - uvicorn.error - Started server process [12] None
2025-07-15 12:48:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:48:38 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:48:38 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:48:38 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.crud' has no attribute 'role' None
2025-07-15 12:48:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:48:40 - INFO - uvicorn.error - Started server process [16] None
2025-07-15 12:48:40 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:48:40 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:48:40 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:48:40 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.crud' has no attribute 'role' None
2025-07-15 12:48:40 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:48:59 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:48:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:48:59 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:48:59 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:48:59 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.crud' has no attribute 'role' None
2025-07-15 12:48:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:50:36 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:50:36 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:50:36 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:50:36 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 12:50:39 - INFO - uvicorn.error - Started server process [15] None
2025-07-15 12:50:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:50:39 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:50:39 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:50:39 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.crud' has no attribute 'role' None
2025-07-15 12:50:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:50:39 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:50:39 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:50:39 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:50:39 - INFO - uvicorn.error - Finished server process [15] None
2025-07-15 12:50:42 - INFO - uvicorn.error - Started server process [19] None
2025-07-15 12:50:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:50:42 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:50:42 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:50:42 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.crud' has no attribute 'role' None
2025-07-15 12:50:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:50:47 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:50:47 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:50:47 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:50:47 - INFO - uvicorn.error - Finished server process [19] None
2025-07-15 12:56:24 - INFO - uvicorn.error - Started server process [12] None
2025-07-15 12:56:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:56:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:56:24 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:56:24 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.schemas' has no attribute 'RoleCreate' None
2025-07-15 12:56:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:56:40 - INFO - uvicorn.error - Started server process [9] None
2025-07-15 12:56:40 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:56:40 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:56:40 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:56:41 - ERROR - app.main - Ошибка при инициализации базы данных: module 'app.schemas' has no attribute 'RoleCreate' None
2025-07-15 12:56:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:58:59 - INFO - uvicorn.error - Shutting down None
2025-07-15 12:58:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 12:58:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 12:58:59 - INFO - uvicorn.error - Finished server process [9] None
2025-07-15 12:59:02 - INFO - uvicorn.error - Started server process [15] None
2025-07-15 12:59:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:59:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:59:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:59:02 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:02 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:59:04 - INFO - uvicorn.error - Started server process [19] None
2025-07-15 12:59:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:59:04 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:59:04 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:59:04 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:04 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 12:59:22 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 12:59:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 12:59:22 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 12:59:22 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 12:59:22 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:22 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 12:59:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:01:20 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:01:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:01:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:01:20 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:02:36 - INFO - uvicorn.error - Started server process [12] None
2025-07-15 13:02:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:02:36 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:02:36 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:02:36 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:36 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:02:39 - INFO - uvicorn.error - Started server process [16] None
2025-07-15 13:02:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:02:39 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:02:39 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:02:39 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:39 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:02:52 - INFO - uvicorn.error - Started server process [9] None
2025-07-15 13:02:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:02:52 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:02:52 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:02:52 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:52 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for Role None
2025-07-15 13:02:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:04:15 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:04:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:04:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:04:16 - INFO - uvicorn.error - Finished server process [9] None
2025-07-15 13:04:19 - INFO - uvicorn.error - Started server process [15] None
2025-07-15 13:04:19 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:04:19 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:04:19 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:04:19 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedColumn) column roles.description does not exist
LINE 1: ...T roles.id AS roles_id, roles.name AS roles_name, roles.desc...
                                                             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:04:19 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedColumn) column roles.description does not exist
LINE 1: ...T roles.id AS roles_id, roles.name AS roles_name, roles.desc...
                                                             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:04:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:04:23 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:04:23 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:04:23 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:04:23 - INFO - uvicorn.error - Finished server process [15] None
2025-07-15 13:04:26 - INFO - uvicorn.error - Started server process [25] None
2025-07-15 13:04:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:04:26 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:04:26 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:04:26 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedColumn) column roles.description does not exist
LINE 1: ...T roles.id AS roles_id, roles.name AS roles_name, roles.desc...
                                                             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:04:26 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedColumn) column roles.description does not exist
LINE 1: ...T roles.id AS roles_id, roles.name AS roles_name, roles.desc...
                                                             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:04:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:04:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:04:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:04:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:04:50 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:04:50 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:04:50 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:04:50 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:04:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:04:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:06:55 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:06:55 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:06:55 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:06:55 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:06:58 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 13:06:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:06:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:06:58 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:06:59 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:06:59 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:06:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:07:14 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:07:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:07:14 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:07:14 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:07:14 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:07:14 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:07:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:08:14 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:08:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:08:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:08:14 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:08:17 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 13:08:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:08:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:08:17 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:08:18 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:08:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:08:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:08:33 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:08:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:08:33 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:08:33 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:08:33 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:08:33 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:08:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:10:17 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:10:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:10:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:10:17 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:10:20 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 13:10:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:10:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:10:20 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:10:20 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:10:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:10:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:10:35 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:10:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:10:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:10:35 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:10:35 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:10:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:10:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:11:44 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:11:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:11:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:11:44 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:11:47 - INFO - uvicorn.error - Started server process [16] None
2025-07-15 13:11:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:11:47 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:11:47 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:11:47 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:11:47 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:11:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:11:50 - INFO - uvicorn.error - Started server process [20] None
2025-07-15 13:11:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:11:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:11:50 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:11:50 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:11:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:11:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:12:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:12:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:12:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:12:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:12:02 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:12:02 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:12:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:12:26 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:12:26 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:12:26 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:12:26 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:12:29 - INFO - uvicorn.error - Started server process [16] None
2025-07-15 13:12:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:12:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:12:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:12:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:12:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:12:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:12:43 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:12:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:12:43 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:12:43 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:12:43 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:12:43 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:12:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:13:44 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:13:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:13:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:13:44 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:13:46 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 13:13:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:13:46 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:13:46 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:13:47 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:13:47 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:13:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:14:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:14:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:14:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:14:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:14:02 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:14:02 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:14:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:19:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:19:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:19:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:19:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:19:02 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:19:02 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:19:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:19:11 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:19:11 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:19:11 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:19:11 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:19:14 - INFO - uvicorn.error - Started server process [21] None
2025-07-15 13:19:14 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:19:14 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:19:14 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:19:14 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:19:14 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:19:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:28:00 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:28:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:28:00 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:28:00 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:28:00 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:28:00 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:28:00 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:28:00 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:28:00 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:29:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:29:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:29:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:29:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:29:02 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:29:02 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:29:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:29:34 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:29:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:29:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:29:34 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:29:36 - INFO - uvicorn.error - Started server process [21] None
2025-07-15 13:29:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:29:36 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:29:36 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:29:36 - ERROR - app.initial_data - Произошла ошибка во время инициализации ролей: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:29:36 - ERROR - app.main - Ошибка при инициализации базы данных: (psycopg2.errors.UndefinedTable) relation "roles" does not exist
LINE 2: FROM roles 
             ^

[SQL: SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles 
WHERE roles.id = %(id_1)s 
 LIMIT %(param_1)s]
[parameters: {'id_1': 1, 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405) None
2025-07-15 13:29:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:29:39 - INFO - uvicorn.error - Started server process [25] None
2025-07-15 13:29:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:29:39 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:29:39 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:29:39 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:29:39 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:29:39 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:29:39 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:29:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:31:53 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:31:53 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:31:53 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:31:53 - INFO - uvicorn.error - Finished server process [25] None
2025-07-15 13:31:56 - INFO - uvicorn.error - Started server process [36] None
2025-07-15 13:31:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:31:56 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:31:56 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:31:56 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:31:56 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:31:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:32:10 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:32:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:32:10 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:32:10 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:32:10 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:32:10 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:32:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:35:34 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:35:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:35:34 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:35:34 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:35:34 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:35:34 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:35:34 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:35:34 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:35:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:36:27 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:36:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:36:27 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:36:27 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:36:27 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:36:27 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:36:27 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:36:27 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:36:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:40:03 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:40:04 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:40:04 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:40:04 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:40:07 - INFO - uvicorn.error - Started server process [23] None
2025-07-15 13:40:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:40:07 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:40:07 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:40:07 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:40:07 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:40:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:40:22 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:40:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:40:22 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:40:22 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:40:22 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:40:22 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:40:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:43:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:43:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:43:37 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:43:37 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:43:37 - INFO - app.initial_data - Роль 'admin' подготовлена к созданию. None
2025-07-15 13:43:37 - INFO - app.initial_data - Роль 'user' подготовлена к созданию. None
2025-07-15 13:43:37 - INFO - app.initial_data - Все недостающие роли были успешно созданы. None
2025-07-15 13:43:37 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:43:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:43:49 - INFO - uvicorn.error - Shutting down None
2025-07-15 13:43:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 13:43:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 13:43:50 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 13:43:53 - INFO - uvicorn.error - Started server process [22] None
2025-07-15 13:43:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:43:53 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:43:53 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:43:53 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:43:53 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:43:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 13:44:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 13:44:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 13:44:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 13:44:50 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 13:44:50 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 13:44:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 13:44:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:37:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 16:37:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:37:12 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:37:12 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:37:12 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:37:12 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:37:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:46:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 16:46:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:46:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:46:17 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:46:17 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:46:17 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:46:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:54:15 - INFO - uvicorn.error - Shutting down None
2025-07-15 16:54:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 16:54:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 16:54:16 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 16:54:18 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 16:54:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:54:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:54:18 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:54:18 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:54:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:54:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:54:20 - INFO - uvicorn.error - Started server process [21] None
2025-07-15 16:54:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:54:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:54:20 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:54:20 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:54:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:54:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:55:05 - INFO - uvicorn.error - Started server process [10] None
2025-07-15 16:55:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:55:05 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:55:05 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:55:05 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:55:05 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:55:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-15 16:59:47 - INFO - uvicorn.error - Shutting down None
2025-07-15 16:59:47 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-15 16:59:47 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-15 16:59:47 - INFO - uvicorn.error - Finished server process [10] None
2025-07-15 16:59:49 - INFO - uvicorn.error - Started server process [17] None
2025-07-15 16:59:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-15 16:59:49 - INFO - app.main - Выполняется запуск приложения... None
2025-07-15 16:59:49 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-15 16:59:49 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-15 16:59:49 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-15 16:59:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:01:25 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:01:25 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:01:25 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:01:25 - INFO - uvicorn.error - Finished server process [17] None
2025-07-16 13:01:30 - INFO - uvicorn.error - Started server process [22] None
2025-07-16 13:01:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:01:30 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:01:30 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:01:30 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:01:30 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:01:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:01:51 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:01:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:01:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:01:51 - INFO - uvicorn.error - Finished server process [22] None
2025-07-16 13:01:54 - INFO - uvicorn.error - Started server process [28] None
2025-07-16 13:01:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:01:54 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:01:54 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:01:54 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:01:54 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:01:54 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:02:49 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 13:02:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:02:49 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:02:49 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:02:49 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:02:49 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:02:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:33:26 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:33:26 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:33:26 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:33:26 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 13:33:29 - INFO - uvicorn.error - Started server process [98] None
2025-07-16 13:33:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:33:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:33:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:33:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:33:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:33:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:40:14 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:40:14 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:40:14 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:40:14 - INFO - uvicorn.error - Finished server process [98] None
2025-07-16 13:41:00 - INFO - uvicorn.error - Started server process [106] None
2025-07-16 13:41:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:41:00 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:41:00 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:41:00 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:41:00 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:41:00 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:41:32 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:41:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:41:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:41:32 - INFO - uvicorn.error - Finished server process [106] None
2025-07-16 13:41:35 - INFO - uvicorn.error - Started server process [110] None
2025-07-16 13:41:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:41:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:41:35 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:41:35 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:41:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:41:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:41:41 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:41:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:41:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:41:41 - INFO - uvicorn.error - Finished server process [110] None
2025-07-16 13:41:44 - INFO - uvicorn.error - Started server process [115] None
2025-07-16 13:41:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:41:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:41:44 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:41:44 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:41:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:41:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:42:07 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 13:42:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:42:07 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:42:07 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:42:07 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:42:07 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:42:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:51:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:51:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:51:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:51:27 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 13:51:29 - INFO - uvicorn.error - Started server process [25] None
2025-07-16 13:51:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:51:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:51:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:51:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:51:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:51:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:51:43 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:51:43 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:51:43 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:51:43 - INFO - uvicorn.error - Finished server process [25] None
2025-07-16 13:52:29 - INFO - uvicorn.error - Started server process [49] None
2025-07-16 13:52:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:52:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:52:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:52:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:52:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:52:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:52:32 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:52:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:52:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:52:32 - INFO - uvicorn.error - Finished server process [49] None
2025-07-16 13:52:34 - INFO - uvicorn.error - Started server process [53] None
2025-07-16 13:52:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:52:34 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:52:34 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:52:35 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:52:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:52:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:52:54 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:52:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:52:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:52:54 - INFO - uvicorn.error - Finished server process [53] None
2025-07-16 13:53:28 - INFO - uvicorn.error - Started server process [76] None
2025-07-16 13:53:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:53:28 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:53:28 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:53:28 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:53:28 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:53:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:53:30 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:53:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:53:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:53:30 - INFO - uvicorn.error - Finished server process [76] None
2025-07-16 13:53:32 - INFO - uvicorn.error - Started server process [80] None
2025-07-16 13:53:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:53:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:53:32 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:53:32 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:53:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:53:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:54:03 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:54:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:54:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:54:03 - INFO - uvicorn.error - Finished server process [80] None
2025-07-16 13:54:24 - INFO - uvicorn.error - Started server process [86] None
2025-07-16 13:54:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:54:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:54:24 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:54:24 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:54:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:54:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:54:40 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:54:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:54:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:54:40 - INFO - uvicorn.error - Finished server process [86] None
2025-07-16 13:56:18 - INFO - uvicorn.error - Started server process [152] None
2025-07-16 13:56:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:56:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:56:18 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:56:18 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:56:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:56:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:56:22 - INFO - uvicorn.error - Started server process [156] None
2025-07-16 13:56:22 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:56:22 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:56:22 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:56:22 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:56:22 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:56:22 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:56:25 - INFO - uvicorn.error - Started server process [160] None
2025-07-16 13:56:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:56:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:56:25 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:56:25 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:56:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:56:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:56:29 - INFO - uvicorn.error - Started server process [165] None
2025-07-16 13:56:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:56:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:56:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:56:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:56:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:56:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:56:43 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:56:43 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:56:43 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:56:43 - INFO - uvicorn.error - Finished server process [165] None
2025-07-16 13:57:33 - INFO - uvicorn.error - Started server process [214] None
2025-07-16 13:57:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:57:33 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:57:33 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:57:33 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:57:33 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:57:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:57:36 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:57:36 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:57:36 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:57:36 - INFO - uvicorn.error - Finished server process [214] None
2025-07-16 13:57:39 - INFO - uvicorn.error - Started server process [218] None
2025-07-16 13:57:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:57:39 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:57:39 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:57:40 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:57:40 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:57:40 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:57:43 - INFO - uvicorn.error - Started server process [222] None
2025-07-16 13:57:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:57:43 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:57:43 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:57:43 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:57:43 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:57:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:57:45 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:57:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:57:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:57:45 - INFO - uvicorn.error - Finished server process [222] None
2025-07-16 13:58:24 - INFO - uvicorn.error - Started server process [261] None
2025-07-16 13:58:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:58:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:58:24 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:58:24 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:58:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:58:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:58:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:58:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:58:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:58:27 - INFO - uvicorn.error - Finished server process [261] None
2025-07-16 13:58:29 - INFO - uvicorn.error - Started server process [265] None
2025-07-16 13:58:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:58:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:58:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:58:30 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:58:30 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:58:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:58:33 - INFO - uvicorn.error - Started server process [269] None
2025-07-16 13:58:33 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:58:33 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:58:33 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:58:33 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:58:33 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:58:33 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:58:34 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:58:34 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:58:34 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:58:34 - INFO - uvicorn.error - Finished server process [269] None
2025-07-16 13:58:37 - INFO - uvicorn.error - Started server process [273] None
2025-07-16 13:58:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:58:37 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:58:37 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:58:38 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:58:38 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:58:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:22 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:59:22 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:59:22 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:59:22 - INFO - uvicorn.error - Finished server process [273] None
2025-07-16 13:59:25 - INFO - uvicorn.error - Started server process [278] None
2025-07-16 13:59:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:59:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:59:25 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:59:25 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:59:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:59:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:28 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:59:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:59:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:59:28 - INFO - uvicorn.error - Finished server process [278] None
2025-07-16 13:59:32 - INFO - uvicorn.error - Started server process [282] None
2025-07-16 13:59:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:59:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:59:32 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:59:32 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:59:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:59:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:35 - INFO - uvicorn.error - Started server process [286] None
2025-07-16 13:59:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:59:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:59:35 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:59:36 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:59:36 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:59:36 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:36 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:59:36 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:59:36 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:59:36 - INFO - uvicorn.error - Finished server process [286] None
2025-07-16 13:59:39 - INFO - uvicorn.error - Started server process [290] None
2025-07-16 13:59:39 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:59:39 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:59:39 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:59:39 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:59:39 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:59:39 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:41 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:59:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:59:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:59:41 - INFO - uvicorn.error - Finished server process [290] None
2025-07-16 13:59:44 - INFO - uvicorn.error - Started server process [294] None
2025-07-16 13:59:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 13:59:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 13:59:44 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 13:59:44 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 13:59:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 13:59:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 13:59:48 - INFO - uvicorn.error - Shutting down None
2025-07-16 13:59:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 13:59:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 13:59:48 - INFO - uvicorn.error - Finished server process [294] None
2025-07-16 14:00:32 - INFO - uvicorn.error - Started server process [330] None
2025-07-16 14:00:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:00:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:00:32 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:00:32 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:00:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:00:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:00:35 - INFO - uvicorn.error - Shutting down None
2025-07-16 14:00:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 14:00:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 14:00:35 - INFO - uvicorn.error - Finished server process [330] None
2025-07-16 14:01:29 - INFO - uvicorn.error - Started server process [345] None
2025-07-16 14:01:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:01:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:01:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:01:29 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:01:29 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:01:29 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:01:34 - INFO - uvicorn.error - Shutting down None
2025-07-16 14:01:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 14:01:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 14:01:35 - INFO - uvicorn.error - Finished server process [345] None
2025-07-16 14:01:38 - INFO - uvicorn.error - Started server process [349] None
2025-07-16 14:01:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:01:38 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:01:38 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:01:38 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:01:38 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:01:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:01:42 - INFO - uvicorn.error - Shutting down None
2025-07-16 14:01:42 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 14:01:42 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 14:01:42 - INFO - uvicorn.error - Finished server process [349] None
2025-07-16 14:02:00 - INFO - uvicorn.error - Started server process [356] None
2025-07-16 14:02:00 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:02:00 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:02:00 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:02:01 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:02:01 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:02:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:02:06 - INFO - uvicorn.error - Shutting down None
2025-07-16 14:02:06 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 14:02:06 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 14:02:06 - INFO - uvicorn.error - Finished server process [356] None
2025-07-16 14:02:09 - INFO - uvicorn.error - Started server process [360] None
2025-07-16 14:02:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:02:09 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:02:09 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:02:09 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:02:09 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:02:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:02:25 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 14:02:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:02:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:02:25 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:02:25 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:02:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:02:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 14:23:44 - INFO - uvicorn.error - Shutting down None
2025-07-16 14:23:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 14:23:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 14:23:44 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 14:23:47 - INFO - uvicorn.error - Started server process [76] None
2025-07-16 14:23:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 14:23:47 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 14:23:47 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 14:23:47 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 14:23:47 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 14:23:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:03:52 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:03:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:03:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:03:52 - INFO - uvicorn.error - Finished server process [76] None
2025-07-16 16:03:55 - INFO - uvicorn.error - Started server process [88] None
2025-07-16 16:03:55 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:03:55 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:03:55 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:03:55 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:03:55 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:03:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:03:57 - INFO - uvicorn.error - Started server process [92] None
2025-07-16 16:03:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:03:57 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:03:57 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:03:57 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:03:57 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:03:57 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:04:15 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:04:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:04:15 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:04:15 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:04:15 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:04:15 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:04:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:18:52 - INFO - app.routers.dds_articles - Попытка создания статьи ДДС 'Кошелек' для workspace 2 None
2025-07-16 16:18:52 - INFO - app.routers.dds_articles - Статья ДДС с ID 1 успешно создана. None
2025-07-16 16:29:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:29:28 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:29:28 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:29:28 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 16:29:31 - INFO - uvicorn.error - Started server process [46] None
2025-07-16 16:29:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:29:31 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:29:31 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:29:31 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:29:31 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:29:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:30:05 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'BudgetCreate' object has no attribute 'workspace_id'"), <traceback object at 0x78dab7e09b80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 74, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/budgets.py", line 49, in create_budget
    workspace = crud.workspace.get(db, id=budget_in.workspace_id)
  File "/usr/local/lib/python3.9/site-packages/pydantic/main.py", line 761, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'BudgetCreate' object has no attribute 'workspace_id'
2025-07-16 16:30:24 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:30:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:30:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:30:24 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:30:24 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:30:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:30:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:30:32 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'BudgetCreate' object has no attribute 'workspace_id'"), <traceback object at 0x73667a733840>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 74, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/budgets.py", line 49, in create_budget
    workspace = crud.workspace.get(db, id=budget_in.workspace_id)
  File "/usr/local/lib/python3.9/site-packages/pydantic/main.py", line 761, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'BudgetCreate' object has no attribute 'workspace_id'
2025-07-16 16:30:44 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'BudgetCreate' object has no attribute 'workspace_id'"), <traceback object at 0x736678c9bf00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 74, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/budgets.py", line 49, in create_budget
    workspace = crud.workspace.get(db, id=budget_in.workspace_id)
  File "/usr/local/lib/python3.9/site-packages/pydantic/main.py", line 761, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'BudgetCreate' object has no attribute 'workspace_id'
2025-07-16 16:32:08 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:32:08 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:32:08 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:32:08 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 16:32:12 - INFO - uvicorn.error - Started server process [20] None
2025-07-16 16:32:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:32:12 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:32:12 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:32:12 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:32:12 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:32:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:32:16 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:32:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:32:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:32:16 - INFO - uvicorn.error - Finished server process [20] None
2025-07-16 16:32:18 - INFO - uvicorn.error - Started server process [25] None
2025-07-16 16:32:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:32:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:32:18 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:32:19 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:32:19 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:32:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:32:22 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:32:22 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:32:22 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:32:22 - INFO - uvicorn.error - Finished server process [25] None
2025-07-16 16:32:25 - INFO - uvicorn.error - Started server process [29] None
2025-07-16 16:32:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:32:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:32:25 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:32:25 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:32:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:32:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:32:28 - INFO - uvicorn.error - Started server process [33] None
2025-07-16 16:32:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:32:28 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:32:28 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:32:28 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:32:28 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:32:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:32:45 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:32:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:32:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:32:45 - INFO - uvicorn.error - Finished server process [33] None
2025-07-16 16:32:48 - INFO - uvicorn.error - Started server process [37] None
2025-07-16 16:32:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:32:48 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:32:48 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:32:48 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:32:48 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:32:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:33:03 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:33:03 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:33:03 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:33:03 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:33:03 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:33:03 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:33:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:33:35 - ERROR - app.routers.budgets - Непредвиденная ошибка при создании бюджета (<class 'TypeError'>, TypeError("create_budget_with_items() missing 1 required keyword-only argument: 'workspace_id'"), <traceback object at 0x7f30e610af40>)
Traceback (most recent call last):
  File "/app/app/routers/budgets.py", line 59, in create_budget
    budget = budget_service.create_budget_with_items(
TypeError: create_budget_with_items() missing 1 required keyword-only argument: 'workspace_id'
2025-07-16 16:34:16 - ERROR - app.routers.budgets - Непредвиденная ошибка при создании бюджета (<class 'TypeError'>, TypeError("create_budget_with_items() missing 1 required keyword-only argument: 'workspace_id'"), <traceback object at 0x7f30e58c96c0>)
Traceback (most recent call last):
  File "/app/app/routers/budgets.py", line 59, in create_budget
    budget = budget_service.create_budget_with_items(
TypeError: create_budget_with_items() missing 1 required keyword-only argument: 'workspace_id'
2025-07-16 16:35:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:35:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:35:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:35:27 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 16:35:29 - INFO - uvicorn.error - Started server process [20] None
2025-07-16 16:35:29 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:35:29 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:35:29 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:35:30 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:35:30 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:35:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:35:32 - INFO - uvicorn.error - Started server process [24] None
2025-07-16 16:35:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:35:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:35:32 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:35:32 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:35:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:35:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:35:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:35:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:35:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:35:50 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:35:50 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:35:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:35:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:36:33 - ERROR - app.routers.budgets - Непредвиденная ошибка при создании бюджета (<class 'TypeError'>, TypeError("app.models.budget.Budget() got multiple values for keyword argument 'workspace_id'"), <traceback object at 0x79895306b1c0>)
Traceback (most recent call last):
  File "/app/app/routers/budgets.py", line 59, in create_budget
    budget = budget_service.create_budget_with_items(
  File "/app/app/services/budget_service.py", line 52, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/app/app/crud/crud_budget.py", line 37, in create_with_items
    db_budget = self.model(**budget_data, owner_id=owner_id, workspace_id=workspace_id)
TypeError: app.models.budget.Budget() got multiple values for keyword argument 'workspace_id'
2025-07-16 16:36:37 - ERROR - app.routers.budgets - Непредвиденная ошибка при создании бюджета (<class 'TypeError'>, TypeError("app.models.budget.Budget() got multiple values for keyword argument 'workspace_id'"), <traceback object at 0x7989527fccc0>)
Traceback (most recent call last):
  File "/app/app/routers/budgets.py", line 59, in create_budget
    budget = budget_service.create_budget_with_items(
  File "/app/app/services/budget_service.py", line 52, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/app/app/crud/crud_budget.py", line 37, in create_with_items
    db_budget = self.model(**budget_data, owner_id=owner_id, workspace_id=workspace_id)
TypeError: app.models.budget.Budget() got multiple values for keyword argument 'workspace_id'
2025-07-16 16:39:48 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:39:48 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:39:48 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:39:48 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 16:39:51 - INFO - uvicorn.error - Started server process [20] None
2025-07-16 16:39:51 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:39:51 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:39:51 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:39:52 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:39:52 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:39:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:40:06 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:40:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:40:06 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:40:06 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:40:06 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:40:06 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:40:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:40:09 - ERROR - app.routers.budgets - Непредвиденная ошибка при создании бюджета (<class 'TypeError'>, TypeError("'description' is an invalid keyword argument for Budget"), <traceback object at 0x7f841586b9c0>)
Traceback (most recent call last):
  File "/app/app/routers/budgets.py", line 59, in create_budget
    budget = budget_service.create_budget_with_items(
  File "/app/app/services/budget_service.py", line 52, in create_budget_with_items
    budget = crud.budget.create_with_items(
  File "/app/app/crud/crud_budget.py", line 43, in create_with_items
    db_budget = self.model(**budget_data, owner_id=owner_id, workspace_id=workspace_id)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'description' is an invalid keyword argument for Budget
2025-07-16 16:42:40 - INFO - uvicorn.error - Shutting down None
2025-07-16 16:42:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 16:42:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 16:42:40 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 16:42:43 - INFO - uvicorn.error - Started server process [17] None
2025-07-16 16:42:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:42:43 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:42:43 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:42:43 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:42:43 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:42:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 16:43:26 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 16:43:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 16:43:26 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 16:43:26 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 16:43:26 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 16:43:26 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 16:43:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:03:59 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:03:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:03:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:03:59 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 17:04:02 - INFO - uvicorn.error - Started server process [41] None
2025-07-16 17:04:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:04:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:04:02 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 17:04:03 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 17:04:03 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:04:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:04:05 - INFO - uvicorn.error - Started server process [45] None
2025-07-16 17:04:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:04:05 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:04:05 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 17:04:05 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 17:04:05 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:04:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:04:20 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:04:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:04:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:04:20 - INFO - app.initial_data - Проверка и создание начальных ролей... None
2025-07-16 17:04:20 - INFO - app.initial_data - Все роли уже существуют в базе данных. None
2025-07-16 17:04:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:04:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:09:41 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:09:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:09:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:09:41 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 17:18:52 - INFO - uvicorn.error - Started server process [12] None
2025-07-16 17:18:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:18:52 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:18:52 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:18:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:18:52 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:18:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:18:52 - ERROR - app.initial_data - Произошла критическая ошибка во время инициализации данных: 'description' is an invalid keyword argument for AccountType (<class 'TypeError'>, TypeError("'description' is an invalid keyword argument for AccountType"), <traceback object at 0x7f5d5d1c2640>)
Traceback (most recent call last):
  File "/app/app/initial_data/__init__.py", line 64, in init_db
    _ensure_data(db, AccountType, ACCOUNT_TYPES)
  File "/app/app/initial_data/__init__.py", line 49, in _ensure_data
    db_item = model(**item_data)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'description' is an invalid keyword argument for AccountType
2025-07-16 17:18:52 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for AccountType None
2025-07-16 17:18:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:18:55 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:18:55 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:18:55 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:18:55 - INFO - uvicorn.error - Finished server process [12] None
2025-07-16 17:18:57 - INFO - uvicorn.error - Started server process [16] None
2025-07-16 17:18:57 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:18:57 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:18:57 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:18:57 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:18:58 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:18:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:18:58 - ERROR - app.initial_data - Произошла критическая ошибка во время инициализации данных: 'description' is an invalid keyword argument for AccountType (<class 'TypeError'>, TypeError("'description' is an invalid keyword argument for AccountType"), <traceback object at 0x70638422c080>)
Traceback (most recent call last):
  File "/app/app/initial_data/__init__.py", line 64, in init_db
    _ensure_data(db, AccountType, ACCOUNT_TYPES)
  File "/app/app/initial_data/__init__.py", line 49, in _ensure_data
    db_item = model(**item_data)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'description' is an invalid keyword argument for AccountType
2025-07-16 17:18:58 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for AccountType None
2025-07-16 17:18:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:19:00 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:19:00 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:19:00 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:19:00 - INFO - uvicorn.error - Finished server process [16] None
2025-07-16 17:19:03 - INFO - uvicorn.error - Started server process [20] None
2025-07-16 17:19:03 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:19:03 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:19:03 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:19:03 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:19:03 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:19:03 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:19:03 - ERROR - app.initial_data - Произошла критическая ошибка во время инициализации данных: 'description' is an invalid keyword argument for AccountType (<class 'TypeError'>, TypeError("'description' is an invalid keyword argument for AccountType"), <traceback object at 0x794c33214240>)
Traceback (most recent call last):
  File "/app/app/initial_data/__init__.py", line 64, in init_db
    _ensure_data(db, AccountType, ACCOUNT_TYPES)
  File "/app/app/initial_data/__init__.py", line 49, in _ensure_data
    db_item = model(**item_data)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'description' is an invalid keyword argument for AccountType
2025-07-16 17:19:03 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for AccountType None
2025-07-16 17:19:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:19:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:19:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:19:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:19:17 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:19:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:19:17 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:19:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:19:17 - ERROR - app.initial_data - Произошла критическая ошибка во время инициализации данных: 'description' is an invalid keyword argument for AccountType (<class 'TypeError'>, TypeError("'description' is an invalid keyword argument for AccountType"), <traceback object at 0x7b67d90a1480>)
Traceback (most recent call last):
  File "/app/app/initial_data/__init__.py", line 64, in init_db
    _ensure_data(db, AccountType, ACCOUNT_TYPES)
  File "/app/app/initial_data/__init__.py", line 49, in _ensure_data
    db_item = model(**item_data)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 565, in _initialize_instance
    manager.dispatch.init_failure(self, args, kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'description' is an invalid keyword argument for AccountType
2025-07-16 17:19:17 - ERROR - app.main - Ошибка при инициализации базы данных: 'description' is an invalid keyword argument for AccountType None
2025-07-16 17:19:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:21:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:21:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:21:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:21:27 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 17:21:30 - INFO - uvicorn.error - Started server process [15] None
2025-07-16 17:21:30 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:21:30 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:21:30 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:21:30 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:21:30 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:21:30 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:21:30 - INFO - app.initial_data - Запись 'Банковский счет' (ID: 1) для 'account_types' подготовлена к созданию. None
2025-07-16 17:21:30 - INFO - app.initial_data - Запись 'Касса' (ID: 2) для 'account_types' подготовлена к созданию. None
2025-07-16 17:21:30 - INFO - app.initial_data - Будет создано 2 новых записей в таблице 'account_types'. None
2025-07-16 17:21:30 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:21:30 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:21:30 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:21:32 - INFO - uvicorn.error - Started server process [19] None
2025-07-16 17:21:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:21:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:21:32 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:21:32 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:21:32 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:21:32 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:21:32 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:21:32 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:21:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:21:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:21:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:21:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:21:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:21:50 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:21:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:21:50 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:21:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:21:50 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:21:50 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:21:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:21:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:24:04 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:24:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:24:04 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:24:04 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:24:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:24:04 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:24:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:24:04 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:24:04 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:24:04 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:24:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:27:58 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:27:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:27:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:27:58 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:27:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:27:58 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:27:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:27:58 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:27:58 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:27:58 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:27:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:43:32 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:43:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:43:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:43:32 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 17:43:34 - INFO - uvicorn.error - Started server process [38] None
2025-07-16 17:43:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:43:34 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:43:34 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:43:34 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:43:35 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:43:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:43:35 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:43:35 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:43:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:43:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:44:32 - INFO - uvicorn.error - Shutting down None
2025-07-16 17:44:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 17:44:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 17:44:32 - INFO - uvicorn.error - Finished server process [38] None
2025-07-16 17:44:34 - INFO - uvicorn.error - Started server process [42] None
2025-07-16 17:44:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:44:34 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:44:34 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:44:34 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:44:34 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:44:34 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:44:34 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:44:34 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:44:34 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:44:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 17:44:49 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 17:44:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 17:44:49 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 17:44:49 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 17:44:49 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 17:44:50 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 17:44:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 17:44:50 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 17:44:50 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 17:44:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 17:44:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:39:04 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:39:04 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:39:04 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:39:04 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 18:39:10 - INFO - uvicorn.error - Started server process [51] None
2025-07-16 18:39:10 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:39:10 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:39:10 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:39:10 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:39:10 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:39:10 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:39:10 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:39:10 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:39:10 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:39:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:39:37 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:39:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:39:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:39:37 - INFO - uvicorn.error - Finished server process [51] None
2025-07-16 18:39:41 - INFO - uvicorn.error - Started server process [55] None
2025-07-16 18:39:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:39:41 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:39:41 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:39:41 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:39:42 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:39:42 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:39:42 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:39:42 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:39:42 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:39:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:39:50 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:39:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:39:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:39:50 - INFO - uvicorn.error - Finished server process [55] None
2025-07-16 18:39:54 - INFO - uvicorn.error - Started server process [60] None
2025-07-16 18:39:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:39:54 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:39:54 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:39:54 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:39:55 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:39:55 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:39:55 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:39:55 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:39:55 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:39:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:39:59 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:39:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:39:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:39:59 - INFO - uvicorn.error - Finished server process [60] None
2025-07-16 18:40:03 - INFO - uvicorn.error - Started server process [65] None
2025-07-16 18:40:03 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:40:03 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:40:03 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:40:03 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:40:04 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:40:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:40:04 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:40:04 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:40:04 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:40:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:40:07 - INFO - uvicorn.error - Started server process [70] None
2025-07-16 18:40:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:40:07 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:40:07 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:40:07 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:40:07 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:40:07 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:40:07 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:40:07 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:40:07 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:40:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:42:04 - INFO - uvicorn.error - Started server process [11] None
2025-07-16 18:42:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:42:04 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:42:04 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:42:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:42:04 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:42:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:42:04 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:42:04 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:42:04 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:42:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:50:44 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:50:44 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:50:44 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:50:44 - INFO - uvicorn.error - Finished server process [11] None
2025-07-16 18:50:49 - INFO - uvicorn.error - Started server process [18] None
2025-07-16 18:50:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:50:49 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:50:49 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:50:49 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:50:49 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:50:49 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:50:49 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:50:49 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:50:49 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:50:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:53:30 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:53:30 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:53:30 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:53:30 - INFO - uvicorn.error - Finished server process [18] None
2025-07-16 18:53:35 - INFO - uvicorn.error - Started server process [23] None
2025-07-16 18:53:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:53:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:53:35 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:53:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:53:35 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:53:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:53:35 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:53:35 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:53:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:53:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:53:42 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:53:43 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:53:43 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:53:43 - INFO - uvicorn.error - Finished server process [23] None
2025-07-16 18:53:47 - INFO - uvicorn.error - Started server process [28] None
2025-07-16 18:53:47 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:53:47 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:53:47 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:53:47 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:53:47 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:53:47 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:53:47 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:53:47 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:53:47 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:53:47 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:54:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 18:54:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:54:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:54:17 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:54:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:54:18 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:54:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:54:18 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:54:18 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:54:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:54:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:56:09 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:56:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:56:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:56:09 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 18:56:13 - INFO - uvicorn.error - Started server process [16] None
2025-07-16 18:56:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:56:13 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:56:13 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:56:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:56:13 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:56:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:56:13 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:56:13 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:56:13 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:56:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:56:35 - INFO - uvicorn.error - Shutting down None
2025-07-16 18:56:36 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 18:56:36 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 18:56:36 - INFO - uvicorn.error - Finished server process [16] None
2025-07-16 18:56:40 - INFO - uvicorn.error - Started server process [21] None
2025-07-16 18:56:40 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:56:40 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:56:40 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:56:40 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:56:41 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:56:41 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:56:41 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:56:41 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:56:41 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:56:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 18:57:26 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 18:57:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 18:57:26 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 18:57:26 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 18:57:26 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 18:57:27 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 18:57:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 18:57:27 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 18:57:27 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 18:57:27 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 18:57:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:01:40 - INFO - uvicorn.error - Shutting down None
2025-07-16 19:01:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 19:01:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 19:01:40 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 19:01:44 - INFO - uvicorn.error - Started server process [25] None
2025-07-16 19:01:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:01:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:01:44 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:01:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:01:44 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:01:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:01:44 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:01:44 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:01:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:01:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:01:51 - INFO - uvicorn.error - Shutting down None
2025-07-16 19:01:51 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 19:01:51 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 19:01:51 - INFO - uvicorn.error - Finished server process [25] None
2025-07-16 19:01:56 - INFO - uvicorn.error - Started server process [29] None
2025-07-16 19:01:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:01:56 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:01:56 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:01:56 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:01:56 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:01:56 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:01:56 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:01:56 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:01:56 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:01:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:03:27 - INFO - uvicorn.error - Shutting down None
2025-07-16 19:03:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 19:03:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 19:03:27 - INFO - uvicorn.error - Finished server process [29] None
2025-07-16 19:03:32 - INFO - uvicorn.error - Started server process [34] None
2025-07-16 19:03:32 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:03:32 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:03:32 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:03:32 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:03:32 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:03:32 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:03:32 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:03:32 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:03:32 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:03:32 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:04:02 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 19:04:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:04:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:04:02 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:04:02 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:04:03 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:04:03 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:04:03 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:04:03 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:04:03 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:04:03 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:05:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 19:05:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:05:37 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:05:37 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:05:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:05:37 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:05:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:05:37 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:05:37 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:05:37 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:05:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:14:42 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 19:14:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:14:42 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:14:42 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:14:42 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:14:42 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:14:42 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:14:42 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:14:42 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:14:42 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:14:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 19:42:37 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 19:42:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 19:42:37 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 19:42:37 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 19:42:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 19:42:37 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 19:42:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 19:42:37 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 19:42:37 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 19:42:37 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 19:42:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:17:37 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 34 пользователем trushin.av4@gmail.com None
2025-07-16 20:17:37 - INFO - app.routers.transactions - Транзакция с ID 41 успешно создана для workspace 34. None
2025-07-16 20:35:19 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x773db6e48cc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 74, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 32, 'workspace_id': 36}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-16 20:36:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'sqlalchemy.exc.IntegrityError'>, IntegrityError('(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"\nDETAIL:  Key (inn)=() already exists.\n'), <traceback object at 0x773db78050c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/main.py", line 74, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/counterparties.py", line 26, in create_counterparty
    counterparty = crud.counterparty.create_with_owner(
  File "/app/app/crud/crud_counterparty.py", line 58, in create_with_owner
    db.commit()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2017, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1302, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1277, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4341, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4477, in _flush
    transaction.rollback(_capture_exception=True)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 4437, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 2353, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_counterparties_inn"
DETAIL:  Key (inn)=() already exists.

[SQL: INSERT INTO counterparties (name, type, inn, contact_person, contact_info, owner_id, workspace_id) VALUES (%(name)s, %(type)s, %(inn)s, %(contact_person)s, %(contact_info)s, %(owner_id)s, %(workspace_id)s) RETURNING counterparties.id, counterparties.created_at, counterparties.updated_at]
[parameters: {'name': 'Тимур', 'type': 'EMPLOYEE', 'inn': '', 'contact_person': '', 'contact_info': '', 'owner_id': 32, 'workspace_id': 36}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-16 20:43:24 - INFO - uvicorn.error - Shutting down None
2025-07-16 20:43:24 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 20:43:24 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 20:43:24 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 20:43:28 - INFO - uvicorn.error - Started server process [153] None
2025-07-16 20:43:28 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:43:28 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:43:28 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:43:28 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:43:28 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:43:28 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:43:28 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:43:28 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:43:28 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:43:28 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:44:20 - INFO - uvicorn.error - Shutting down None
2025-07-16 20:44:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 20:44:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 20:44:20 - INFO - uvicorn.error - Finished server process [153] None
2025-07-16 20:44:24 - INFO - uvicorn.error - Started server process [157] None
2025-07-16 20:44:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:44:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:44:24 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:44:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:44:24 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:44:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:44:24 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:44:24 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:44:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:44:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:44:27 - INFO - uvicorn.error - Started server process [162] None
2025-07-16 20:44:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:44:27 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:44:27 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:44:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:44:27 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:44:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:44:27 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:44:27 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:44:27 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:44:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:48:09 - INFO - uvicorn.error - Shutting down None
2025-07-16 20:48:10 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 20:48:10 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 20:48:10 - INFO - uvicorn.error - Finished server process [162] None
2025-07-16 20:48:12 - INFO - uvicorn.error - Started server process [174] None
2025-07-16 20:48:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:48:12 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:48:12 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:48:12 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:48:13 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:48:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:48:13 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:48:13 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:48:13 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:48:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:48:18 - INFO - uvicorn.error - Shutting down None
2025-07-16 20:48:18 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 20:48:18 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 20:48:18 - INFO - uvicorn.error - Finished server process [174] None
2025-07-16 20:48:21 - INFO - uvicorn.error - Started server process [178] None
2025-07-16 20:48:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:48:21 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:48:21 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:48:21 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:48:21 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:48:21 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:48:21 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:48:21 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:48:21 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:48:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:48:24 - INFO - uvicorn.error - Started server process [182] None
2025-07-16 20:48:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:48:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:48:24 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:48:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:48:24 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:48:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:48:24 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:48:24 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:48:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:48:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 20:50:15 - INFO - uvicorn.error - Shutting down None
2025-07-16 20:50:15 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 20:50:15 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 20:50:15 - INFO - uvicorn.error - Finished server process [182] None
2025-07-16 20:50:18 - INFO - uvicorn.error - Started server process [191] None
2025-07-16 20:50:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 20:50:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 20:50:18 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 20:50:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 20:50:18 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 20:50:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 20:50:18 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 20:50:18 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 20:50:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 20:50:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 21:02:32 - INFO - uvicorn.error - Shutting down None
2025-07-16 21:02:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 21:02:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 21:02:32 - INFO - uvicorn.error - Finished server process [191] None
2025-07-16 21:02:35 - INFO - uvicorn.error - Started server process [206] None
2025-07-16 21:02:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 21:02:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 21:02:35 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 21:02:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 21:02:35 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 21:02:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 21:02:35 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 21:02:35 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 21:02:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 21:02:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 21:02:40 - INFO - uvicorn.error - Shutting down None
2025-07-16 21:02:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 21:02:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 21:02:40 - INFO - uvicorn.error - Finished server process [206] None
2025-07-16 21:02:43 - INFO - uvicorn.error - Started server process [211] None
2025-07-16 21:02:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 21:02:43 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 21:02:43 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 21:02:43 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 21:02:43 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 21:02:43 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 21:02:43 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 21:02:43 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 21:02:43 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 21:02:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 21:22:57 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-16 21:22:57 - INFO - app.routers.transactions - Транзакция с ID 52 успешно создана для workspace 2. None
2025-07-16 22:34:25 - INFO - uvicorn.error - Started server process [10] None
2025-07-16 22:34:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 22:34:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 22:34:25 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 22:34:25 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 22:34:25 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 22:34:25 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 22:34:25 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 22:34:25 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 22:34:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 22:34:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-16 22:48:41 - INFO - uvicorn.error - Shutting down None
2025-07-16 22:48:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-16 22:48:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-16 22:48:41 - INFO - uvicorn.error - Finished server process [10] None
2025-07-16 22:48:44 - INFO - uvicorn.error - Started server process [15] None
2025-07-16 22:48:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-16 22:48:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-16 22:48:44 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-16 22:48:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-16 22:48:44 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-16 22:48:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-16 22:48:44 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-16 22:48:44 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-16 22:48:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-16 22:48:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 06:45:59 - INFO - uvicorn.error - Shutting down None
2025-07-17 06:45:59 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 06:45:59 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 06:45:59 - INFO - uvicorn.error - Finished server process [15] None
2025-07-17 07:17:59 - INFO - uvicorn.error - Started server process [12] None
2025-07-17 07:17:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 07:17:59 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 07:17:59 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 07:17:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 07:17:59 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 07:17:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 07:17:59 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 07:17:59 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 07:17:59 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 07:17:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 07:18:02 - INFO - uvicorn.error - Started server process [16] None
2025-07-17 07:18:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 07:18:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 07:18:02 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 07:18:02 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 07:18:02 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 07:18:02 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 07:18:02 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 07:18:02 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 07:18:02 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 07:18:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 07:18:13 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 07:18:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 07:18:13 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 07:18:13 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 07:18:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 07:18:13 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 07:18:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 07:18:13 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 07:18:13 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 07:18:13 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 07:18:13 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 07:18:14 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a29e0080>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:25:44 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a18dcd40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:25:44 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a292dc00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:29:21 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a18223c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:29:21 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a181fa40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:29:32 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a18288c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:29:32 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a185e140>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:31:21 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a1835c00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:31:21 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a33f6d00>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:34:19 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a183b340>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:34:19 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7b51a189b440>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 07:39:54 - INFO - uvicorn.error - Shutting down None
2025-07-17 07:39:54 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 07:39:54 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 07:39:54 - INFO - uvicorn.error - Finished server process [10] None
2025-07-17 08:45:01 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 08:45:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 08:45:01 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 08:45:01 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 08:45:01 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 08:45:01 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 08:45:01 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 08:45:01 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 08:45:01 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 08:45:01 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 08:45:01 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 08:45:08 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368e389e40>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 08:50:25 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d1a67c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:17:16 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d1097c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:17:16 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d114100>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:15 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d130ac0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:49 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d133dc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d1141c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:52 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d114dc0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:56 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d182ac0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 09:34:56 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7d368d1195c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 11:32:54 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 11:32:54 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:32:54 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:32:54 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:32:54 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:32:54 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:32:54 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:32:54 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:32:54 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:32:54 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:32:54 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:33:35 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7c5a840a3780>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 11:33:59 - ERROR - app.main - Произошла необработанная ошибка на сервере (<class 'AttributeError'>, AttributeError("'User' object has no attribute 'active_workspace_id'"), <traceback object at 0x7c5a7e6a0b80>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 159, in call_next
    message = await recv_stream.receive()
  File "/usr/local/lib/python3.9/site-packages/anyio/streams/memory.py", line 126, in receive
    raise EndOfStream from None
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/main.py", line 75, in log_and_handle_exceptions_middleware
    return await call_next(request)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 165, in call_next
    raise app_exc
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.9/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 278, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.9/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.9/site-packages/starlette/concurrency.py", line 42, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.9/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/app/app/routers/accounts.py", line 66, in read_accounts
    if not current_user.active_workspace_id:
AttributeError: 'User' object has no attribute 'active_workspace_id'
2025-07-17 11:35:28 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:35:29 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:35:29 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:35:29 - INFO - uvicorn.error - Finished server process [10] None
2025-07-17 11:35:31 - INFO - uvicorn.error - Started server process [22] None
2025-07-17 11:35:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:35:31 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:35:31 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:35:31 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:35:31 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:35:31 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:35:31 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:35:31 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:35:31 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:35:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:35:34 - INFO - uvicorn.error - Started server process [26] None
2025-07-17 11:35:34 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:35:34 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:35:34 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:35:34 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:35:34 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:35:34 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:35:34 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:35:34 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:35:34 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:35:34 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:35:41 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:35:41 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:35:41 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:35:41 - INFO - uvicorn.error - Finished server process [26] None
2025-07-17 11:35:44 - INFO - uvicorn.error - Started server process [30] None
2025-07-17 11:35:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:35:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:35:44 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:35:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:35:44 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:35:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:35:44 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:35:44 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:35:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:35:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:35:46 - INFO - uvicorn.error - Started server process [34] None
2025-07-17 11:35:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:35:46 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:35:46 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:35:46 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:35:46 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:35:46 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:35:46 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:35:46 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:35:46 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:35:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:35:55 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:35:55 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:35:55 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:35:55 - INFO - uvicorn.error - Finished server process [34] None
2025-07-17 11:35:58 - INFO - uvicorn.error - Started server process [38] None
2025-07-17 11:35:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:35:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:35:58 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:35:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:35:58 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:35:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:35:58 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:35:58 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:35:58 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:35:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:36:07 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:36:07 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:36:07 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:36:07 - INFO - uvicorn.error - Finished server process [38] None
2025-07-17 11:36:09 - INFO - uvicorn.error - Started server process [42] None
2025-07-17 11:36:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:36:09 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:36:09 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:36:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:36:10 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:36:10 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:36:10 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:36:10 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:36:10 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:36:10 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:37:16 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:37:16 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:37:16 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:37:16 - INFO - uvicorn.error - Finished server process [42] None
2025-07-17 11:37:18 - INFO - uvicorn.error - Started server process [47] None
2025-07-17 11:37:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:37:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:37:18 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:37:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:37:19 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:37:19 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:37:19 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:37:19 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:37:19 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:37:19 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:43:43 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 11:43:43 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:43:43 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:43:43 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:43:43 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:43:43 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:43:43 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:43:43 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:43:43 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:43:43 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:43:43 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:46:42 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:46:42 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:46:42 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:46:42 - INFO - uvicorn.error - Finished server process [10] None
2025-07-17 11:46:45 - INFO - uvicorn.error - Started server process [25] None
2025-07-17 11:46:45 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:46:45 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:46:45 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:46:45 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:46:45 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:46:45 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:46:45 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:46:45 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:46:45 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:46:45 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:47:45 - INFO - uvicorn.error - Shutting down None
2025-07-17 11:47:45 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 11:47:45 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 11:47:45 - INFO - uvicorn.error - Finished server process [25] None
2025-07-17 11:47:48 - INFO - uvicorn.error - Started server process [41] None
2025-07-17 11:47:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:47:48 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:47:48 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:47:48 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:47:48 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:47:48 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:47:48 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:47:48 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:47:48 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:47:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 11:48:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 11:48:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 11:48:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 11:48:17 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 11:48:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 11:48:17 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 11:48:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 11:48:17 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 11:48:17 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 11:48:17 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 11:48:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 12:45:35 - INFO - uvicorn.error - Shutting down None
2025-07-17 12:45:35 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-17 12:45:35 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-17 12:45:35 - INFO - uvicorn.error - Finished server process [10] None
2025-07-17 12:45:38 - INFO - uvicorn.error - Started server process [71] None
2025-07-17 12:45:38 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 12:45:38 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 12:45:38 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 12:45:38 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 12:45:38 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 12:45:38 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 12:45:38 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 12:45:38 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 12:45:38 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 12:45:38 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 12:46:04 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-17 12:46:04 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x7bd7d288fdc0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-17 12:46:04 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-17 12:56:50 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 12:56:50 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x7bd7d289f480>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-17 12:56:50 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-17 12:57:46 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 12:57:46 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 12:57:46 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 12:57:46 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 12:57:46 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 12:57:46 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 12:57:46 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 12:57:46 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 12:57:46 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 12:57:46 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 12:57:46 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 12:57:51 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 12:57:52 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x70acc0436dc0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-17 12:57:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-17 13:00:30 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-17 13:00:31 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x70acc01f1f40>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-17 13:00:31 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-17 13:05:35 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 13:05:35 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 13:05:35 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 13:05:35 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 13:05:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 13:05:35 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 13:05:35 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 13:05:35 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 13:05:35 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 13:05:35 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 13:05:35 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 13:06:18 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:06:19 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x76b8dc380ec0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-17 13:06:19 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-17 13:07:58 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 13:07:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 13:07:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 13:07:58 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 13:07:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 13:07:59 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 13:07:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 13:07:59 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 13:07:59 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 13:07:59 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 13:07:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 13:32:52 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 13:32:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 13:32:52 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 13:32:52 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 13:32:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 13:32:52 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-17 13:32:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 13:32:52 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-17 13:32:52 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 13:32:52 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 13:32:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 13:34:21 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:34:21 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 13:34:21 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Благотворительность и пожертвования', 'Обучение и развитие', 'Оплата поставщикам'] None
2025-07-17 13:35:23 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='юрист', amount=7900.0 None
2025-07-17 13:35:24 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Профессиональные услуги' None
2025-07-17 13:35:24 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Профессиональные услуги', confidence=0.95, alternatives=['Реклама (онлайн и офлайн)', 'Инвестиционные расходы', 'Программное обеспечение и сервисы'] None
2025-07-17 13:42:43 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 13:42:43 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 13:42:43 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Покупка техники и оборудования', 'Покупка нематериальных активов', 'Оплата поставщикам'] None
2025-07-17 13:43:20 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-17 13:43:21 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Транспортные расходы' None
2025-07-17 13:43:21 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Транспортные расходы', confidence=0.95, alternatives=['Коммунальные услуги', 'Аренда офиса/помещений', 'Выплаты по кредитам и займам'] None
2025-07-17 13:43:46 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:43:47 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 13:43:47 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Закупка товаров и материалов', 'Модернизация и ремонт', 'Аренда офиса/помещений'] None
2025-07-17 13:45:46 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:45:47 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 13:45:47 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Аренда офиса/помещений', 'Инвестиционные расходы', 'Обучение и развитие'] None
2025-07-17 13:45:49 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 13:45:49 - INFO - app.routers.transactions - Транзакция с ID 121 успешно создана для workspace 52. None
2025-07-17 13:46:14 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 13:46:15 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 13:46:15 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Проценты по депозитам', 'ИТ расходы', 'Штрафы и пени'] None
2025-07-17 13:49:47 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='оплата Cursor', amount=2000.0 None
2025-07-17 13:49:48 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Прочие расходы' None
2025-07-17 13:49:48 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Прочие расходы', confidence=0.95, alternatives=['Проценты по кредитам', 'Канцелярия и хозяйственные расходы', 'Реклама (онлайн и офлайн)'] None
2025-07-17 13:52:28 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='юрист', amount=7900.0 None
2025-07-17 13:52:29 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Профессиональные услуги' None
2025-07-17 13:52:29 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Профессиональные услуги', confidence=0.95, alternatives=['Модернизация и ремонт', 'Доходы', 'Продажи товаров/услуг'] None
2025-07-17 13:54:32 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 13:54:32 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 13:54:32 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Прочие операционные расходы', 'Доходы', 'Налоги и взносы'] None
2025-07-17 13:58:34 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-17 13:58:34 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Транспортные расходы' None
2025-07-17 13:58:34 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Транспортные расходы', confidence=0.95, alternatives=['Продажи товаров/услуг', 'Штрафы и пени', 'Обучение и развитие'] None
2025-07-17 13:58:43 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:58:44 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 13:58:44 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['ИТ расходы', 'Закупка товаров и материалов', 'Покупка нематериальных активов'] None
2025-07-17 13:58:46 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 13:58:46 - INFO - app.routers.transactions - Транзакция с ID 122 успешно создана для workspace 52. None
2025-07-17 13:58:54 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-17 13:58:55 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Транспортные расходы' None
2025-07-17 13:58:55 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Транспортные расходы', confidence=0.95, alternatives=['Проценты по кредитам', 'Продажи товаров/услуг', 'Авансы от клиентов'] None
2025-07-17 13:59:07 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 13:59:08 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 13:59:08 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Организация мероприятий', 'Маркетинг', 'Финансовые расходы'] None
2025-07-17 13:59:10 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 13:59:10 - INFO - app.routers.transactions - Транзакция с ID 123 успешно создана для workspace 52. None
2025-07-17 14:05:37 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 14:05:38 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 14:05:38 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Возвраты от поставщиков', 'Проценты по кредитам', 'Прочие расходы'] None
2025-07-17 14:07:40 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 14:07:41 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 14:07:41 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Благотворительность и пожертвования', 'Финансовые расходы', 'Реклама (онлайн и офлайн)'] None
2025-07-17 14:07:42 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 14:07:42 - INFO - app.routers.transactions - Транзакция с ID 124 успешно создана для workspace 52. None
2025-07-17 14:07:46 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:07:47 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:07:47 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['Программное обеспечение и сервисы', 'Благотворительность и пожертвования', 'ИТ расходы'] None
2025-07-17 14:08:07 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:08:08 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:08:08 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['Покупка нематериальных активов', 'Проценты по депозитам', 'Продвижение в соцсетях'] None
2025-07-17 14:08:34 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 14:08:35 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 14:08:35 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Благотворительность и пожертвования', 'Прочие расходы', 'Дизайн и полиграфия'] None
2025-07-17 14:08:58 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:09:01 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:09:01 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['Возвраты от поставщиков', 'Коммунальные услуги', 'Закупка товаров и материалов'] None
2025-07-17 14:09:17 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-17 14:09:19 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='налоги' None
2025-07-17 14:09:19 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='налоги', confidence=0.95, alternatives=['Инвестиционные расходы', 'Операционные расходы', 'Оплата поставщикам'] None
2025-07-17 14:10:51 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:10:52 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:10:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['Банковские комиссии', 'Проценты по кредитам', 'Доходы'] None
2025-07-17 14:11:12 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='юрист', amount=7900.0 None
2025-07-17 14:11:12 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Профессиональные услуги' None
2025-07-17 14:11:12 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Профессиональные услуги', confidence=0.95, alternatives=['Благотворительность и пожертвования', 'Обслуживание и поддержка', 'Организация мероприятий'] None
2025-07-17 14:11:28 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:11:29 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:11:29 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['Возвраты от поставщиков', 'Прочие расходы', 'Прочие операционные расходы'] None
2025-07-17 14:14:03 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='покупка телевозора', amount=100000.0 None
2025-07-17 14:14:04 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Крупная бытовая техника' None
2025-07-17 14:14:04 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Крупная бытовая техника', confidence=0.95, alternatives=['Прочие операционные расходы', 'Продажи товаров/услуг', 'Канцелярия и хозяйственные расходы'] None
2025-07-17 14:20:05 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 14:20:05 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 14:20:05 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Покупка техники и оборудования', 'Коммунальные услуги', 'Выплаты по кредитам и займам'] None
2025-07-17 14:20:07 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 14:20:07 - INFO - app.routers.transactions - Транзакция с ID 125 успешно создана для workspace 52. None
2025-07-17 14:24:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 14:24:52 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 14:24:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Аренда офиса/помещений', 'ИТ расходы', 'Маркетинг'] None
2025-07-17 14:25:02 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 14:25:02 - INFO - app.routers.transactions - Транзакция с ID 126 успешно создана для workspace 52. None
2025-07-17 14:25:06 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-17 14:25:07 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='офис' None
2025-07-17 14:25:07 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='офис', confidence=0.95, alternatives=['ИТ расходы', 'Возвраты от поставщиков', 'Налоги и взносы'] None
2025-07-17 14:25:33 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='аренда офиса', amount=15000.0 None
2025-07-17 14:25:34 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Аренда офиса' None
2025-07-17 14:25:34 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Аренда офиса', confidence=0.95, alternatives=['Продвижение в соцсетях', 'Прочие доходы', 'Возвраты от поставщиков'] None
2025-07-17 14:25:48 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 52 пользователем 1853true1853@yandex.ru None
2025-07-17 14:25:48 - INFO - app.routers.transactions - Транзакция с ID 127 успешно создана для workspace 52. None
2025-07-17 14:26:19 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='аренда авто', amount=15000.0 None
2025-07-17 14:26:20 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Транспортные расходы' None
2025-07-17 14:26:20 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Транспортные расходы', confidence=0.95, alternatives=['Выплаты по кредитам и займам', 'Доходы', 'Продвижение в соцсетях'] None
2025-07-17 14:26:38 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='аренда авто', amount=15000.0 None
2025-07-17 14:26:39 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Транспортные расходы' None
2025-07-17 14:26:39 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Транспортные расходы', confidence=0.95, alternatives=['Выплаты по кредитам и займам', 'Доходы', 'Прочее'] None
2025-07-17 17:52:08 - INFO - uvicorn.error - Started server process [10] None
2025-07-17 17:52:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-17 17:52:08 - INFO - app.main - Выполняется запуск приложения... None
2025-07-17 17:52:08 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-17 17:52:08 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-17 17:52:08 - INFO - app.initial_data - Запись 'admin' (ID: 1) для 'roles' подготовлена к созданию. None
2025-07-17 17:52:08 - INFO - app.initial_data - Запись 'user' (ID: 2) для 'roles' подготовлена к созданию. None
2025-07-17 17:52:08 - INFO - app.initial_data - Будет создано 2 новых записей в таблице 'roles'. None
2025-07-17 17:52:08 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-17 17:52:08 - INFO - app.initial_data - Запись 'Банковский счет' (ID: 1) для 'account_types' подготовлена к созданию. None
2025-07-17 17:52:08 - INFO - app.initial_data - Запись 'Касса' (ID: 2) для 'account_types' подготовлена к созданию. None
2025-07-17 17:52:08 - INFO - app.initial_data - Будет создано 2 новых записей в таблице 'account_types'. None
2025-07-17 17:52:08 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-17 17:52:08 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-17 17:52:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-17 17:52:51 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-17 17:52:52 - INFO - app.services.transaction_ml_categorization_service - YandexGPT response: category='Связь и интернет' None
2025-07-17 17:52:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization result: category='Связь и интернет', confidence=0.95, alternatives=['Доходы', 'Благотворительность и пожертвования', 'Дизайн и полиграфия'] None
2025-07-17 17:52:54 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-17 17:52:54 - INFO - app.routers.transactions - Транзакция с ID 7 успешно создана для workspace 2. None
2025-07-18 07:16:03 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:16:03 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 2: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7d6e56f78c00>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 93, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 60, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-18 07:16:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:16:18 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 2: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7d6e555d79c0>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 93, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 60, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-18 07:17:37 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:17:37 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 2: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7d6e55633c00>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 93, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 60, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-18 07:17:44 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:17:44 - ERROR - app.routers.transactions - Непредвиденная ошибка при создании транзакции для workspace 2: Для дохода должен быть указан счет-получатель. (<class 'ValueError'>, ValueError('Для дохода должен быть указан счет-получатель.'), <traceback object at 0x7d6e55617440>)
Traceback (most recent call last):
  File "/app/app/routers/transactions.py", line 93, in create_transaction
    transaction = transaction_service.create_transaction(
  File "/app/app/services/transaction_service.py", line 60, in create_transaction
    raise ValueError("Для дохода должен быть указан счет-получатель.")
ValueError: Для дохода должен быть указан счет-получатель.
2025-07-18 07:18:08 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:18:08 - INFO - app.routers.transactions - Транзакция с ID 8 успешно создана для workspace 2. None
2025-07-18 07:21:17 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 07:21:17 - INFO - app.routers.transactions - Транзакция с ID 9 успешно создана для workspace 2. None
2025-07-18 07:47:58 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 07:47:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 07:47:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 07:47:58 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 07:47:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 07:47:58 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 07:47:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 07:47:58 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 07:47:58 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 07:47:58 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 07:47:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 08:00:05 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 08:00:06 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion (<class 'requests.exceptions.HTTPError'>, HTTPError('401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion'), <traceback object at 0x796a4dfb67c0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 35, in yandex_gpt_categorize
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://llm.api.cloud.yandex.net/foundationModels/v1/completion
2025-07-18 08:00:06 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 08:27:03 - INFO - uvicorn.error - Shutting down None
2025-07-18 08:27:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 08:27:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 08:27:03 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 08:27:09 - INFO - uvicorn.error - Started server process [20] None
2025-07-18 08:27:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 08:27:09 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 08:27:09 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 08:27:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 08:27:09 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 08:27:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 08:27:09 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 08:27:09 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 08:27:09 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 08:27:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 08:27:32 - INFO - uvicorn.error - Shutting down None
2025-07-18 08:27:32 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 08:27:32 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 08:27:32 - INFO - uvicorn.error - Finished server process [20] None
2025-07-18 08:27:37 - INFO - uvicorn.error - Started server process [24] None
2025-07-18 08:27:37 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 08:27:37 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 08:27:37 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 08:27:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 08:27:37 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 08:27:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 08:27:37 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 08:27:37 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 08:27:37 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 08:27:37 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 08:27:41 - INFO - uvicorn.error - Started server process [29] None
2025-07-18 08:27:41 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 08:27:41 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 08:27:41 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 08:27:41 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 08:27:41 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 08:27:41 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 08:27:41 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 08:27:41 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 08:27:41 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 08:27:41 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 08:28:12 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 08:28:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 08:28:12 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 08:28:12 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 08:28:12 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 08:28:12 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 08:28:12 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 08:28:12 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 08:28:12 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 08:28:12 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 08:28:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 08:34:15 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='такси', amount=500.0 None
2025-07-18 08:34:15 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: name 'time' is not defined (<class 'NameError'>, NameError("name 'time' is not defined"), <traceback object at 0x7fda51129fc0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 70, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 43, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 15, in get_iam_token
    now = time.time()
NameError: name 'time' is not defined
2025-07-18 08:34:15 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 08:35:38 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='зарплата', amount=10000.0 None
2025-07-18 08:35:38 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: name 'time' is not defined (<class 'NameError'>, NameError("name 'time' is not defined"), <traceback object at 0x7fda5342dc00>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 70, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 43, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 15, in get_iam_token
    now = time.time()
NameError: name 'time' is not defined
2025-07-18 08:35:38 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 08:35:51 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 08:35:51 - INFO - app.routers.transactions - Транзакция с ID 10 успешно создана для workspace 2. None
2025-07-18 09:09:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 09:09:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:09:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:09:50 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:09:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:09:50 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:09:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:09:50 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:09:50 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:09:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:09:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:11:57 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 09:11:57 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: name 'time' is not defined (<class 'NameError'>, NameError("name 'time' is not defined"), <traceback object at 0x79d634d99e80>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 70, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 43, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 15, in get_iam_token
    now = time.time()
NameError: name 'time' is not defined
2025-07-18 09:11:57 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 09:19:03 - INFO - uvicorn.error - Shutting down None
2025-07-18 09:19:04 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 09:19:04 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 09:19:04 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 09:19:09 - INFO - uvicorn.error - Started server process [20] None
2025-07-18 09:19:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:19:09 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:19:09 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:19:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:19:09 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:19:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:19:09 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:19:09 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:19:09 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:19:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:19:15 - INFO - uvicorn.error - Shutting down None
2025-07-18 09:19:15 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 09:19:15 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 09:19:15 - INFO - uvicorn.error - Finished server process [20] None
2025-07-18 09:19:20 - INFO - uvicorn.error - Started server process [24] None
2025-07-18 09:19:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:19:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:19:20 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:19:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:19:20 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:19:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:19:20 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:19:20 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:19:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:19:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:19:50 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 09:19:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:19:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:19:50 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:19:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:19:50 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:19:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:19:50 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:19:50 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:19:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:19:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:20:30 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-18 09:20:31 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7a0c715b9f40>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 71, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 44, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 29, in get_iam_token
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 09:20:31 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 09:20:42 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-18 09:20:45 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7a0c715af980>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 71, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 44, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 29, in get_iam_token
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 09:20:45 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 09:24:48 - INFO - uvicorn.error - Shutting down None
2025-07-18 09:24:49 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 09:24:49 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 09:24:49 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 09:24:53 - INFO - uvicorn.error - Started server process [18] None
2025-07-18 09:24:53 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:24:53 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:24:53 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:24:53 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:24:53 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:24:53 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:24:53 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:24:53 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:24:53 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:24:53 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:24:56 - INFO - uvicorn.error - Shutting down None
2025-07-18 09:24:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 09:24:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 09:24:56 - INFO - uvicorn.error - Finished server process [18] None
2025-07-18 09:25:01 - INFO - uvicorn.error - Started server process [23] None
2025-07-18 09:25:01 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:25:01 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:25:01 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:25:01 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:25:01 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:25:01 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:25:01 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:25:01 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:25:01 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:25:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:25:24 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 09:25:24 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:25:24 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:25:24 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:25:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:25:24 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:25:24 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:25:24 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:25:24 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:25:24 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:25:24 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:31:21 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 09:31:21 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:31:21 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:31:21 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:31:21 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:31:21 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:31:21 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:31:21 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:31:21 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:31:21 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:31:21 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:31:45 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-18 09:31:46 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7820a7efb800>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 75, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 33, in get_iam_token
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 09:31:46 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 09:31:51 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 09:31:52 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7820a76751c0>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 75, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 33, in get_iam_token
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 09:31:52 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 09:35:20 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 09:35:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 09:35:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 09:35:20 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 09:35:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 09:35:20 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 09:35:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 09:35:20 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 09:35:20 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 09:35:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 09:35:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 09:35:27 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 09:35:27 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7a74904c5b40>)
Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 75, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 48, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 33, in get_iam_token
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 09:35:27 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 10:25:27 - INFO - uvicorn.error - Shutting down None
2025-07-18 10:25:27 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 10:25:27 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 10:25:27 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 10:25:31 - INFO - uvicorn.error - Started server process [18] None
2025-07-18 10:25:31 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 10:25:31 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 10:25:31 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 10:25:31 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 10:25:31 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 10:25:31 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 10:25:31 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 10:25:31 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 10:25:31 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 10:25:31 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:13:09 - INFO - uvicorn.error - Shutting down None
2025-07-18 11:13:09 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 11:13:09 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 11:13:09 - INFO - uvicorn.error - Finished server process [18] None
2025-07-18 11:13:13 - INFO - uvicorn.error - Started server process [22] None
2025-07-18 11:13:13 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:13:13 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:13:13 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:13:13 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:13:14 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:13:14 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:13:14 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:13:14 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:13:14 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:13:14 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:13:20 - INFO - uvicorn.error - Shutting down None
2025-07-18 11:13:20 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 11:13:20 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 11:13:20 - INFO - uvicorn.error - Finished server process [22] None
2025-07-18 11:13:23 - INFO - uvicorn.error - Started server process [26] None
2025-07-18 11:13:23 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:13:23 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:13:23 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:13:23 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:13:23 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:13:23 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:13:23 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:13:23 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:13:23 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:13:23 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:14:47 - INFO - uvicorn.error - Shutting down None
2025-07-18 11:14:47 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 11:14:47 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 11:14:47 - INFO - uvicorn.error - Finished server process [26] None
2025-07-18 11:14:50 - INFO - uvicorn.error - Started server process [30] None
2025-07-18 11:14:50 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:14:50 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:14:50 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:14:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:14:50 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:14:50 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:14:50 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:14:50 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:14:50 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:14:50 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:15:17 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 11:15:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:15:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:15:17 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:15:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:15:17 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:15:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:15:17 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:15:17 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:15:17 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:15:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:16:07 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='офис', amount=700.0 None
2025-07-18 11:16:10 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x72d3e9f9e2e0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')) (<class 'requests.exceptions.ConnectTimeout'>, ConnectTimeout(MaxRetryError("HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x72d3e9f9e2e0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))")), <traceback object at 0x72d3eb0e1040>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x72d3e9f9e2e0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x72d3e9f9e2e0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 64, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 37, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 24, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x72d3e9f9e2e0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))
2025-07-18 11:16:10 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 11:17:37 - INFO - uvicorn.error - Shutting down None
2025-07-18 11:17:37 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 11:17:37 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 11:17:37 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 11:17:40 - INFO - uvicorn.error - Started server process [20] None
2025-07-18 11:17:40 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:17:40 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:17:40 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:17:40 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:17:40 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:17:40 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:17:40 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:17:40 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:17:40 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:17:40 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:17:56 - INFO - uvicorn.error - Shutting down None
2025-07-18 11:17:56 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 11:17:56 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 11:17:56 - INFO - uvicorn.error - Finished server process [20] None
2025-07-18 11:17:59 - INFO - uvicorn.error - Started server process [25] None
2025-07-18 11:17:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:17:59 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:17:59 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:17:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:17:59 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:17:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:17:59 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:17:59 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:17:59 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:17:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:18:20 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 11:18:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:18:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:18:20 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:18:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:18:20 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:18:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:18:20 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:18:20 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:18:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:18:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:19:02 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 11:19:10 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x7571e54e5280>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x7571e43bb730>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7571e43bb730>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 40, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7571e43bb730>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 86, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 59, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 47, in get_iam_token
    token = get_iam_token_from_env()
  File "/app/app/services/transaction_ml_categorization_service.py", line 26, in get_iam_token_from_env
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 11:19:10 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 11:26:26 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 11:26:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:26:26 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:26:26 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:26:26 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:26:26 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:26:26 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:26:26 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:26:26 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:26:26 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:26:26 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:27:07 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 11:27:14 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: HTTPSConnectionPool(host='iam.api.cloud.yandex.net', port=443): Max retries exceeded with url: /iam/v1/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7946c40ba340>: Failed to establish a new connection: [Errno 101] Network is unreachable')) (<class 'requests.exceptions.ConnectionError'>, ConnectionError(MaxRetryError("HTTPSConnectionPool(host='iam.api.cloud.yandex.net', port=443): Max retries exceeded with url: /iam/v1/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7946c40ba340>: Failed to establish a new connection: [Errno 101] Network is unreachable'))")), <traceback object at 0x7946c517f780>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x7946c40bafa0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7946c40bafa0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 40, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7946c40bafa0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
OSError: [Errno 101] Network is unreachable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 488, in _make_request
    raise new_e
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 464, in _make_request
    self._validate_conn(conn)
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 1093, in _validate_conn
    conn.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 753, in connect
    self.sock = sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPSConnection object at 0x7946c40ba340>: Failed to establish a new connection: [Errno 101] Network is unreachable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='iam.api.cloud.yandex.net', port=443): Max retries exceeded with url: /iam/v1/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7946c40ba340>: Failed to establish a new connection: [Errno 101] Network is unreachable'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 86, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 59, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 47, in get_iam_token
    token = get_iam_token_from_env()
  File "/app/app/services/transaction_ml_categorization_service.py", line 18, in get_iam_token_from_env
    resp = requests.post(
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='iam.api.cloud.yandex.net', port=443): Max retries exceeded with url: /iam/v1/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x7946c40ba340>: Failed to establish a new connection: [Errno 101] Network is unreachable'))
2025-07-18 11:27:14 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 11:35:48 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 11:35:48 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:35:48 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:35:48 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:35:48 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:35:48 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:35:48 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:35:48 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:35:48 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:35:48 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:35:48 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:35:58 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='юрист', amount=7900.0 None
2025-07-18 11:36:03 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x75fc24688400>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x75fc2469fa60>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x75fc2469fa60>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 40, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x75fc2469fa60>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 86, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 59, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 47, in get_iam_token
    token = get_iam_token_from_env()
  File "/app/app/services/transaction_ml_categorization_service.py", line 26, in get_iam_token_from_env
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 11:36:03 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 11:39:25 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 11:39:25 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 11:39:25 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 11:39:25 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 11:39:25 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 11:39:25 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 11:39:25 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 11:39:25 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 11:39:25 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 11:39:25 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 11:39:25 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 11:40:50 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='налоги', amount=800.0 None
2025-07-18 11:41:01 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x730d4c50c980>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x730d4c47d6d0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x730d4c47d6d0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 40, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x730d4c47d6d0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 86, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 59, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 47, in get_iam_token
    token = get_iam_token_from_env()
  File "/app/app/services/transaction_ml_categorization_service.py", line 26, in get_iam_token_from_env
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 11:41:01 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-18 12:14:40 - INFO - uvicorn.error - Shutting down None
2025-07-18 12:14:40 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 12:14:40 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 12:14:40 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 12:14:42 - INFO - uvicorn.error - Started server process [19] None
2025-07-18 12:14:42 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:14:42 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:14:42 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:14:42 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:14:42 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:14:42 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:14:42 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:14:42 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:14:42 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:14:42 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:14:53 - INFO - uvicorn.error - Shutting down None
2025-07-18 12:14:53 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 12:14:53 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 12:14:53 - INFO - uvicorn.error - Finished server process [19] None
2025-07-18 12:14:56 - INFO - uvicorn.error - Started server process [23] None
2025-07-18 12:14:56 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:14:56 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:14:56 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:14:56 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:14:56 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:14:56 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:14:56 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:14:56 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:14:56 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:14:56 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:14:59 - INFO - uvicorn.error - Started server process [27] None
2025-07-18 12:14:59 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:14:59 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:14:59 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:14:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:14:59 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:14:59 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:14:59 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:14:59 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:14:59 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:14:59 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:15:02 - INFO - uvicorn.error - Started server process [31] None
2025-07-18 12:15:02 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:15:02 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:15:02 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:15:02 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:15:02 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:15:02 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:15:02 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:15:02 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:15:02 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:15:02 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:15:02 - INFO - uvicorn.error - Shutting down None
2025-07-18 12:15:02 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 12:15:02 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 12:15:02 - INFO - uvicorn.error - Finished server process [31] None
2025-07-18 12:15:05 - INFO - uvicorn.error - Started server process [35] None
2025-07-18 12:15:05 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:15:05 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:15:05 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:15:05 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:15:05 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:15:05 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:15:05 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:15:05 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:15:05 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:15:05 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:15:08 - INFO - uvicorn.error - Started server process [39] None
2025-07-18 12:15:08 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:15:08 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:15:08 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:15:08 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:15:08 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:15:08 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:15:08 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:15:08 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:15:08 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:15:08 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:15:11 - INFO - uvicorn.error - Started server process [43] None
2025-07-18 12:15:11 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:15:11 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:15:11 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:15:11 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:15:11 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:15:11 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:15:11 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:15:11 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:15:11 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:15:11 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:16:03 - INFO - uvicorn.error - Shutting down None
2025-07-18 12:16:03 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 12:16:03 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 12:16:03 - INFO - uvicorn.error - Finished server process [43] None
2025-07-18 12:16:06 - INFO - uvicorn.error - Started server process [47] None
2025-07-18 12:16:06 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:16:06 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:16:06 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:16:06 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:16:06 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:16:06 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:16:06 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:16:06 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:16:06 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:16:06 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:16:09 - INFO - uvicorn.error - Started server process [51] None
2025-07-18 12:16:09 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:16:09 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:16:09 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:16:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:16:09 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:16:09 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:16:09 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:16:09 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:16:09 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:16:09 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:16:12 - INFO - uvicorn.error - Started server process [55] None
2025-07-18 12:16:12 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:16:12 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:16:12 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:16:12 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:16:12 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:16:12 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:16:12 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:16:12 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:16:12 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:16:12 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:16:15 - INFO - uvicorn.error - Started server process [60] None
2025-07-18 12:16:15 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:16:15 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:16:15 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:16:15 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:16:15 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:16:15 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:16:15 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:16:15 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:16:15 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:16:15 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:16:18 - INFO - uvicorn.error - Started server process [64] None
2025-07-18 12:16:18 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:16:18 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:16:18 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:16:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:16:18 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:16:18 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:16:18 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:16:18 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:16:18 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:16:18 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:17:52 - INFO - uvicorn.error - Shutting down None
2025-07-18 12:17:52 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 12:17:52 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 12:17:52 - INFO - uvicorn.error - Finished server process [64] None
2025-07-18 12:17:55 - INFO - uvicorn.error - Started server process [68] None
2025-07-18 12:17:55 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:17:55 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:17:55 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:17:55 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:17:55 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:17:55 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:17:55 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:17:55 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:17:55 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:17:55 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:17:58 - INFO - uvicorn.error - Started server process [72] None
2025-07-18 12:17:58 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:17:58 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:17:58 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:17:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:17:58 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:17:58 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:17:58 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:17:58 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:17:58 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:17:58 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 12:26:20 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 12:26:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 12:26:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 12:26:20 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 12:26:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 12:26:20 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 12:26:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 12:26:20 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 12:26:20 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 12:26:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 12:26:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 18:46:44 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 18:46:44 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 18:46:44 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 18:46:44 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 18:46:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 18:46:44 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 18:46:44 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 18:46:44 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 18:46:44 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 18:46:44 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 18:46:44 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 19:27:01 - INFO - uvicorn.error - Shutting down None
2025-07-18 19:27:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 19:27:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 19:27:01 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 19:27:04 - INFO - uvicorn.error - Started server process [83] None
2025-07-18 19:27:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 19:27:04 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 19:27:04 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 19:27:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 19:27:04 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 19:27:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 19:27:04 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 19:27:04 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 19:27:04 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 19:27:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 19:27:17 - INFO - uvicorn.error - Shutting down None
2025-07-18 19:27:17 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 19:27:17 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 19:27:17 - INFO - uvicorn.error - Finished server process [83] None
2025-07-18 19:27:20 - INFO - uvicorn.error - Started server process [87] None
2025-07-18 19:27:20 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 19:27:20 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 19:27:20 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 19:27:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 19:27:20 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 19:27:20 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 19:27:20 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 19:27:20 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 19:27:20 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 19:27:20 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 19:27:23 - INFO - uvicorn.error - Shutting down None
2025-07-18 19:27:24 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 19:27:24 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 19:27:24 - INFO - uvicorn.error - Finished server process [87] None
2025-07-18 19:27:27 - INFO - uvicorn.error - Started server process [91] None
2025-07-18 19:27:27 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 19:27:27 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 19:27:27 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 19:27:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 19:27:27 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 19:27:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 19:27:27 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 19:27:27 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 19:27:27 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 19:27:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 19:42:18 - INFO - app.routers.transactions - Попытка создания транзакции для workspace 2 пользователем true1853@yandex.ru None
2025-07-18 19:42:18 - INFO - app.routers.transactions - Транзакция с ID 11 успешно создана для workspace 2. None
2025-07-18 20:48:13 - INFO - uvicorn.error - Shutting down None
2025-07-18 20:48:13 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 20:48:13 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 20:48:13 - INFO - uvicorn.error - Finished server process [91] None
2025-07-18 20:48:17 - INFO - uvicorn.error - Started server process [219] None
2025-07-18 20:48:17 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:48:17 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:48:17 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:48:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:48:17 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:48:17 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:48:17 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:48:17 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:48:17 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:48:17 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 20:48:46 - INFO - uvicorn.error - Shutting down None
2025-07-18 20:48:46 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 20:48:46 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 20:48:46 - INFO - uvicorn.error - Finished server process [219] None
2025-07-18 20:48:49 - INFO - uvicorn.error - Started server process [224] None
2025-07-18 20:48:49 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:48:49 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:48:49 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:48:49 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:48:49 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:48:49 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:48:49 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:48:49 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:48:49 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:48:49 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 20:49:16 - INFO - uvicorn.error - Started server process [10] None
2025-07-18 20:49:16 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:49:16 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:49:16 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:49:16 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:49:16 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:49:16 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:49:16 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:49:16 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:49:16 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:49:16 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 20:50:50 - INFO - uvicorn.error - Shutting down None
2025-07-18 20:50:50 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 20:50:50 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 20:50:50 - INFO - uvicorn.error - Finished server process [10] None
2025-07-18 20:50:52 - INFO - uvicorn.error - Started server process [19] None
2025-07-18 20:50:52 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:50:52 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:50:52 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:50:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:50:52 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:50:52 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:50:52 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:50:52 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:50:52 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:50:52 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 20:51:01 - INFO - uvicorn.error - Shutting down None
2025-07-18 20:51:01 - INFO - uvicorn.error - Waiting for application shutdown. None
2025-07-18 20:51:01 - INFO - uvicorn.error - Application shutdown complete. None
2025-07-18 20:51:01 - INFO - uvicorn.error - Finished server process [19] None
2025-07-18 20:51:04 - INFO - uvicorn.error - Started server process [24] None
2025-07-18 20:51:04 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:51:04 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:51:04 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:51:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:51:04 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:51:04 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:51:04 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:51:04 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:51:04 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:51:04 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 20:51:07 - INFO - uvicorn.error - Started server process [29] None
2025-07-18 20:51:07 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-18 20:51:07 - INFO - app.main - Выполняется запуск приложения... None
2025-07-18 20:51:07 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-18 20:51:07 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-18 20:51:07 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-18 20:51:07 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-18 20:51:07 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-18 20:51:07 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-18 20:51:07 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-18 20:51:07 - INFO - uvicorn.error - Application startup complete. None
2025-07-18 21:14:50 - INFO - app.services.transaction_ml_categorization_service - ML Categorization request: description='интернет', amount=1000.0 None
2025-07-18 21:14:54 - ERROR - app.services.transaction_ml_categorization_service - YandexGPT call failed: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens (<class 'requests.exceptions.HTTPError'>, HTTPError('400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens'), <traceback object at 0x78f6a6c234c0>)
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 85, in create_connection
    raise err
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/connection.py", line 73, in create_connection
    sock.connect(sa)
socket.timeout: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 493, in _make_request
    conn.request(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 494, in request
    self.endheaders()
  File "/usr/local/lib/python3.9/http/client.py", line 1280, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/local/lib/python3.9/http/client.py", line 1040, in _send_output
    self.send(msg)
  File "/usr/local/lib/python3.9/http/client.py", line 980, in send
    self.connect()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 325, in connect
    self.sock = self._new_conn()
  File "/usr/local/lib/python3.9/site-packages/urllib3/connection.py", line 207, in _new_conn
    raise ConnectTimeoutError(
urllib3.exceptions.ConnectTimeoutError: (<urllib3.connection.HTTPConnection object at 0x78f6a4a5cbb0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.9/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.9/site-packages/urllib3/util/retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x78f6a4a5cbb0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 40, in get_iam_token
    token = get_iam_token_from_metadata()
  File "/app/app/services/transaction_ml_categorization_service.py", line 11, in get_iam_token_from_metadata
    resp = requests.get(url, headers=headers, timeout=3)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.9/site-packages/requests/adapters.py", line 688, in send
    raise ConnectTimeout(e, request=request)
requests.exceptions.ConnectTimeout: HTTPConnectionPool(host='169.254.169.254', port=80): Max retries exceeded with url: /computeMetadata/v1/instance/service-accounts/default/token (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x78f6a4a5cbb0>, 'Connection to 169.254.169.254 timed out. (connect timeout=3)'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/services/transaction_ml_categorization_service.py", line 86, in ml_categorize_transaction
    category = yandex_gpt_categorize(description, amount)
  File "/app/app/services/transaction_ml_categorization_service.py", line 59, in yandex_gpt_categorize
    auth_header = f"Bearer {get_iam_token()}"
  File "/app/app/services/transaction_ml_categorization_service.py", line 47, in get_iam_token
    token = get_iam_token_from_env()
  File "/app/app/services/transaction_ml_categorization_service.py", line 26, in get_iam_token_from_env
    resp.raise_for_status()
  File "/usr/local/lib/python3.9/site-packages/requests/models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://iam.api.cloud.yandex.net/iam/v1/tokens
2025-07-18 21:14:54 - INFO - app.services.transaction_ml_categorization_service - ML Categorization fallback: category='Прочее', confidence=0.0, alternatives=[] None
2025-07-19 09:45:26 - INFO - uvicorn.error - Started server process [10] None
2025-07-19 09:45:26 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-19 09:45:26 - INFO - app.main - Выполняется запуск приложения... None
2025-07-19 09:45:26 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-19 09:45:26 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-19 09:45:27 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-19 09:45:27 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-19 09:45:27 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-19 09:45:27 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-19 09:45:27 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-19 09:45:27 - INFO - uvicorn.error - Application startup complete. None
2025-07-19 09:52:36 - INFO - uvicorn.error - Started server process [10] None
2025-07-19 09:52:36 - INFO - uvicorn.error - Waiting for application startup. None
2025-07-19 09:52:36 - INFO - app.main - Выполняется запуск приложения... None
2025-07-19 09:52:36 - INFO - app.initial_data - Запуск инициализации базовых данных... None
2025-07-19 09:52:36 - INFO - app.initial_data - Проверка и создание данных для таблицы 'roles'... None
2025-07-19 09:52:37 - INFO - app.initial_data - Все необходимые записи в таблице 'roles' уже существуют. None
2025-07-19 09:52:37 - INFO - app.initial_data - Проверка и создание данных для таблицы 'account_types'... None
2025-07-19 09:52:37 - INFO - app.initial_data - Все необходимые записи в таблице 'account_types' уже существуют. None
2025-07-19 09:52:37 - INFO - app.initial_data - Инициализация базовых данных успешно завершена. None
2025-07-19 09:52:37 - INFO - app.main - Инициализация базы данных успешно завершена. None
2025-07-19 09:52:37 - INFO - uvicorn.error - Application startup complete. None
